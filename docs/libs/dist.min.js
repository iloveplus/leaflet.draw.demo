(function(d,f,b){var g={version:"1.0.1+ffcfcc1"};function a(){var j=d.L;g.noConflict=function(){d.L=j;return this};d.L=g}if(typeof module==="object"&&typeof module.exports==="object"){module.exports=g}else{if(typeof define==="function"&&define.amd){define(g)}}if(typeof d!=="undefined"){a()}g.Util={extend:function(m){var n,l,k,o;for(l=1,k=arguments.length;l<k;l++){o=arguments[l];for(n in o){m[n]=o[n]}}return m},create:Object.create||(function(){function j(){}return function(k){j.prototype=k;return new j()}})(),bind:function(k,l){var m=Array.prototype.slice;if(k.bind){return k.bind.apply(k,m.call(arguments,1))}var j=m.call(arguments,2);return function(){return k.apply(l,j.length?j.concat(m.call(arguments)):arguments)}},stamp:function(j){j._leaflet_id=j._leaflet_id||++g.Util.lastId;return j._leaflet_id},lastId:0,throttle:function(o,p,n){var m,l,k,j;j=function(){m=false;if(l){k.apply(n,l);l=false}};k=function(){if(m){l=arguments}else{o.apply(n,arguments);setTimeout(j,p);m=true}};return k},wrapNum:function(k,l,n){var j=l[1],m=l[0],o=j-m;return k===j&&n?k:((k-m)%o+o)%o+m},falseFn:function(){return false},formatNum:function(j,l){var k=Math.pow(10,l||5);return Math.round(j*k)/k},trim:function(j){return j.trim?j.trim():j.replace(/^\s+|\s+$/g,"")},splitWords:function(j){return g.Util.trim(j).split(/\s+/)},setOptions:function(l,j){if(!l.hasOwnProperty("options")){l.options=l.options?g.Util.create(l.options):{}}for(var k in j){l.options[k]=j[k]}return l.options},getParamString:function(m,j,k){var n=[];for(var l in m){n.push(encodeURIComponent(k?l.toUpperCase():l)+"="+encodeURIComponent(m[l]))}return((!j||j.indexOf("?")===-1)?"?":"&")+n.join("&")},template:function(k,j){return k.replace(g.Util.templateRe,function(n,l){var m=j[l];if(m===b){throw new Error("No value provided for variable "+n)}else{if(typeof m==="function"){m=m(j)}}return m})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(j){return(Object.prototype.toString.call(j)==="[object Array]")},indexOf:function(l,k){for(var j=0;j<l.length;j++){if(l[j]===k){return j}}return -1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function m(o){return d["webkit"+o]||d["moz"+o]||d["ms"+o]}var n=0;function k(o){var q=+new Date(),p=Math.max(0,16-(q-n));n=q+p;return d.setTimeout(o,p)}var j=d.requestAnimationFrame||m("RequestAnimationFrame")||k,l=d.cancelAnimationFrame||m("CancelAnimationFrame")||m("CancelRequestAnimationFrame")||function(o){d.clearTimeout(o)};g.Util.requestAnimFrame=function(q,p,o){if(o&&j===k){q.call(p)}else{return j.call(d,g.bind(q,p))}};g.Util.cancelAnimFrame=function(o){if(o){l.call(d,o)}}})();g.extend=g.Util.extend;g.bind=g.Util.bind;g.stamp=g.Util.stamp;g.setOptions=g.Util.setOptions;g.Class=function(){};g.Class.extend=function(k){var n=function(){if(this.initialize){this.initialize.apply(this,arguments)}this.callInitHooks()};var m=n.__super__=this.prototype;var l=g.Util.create(m);l.constructor=n;n.prototype=l;for(var j in this){if(this.hasOwnProperty(j)&&j!=="prototype"){n[j]=this[j]}}if(k.statics){g.extend(n,k.statics);delete k.statics}if(k.includes){g.Util.extend.apply(null,[l].concat(k.includes));delete k.includes}if(l.options){k.options=g.Util.extend(g.Util.create(l.options),k.options)}g.extend(l,k);l._initHooks=[];l.callInitHooks=function(){if(this._initHooksCalled){return}if(m.callInitHooks){m.callInitHooks.call(this)}this._initHooksCalled=true;for(var p=0,o=l._initHooks.length;p<o;p++){l._initHooks[p].call(this)}};return n};g.Class.include=function(j){g.extend(this.prototype,j);return this};g.Class.mergeOptions=function(j){g.extend(this.prototype.options,j);return this};g.Class.addInitHook=function(k){var j=Array.prototype.slice.call(arguments,1);var l=typeof k==="function"?k:function(){this[k].apply(this,j)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(l);return this};g.Evented=g.Class.extend({on:function(m,o,l){if(typeof m==="object"){for(var n in m){this._on(n,m[n],o)}}else{m=g.Util.splitWords(m);for(var k=0,j=m.length;k<j;k++){this._on(m[k],o,l)}}return this},off:function(m,o,l){if(!m){delete this._events}else{if(typeof m==="object"){for(var n in m){this._off(n,m[n],o)}}else{m=g.Util.splitWords(m);for(var k=0,j=m.length;k<j;k++){this._off(m[k],o,l)}}}return this},_on:function(q,p,n){this._events=this._events||{};var k=this._events[q];if(!k){k=[];this._events[q]=k}if(n===this){n=b}var l={fn:p,ctx:n},o=k;for(var m=0,j=o.length;m<j;m++){if(o[m].fn===p&&o[m].ctx===n){return}}o.push(l);k.count++},_off:function(q,p,n){var o,m,j;if(!this._events){return}o=this._events[q];if(!o){return}if(!p){for(m=0,j=o.length;m<j;m++){o[m].fn=g.Util.falseFn}delete this._events[q];return}if(n===this){n=b}if(o){for(m=0,j=o.length;m<j;m++){var k=o[m];if(k.ctx!==n){continue}if(k.fn===p){k.fn=g.Util.falseFn;if(this._firingCount){this._events[q]=o=o.slice()}o.splice(m,1);return}}}},fire:function(p,r,k){if(!this.listens(p,k)){return this}var q=g.Util.extend({},r,{type:p,target:this});
    if(this._events){var o=this._events[p];if(o){this._firingCount=(this._firingCount+1)||1;for(var n=0,j=o.length;n<j;n++){var m=o[n];m.fn.call(m.ctx||this,q)}this._firingCount--}}if(k){this._propagateEvent(q)}return this},listens:function(l,j){var k=this._events&&this._events[l];if(k&&k.length){return true}if(j){for(var m in this._eventParents){if(this._eventParents[m].listens(l,j)){return true}}}return false},once:function(k,n,j){if(typeof k==="object"){for(var m in k){this.once(m,k[m],n)}return this}var l=g.bind(function(){this.off(k,n,j).off(k,l,j)},this);return this.on(k,n,j).on(k,l,j)},addEventParent:function(j){this._eventParents=this._eventParents||{};this._eventParents[g.stamp(j)]=j;return this},removeEventParent:function(j){if(this._eventParents){delete this._eventParents[g.stamp(j)]}return this},_propagateEvent:function(j){for(var k in this._eventParents){this._eventParents[k].fire(j.type,g.extend({layer:j.target},j),true)}}});var c=g.Evented.prototype;c.addEventListener=c.on;c.removeEventListener=c.clearAllEventListeners=c.off;c.addOneTimeEventListener=c.once;c.fireEvent=c.fire;c.hasEventListeners=c.listens;g.Mixin={Events:c};(function(){var m=navigator.userAgent.toLowerCase(),v=f.documentElement,l="ActiveXObject" in d,w=m.indexOf("webkit")!==-1,y=m.indexOf("phantom")!==-1,t=m.search("android [23]")!==-1,r=m.indexOf("chrome")!==-1,n=m.indexOf("gecko")!==-1&&!w&&!d.opera&&!l,u=navigator.platform.indexOf("Win")===0,k=typeof orientation!=="undefined"||m.indexOf("mobile")!==-1,p=!d.PointerEvent&&d.MSPointerEvent,j=d.PointerEvent||p,s=l&&("transition" in v.style),x=("WebKitCSSMatrix" in d)&&("m11" in new d.WebKitCSSMatrix())&&!t,o="MozPerspective" in v.style,z="OTransition" in v.style;var q=!d.L_NO_TOUCH&&(j||"ontouchstart" in d||(d.DocumentTouch&&f instanceof d.DocumentTouch));g.Browser={ie:l,ielt9:l&&!f.addEventListener,edge:"msLaunchUri" in navigator&&!("documentMode" in f),webkit:w,gecko:n,android:m.indexOf("android")!==-1,android23:t,chrome:r,safari:!r&&m.indexOf("safari")!==-1,win:u,ie3d:s,webkit3d:x,gecko3d:o,opera12:z,any3d:!d.L_DISABLE_3D&&(s||x||o)&&!z&&!y,mobile:k,mobileWebkit:k&&w,mobileWebkit3d:k&&x,mobileOpera:k&&d.opera,mobileGecko:k&&n,touch:!!q,msPointer:!!p,pointer:!!j,retina:(d.devicePixelRatio||(d.screen.deviceXDPI/d.screen.logicalXDPI))>1}}());g.Point=function(j,l,k){this.x=(k?Math.round(j):j);this.y=(k?Math.round(l):l)};g.Point.prototype={clone:function(){return new g.Point(this.x,this.y)},add:function(j){return this.clone()._add(g.point(j))},_add:function(j){this.x+=j.x;this.y+=j.y;return this},subtract:function(j){return this.clone()._subtract(g.point(j))},_subtract:function(j){this.x-=j.x;this.y-=j.y;return this},divideBy:function(j){return this.clone()._divideBy(j)},_divideBy:function(j){this.x/=j;this.y/=j;return this},multiplyBy:function(j){return this.clone()._multiplyBy(j)},_multiplyBy:function(j){this.x*=j;this.y*=j;return this},scaleBy:function(j){return new g.Point(this.x*j.x,this.y*j.y)},unscaleBy:function(j){return new g.Point(this.x/j.x,this.y/j.y)},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){return this.clone()._ceil()},_ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},distanceTo:function(k){k=g.point(k);var j=k.x-this.x,l=k.y-this.y;return Math.sqrt(j*j+l*l)},equals:function(j){j=g.point(j);return j.x===this.x&&j.y===this.y},contains:function(j){j=g.point(j);return Math.abs(j.x)<=Math.abs(this.x)&&Math.abs(j.y)<=Math.abs(this.y)},toString:function(){return"Point("+g.Util.formatNum(this.x)+", "+g.Util.formatNum(this.y)+")"}};g.point=function(j,l,k){if(j instanceof g.Point){return j}if(g.Util.isArray(j)){return new g.Point(j[0],j[1])}if(j===b||j===null){return j}if(typeof j==="object"&&"x" in j&&"y" in j){return new g.Point(j.x,j.y)}return new g.Point(j,l,k)};g.Bounds=function(l,k){if(!l){return}var n=k?[l,k]:l;for(var m=0,j=n.length;m<j;m++){this.extend(n[m])}};g.Bounds.prototype={extend:function(j){j=g.point(j);if(!this.min&&!this.max){this.min=j.clone();this.max=j.clone()}else{this.min.x=Math.min(j.x,this.min.x);this.max.x=Math.max(j.x,this.max.x);this.min.y=Math.min(j.y,this.min.y);this.max.y=Math.max(j.y,this.max.y)}return this},getCenter:function(j){return new g.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,j)},getBottomLeft:function(){return new g.Point(this.min.x,this.max.y)},getTopRight:function(){return new g.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var k,j;if(typeof l[0]==="number"||l instanceof g.Point){l=g.point(l)}else{l=g.bounds(l)}if(l instanceof g.Bounds){k=l.min;j=l.max}else{k=j=l}return(k.x>=this.min.x)&&(j.x<=this.max.x)&&(k.y>=this.min.y)&&(j.y<=this.max.y)},intersects:function(o){o=g.bounds(o);var m=this.min,j=this.max,n=o.min,k=o.max,l=(k.x>=m.x)&&(n.x<=j.x),p=(k.y>=m.y)&&(n.y<=j.y);
    return l&&p},overlaps:function(p){p=g.bounds(p);var m=this.min,j=this.max,o=p.min,k=p.max,n=(k.x>m.x)&&(o.x<j.x),l=(k.y>m.y)&&(o.y<j.y);return n&&l},isValid:function(){return !!(this.min&&this.max)}};g.bounds=function(k,j){if(!k||k instanceof g.Bounds){return k}return new g.Bounds(k,j)};g.Transformation=function(k,j,m,l){this._a=k;this._b=j;this._c=m;this._d=l};g.Transformation.prototype={transform:function(j,k){return this._transform(j.clone(),k)},_transform:function(j,k){k=k||1;j.x=k*(this._a*j.x+this._b);j.y=k*(this._c*j.y+this._d);return j},untransform:function(j,k){k=k||1;return new g.Point((j.x/k-this._b)/this._a,(j.y/k-this._d)/this._c)}};g.DomUtil={get:function(j){return typeof j==="string"?f.getElementById(j):j},getStyle:function(l,k){var m=l.style[k]||(l.currentStyle&&l.currentStyle[k]);if((!m||m==="auto")&&f.defaultView){var j=f.defaultView.getComputedStyle(l,null);m=j?j[k]:null}return m==="auto"?null:m},create:function(k,m,j){var l=f.createElement(k);l.className=m||"";if(j){j.appendChild(l)}return l},remove:function(k){var j=k.parentNode;if(j){j.removeChild(k)}},empty:function(j){while(j.firstChild){j.removeChild(j.firstChild)}},toFront:function(j){j.parentNode.appendChild(j)},toBack:function(k){var j=k.parentNode;j.insertBefore(k,j.firstChild)},hasClass:function(l,j){if(l.classList!==b){return l.classList.contains(j)}var k=g.DomUtil.getClass(l);return k.length>0&&new RegExp("(^|\\s)"+j+"(\\s|$)").test(k)},addClass:function(o,k){if(o.classList!==b){var m=g.Util.splitWords(k);for(var l=0,j=m.length;l<j;l++){o.classList.add(m[l])}}else{if(!g.DomUtil.hasClass(o,k)){var n=g.DomUtil.getClass(o);g.DomUtil.setClass(o,(n?n+" ":"")+k)}}},removeClass:function(k,j){if(k.classList!==b){k.classList.remove(j)}else{g.DomUtil.setClass(k,g.Util.trim((" "+g.DomUtil.getClass(k)+" ").replace(" "+j+" "," ")))}},setClass:function(k,j){if(k.className.baseVal===b){k.className=j}else{k.className.baseVal=j}},getClass:function(j){return j.className.baseVal===b?j.className:j.className.baseVal},setOpacity:function(j,k){if("opacity" in j.style){j.style.opacity=k}else{if("filter" in j.style){g.DomUtil._setOpacityIE(j,k)}}},_setOpacityIE:function(l,m){var k=false,j="DXImageTransform.Microsoft.Alpha";try{k=l.filters.item(j)}catch(n){if(m===1){return}}m=Math.round(m*100);if(k){k.Enabled=(m!==100);k.Opacity=m}else{l.style.filter+=" progid:"+j+"(opacity="+m+")"}},testProp:function(l){var k=f.documentElement.style;for(var j=0;j<l.length;j++){if(l[j] in k){return l[j]}}return false},setTransform:function(j,l,k){var m=l||new g.Point(0,0);j.style[g.DomUtil.TRANSFORM]=(g.Browser.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(k?" scale("+k+")":"")},setPosition:function(k,j){k._leaflet_pos=j;if(g.Browser.any3d){g.DomUtil.setTransform(k,j)}else{k.style.left=j.x+"px";k.style.top=j.y+"px"}},getPosition:function(j){return j._leaflet_pos||new g.Point(0,0)}};(function(){g.DomUtil.TRANSFORM=g.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var k=g.DomUtil.TRANSITION=g.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);g.DomUtil.TRANSITION_END=k==="webkitTransition"||k==="OTransition"?k+"End":"transitionend";if("onselectstart" in f){g.DomUtil.disableTextSelection=function(){g.DomEvent.on(d,"selectstart",g.DomEvent.preventDefault)};g.DomUtil.enableTextSelection=function(){g.DomEvent.off(d,"selectstart",g.DomEvent.preventDefault)}}else{var j=g.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);g.DomUtil.disableTextSelection=function(){if(j){var l=f.documentElement.style;this._userSelect=l[j];l[j]="none"}};g.DomUtil.enableTextSelection=function(){if(j){f.documentElement.style[j]=this._userSelect;delete this._userSelect}}}g.DomUtil.disableImageDrag=function(){g.DomEvent.on(d,"dragstart",g.DomEvent.preventDefault)};g.DomUtil.enableImageDrag=function(){g.DomEvent.off(d,"dragstart",g.DomEvent.preventDefault)};g.DomUtil.preventOutline=function(l){while(l.tabIndex===-1){l=l.parentNode}if(!l||!l.style){return}g.DomUtil.restoreOutline();this._outlineElement=l;this._outlineStyle=l.style.outline;l.style.outline="none";g.DomEvent.on(d,"keydown",g.DomUtil.restoreOutline,this)};g.DomUtil.restoreOutline=function(){if(!this._outlineElement){return}this._outlineElement.style.outline=this._outlineStyle;delete this._outlineElement;delete this._outlineStyle;g.DomEvent.off(d,"keydown",g.DomUtil.restoreOutline,this)}})();g.LatLng=function(l,j,k){if(isNaN(l)||isNaN(j)){throw new Error("Invalid LatLng object: ("+l+", "+j+")")}this.lat=+l;this.lng=+j;if(k!==b){this.alt=+k}};g.LatLng.prototype={equals:function(l,j){if(!l){return false}l=g.latLng(l);var k=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return k<=(j===b?1e-9:j)},toString:function(j){return"LatLng("+g.Util.formatNum(this.lat,j)+", "+g.Util.formatNum(this.lng,j)+")"},distanceTo:function(j){return g.CRS.Earth.distance(this,g.latLng(j))},wrap:function(){return g.CRS.Earth.wrapLatLng(this)
},toBounds:function(k){var l=180*k/40075017,j=l/Math.cos((Math.PI/180)*this.lat);return g.latLngBounds([this.lat-l,this.lng-j],[this.lat+l,this.lng+j])},clone:function(){return new g.LatLng(this.lat,this.lng,this.alt)}};g.latLng=function(k,j,l){if(k instanceof g.LatLng){return k}if(g.Util.isArray(k)&&typeof k[0]!=="object"){if(k.length===3){return new g.LatLng(k[0],k[1],k[2])}if(k.length===2){return new g.LatLng(k[0],k[1])}return null}if(k===b||k===null){return k}if(typeof k==="object"&&"lat" in k){return new g.LatLng(k.lat,"lng" in k?k.lng:k.lon,k.alt)}if(j===b){return null}return new g.LatLng(k,j,l)};g.LatLngBounds=function(n,l){if(!n){return}var k=l?[n,l]:n;for(var m=0,j=k.length;m<j;m++){this.extend(k[m])}};g.LatLngBounds.prototype={extend:function(n){var j=this._southWest,m=this._northEast,k,l;if(n instanceof g.LatLng){k=n;l=n}else{if(n instanceof g.LatLngBounds){k=n._southWest;l=n._northEast;if(!k||!l){return this}}else{return n?this.extend(g.latLng(n)||g.latLngBounds(n)):this}}if(!j&&!m){this._southWest=new g.LatLng(k.lat,k.lng);this._northEast=new g.LatLng(l.lat,l.lng)}else{j.lat=Math.min(k.lat,j.lat);j.lng=Math.min(k.lng,j.lng);m.lat=Math.max(l.lat,m.lat);m.lng=Math.max(l.lng,m.lng)}return this},pad:function(m){var k=this._southWest,n=this._northEast,j=Math.abs(k.lat-n.lat)*m,l=Math.abs(k.lng-n.lng)*m;return new g.LatLngBounds(new g.LatLng(k.lat-j,k.lng-l),new g.LatLng(n.lat+j,n.lng+l))},getCenter:function(){return new g.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new g.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new g.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){if(typeof n[0]==="number"||n instanceof g.LatLng){n=g.latLng(n)}else{n=g.latLngBounds(n)}var j=this._southWest,m=this._northEast,k,l;if(n instanceof g.LatLngBounds){k=n.getSouthWest();l=n.getNorthEast()}else{k=l=n}return(k.lat>=j.lat)&&(l.lat<=m.lat)&&(k.lng>=j.lng)&&(l.lng<=m.lng)},intersects:function(m){m=g.latLngBounds(m);var j=this._southWest,p=this._northEast,k=m.getSouthWest(),o=m.getNorthEast(),n=(o.lat>=j.lat)&&(k.lat<=p.lat),l=(o.lng>=j.lng)&&(k.lng<=p.lng);return n&&l},overlaps:function(n){n=g.latLngBounds(n);var j=this._southWest,p=this._northEast,k=n.getSouthWest(),o=n.getNorthEast(),m=(o.lat>j.lat)&&(k.lat<p.lat),l=(o.lng>j.lng)&&(k.lng<p.lng);return m&&l},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(j){if(!j){return false}j=g.latLngBounds(j);return this._southWest.equals(j.getSouthWest())&&this._northEast.equals(j.getNorthEast())},isValid:function(){return !!(this._southWest&&this._northEast)}};g.latLngBounds=function(k,j){if(k instanceof g.LatLngBounds){return k}return new g.LatLngBounds(k,j)};g.Projection={};g.Projection.LonLat={project:function(j){return new g.Point(j.lng,j.lat)},unproject:function(j){return new g.LatLng(j.y,j.x)},bounds:g.bounds([-180,-90],[180,90])};g.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(n){var m=Math.PI/180,j=this.MAX_LATITUDE,l=Math.max(Math.min(j,n.lat),-j),k=Math.sin(l*m);return new g.Point(this.R*n.lng*m,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(j){var k=180/Math.PI;return new g.LatLng((2*Math.atan(Math.exp(j.y/this.R))-(Math.PI/2))*k,j.x*k/this.R)},bounds:(function(){var j=6378137*Math.PI;return g.bounds([-j,-j],[j,j])})()};g.CRS={latLngToPoint:function(m,k){var j=this.projection.project(m),l=this.scale(k);return this.transformation._transform(j,l)},pointToLatLng:function(j,l){var m=this.scale(l),k=this.transformation.untransform(j,m);return this.projection.unproject(k)},project:function(j){return this.projection.project(j)},unproject:function(j){return this.projection.unproject(j)},scale:function(j){return 256*Math.pow(2,j)},zoom:function(j){return Math.log(j/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite){return null}var k=this.projection.bounds,m=this.scale(n),l=this.transformation.transform(k.min,m),j=this.transformation.transform(k.max,m);return g.bounds(l,j)},infinite:false,wrapLatLng:function(m){var j=this.wrapLng?g.Util.wrapNum(m.lng,this.wrapLng,true):m.lng,l=this.wrapLat?g.Util.wrapNum(m.lat,this.wrapLat,true):m.lat,k=m.alt;return g.latLng(l,j,k)}};g.CRS.Simple=g.extend({},g.CRS,{projection:g.Projection.LonLat,transformation:new g.Transformation(1,0,-1,0),scale:function(j){return Math.pow(2,j)},zoom:function(j){return Math.log(j)/Math.LN2},distance:function(j,m){var l=m.lng-j.lng,k=m.lat-j.lat;return Math.sqrt(l*l+k*k)},infinite:true});g.CRS.Earth=g.extend({},g.CRS,{wrapLng:[-180,180],R:6371000,distance:function(k,o){var j=Math.PI/180,n=k.lat*j,m=o.lat*j,l=Math.sin(n)*Math.sin(m)+Math.cos(n)*Math.cos(m)*Math.cos((o.lng-k.lng)*j);
    return this.R*Math.acos(Math.min(l,1))}});g.CRS.EPSG3857=g.extend({},g.CRS.Earth,{code:"EPSG:3857",projection:g.Projection.SphericalMercator,transformation:(function(){var j=0.5/(Math.PI*g.Projection.SphericalMercator.R);return new g.Transformation(j,0.5,-j,0.5)}())});g.CRS.EPSG900913=g.extend({},g.CRS.EPSG3857,{code:"EPSG:900913"});g.CRS.EPSG4326=g.extend({},g.CRS.Earth,{code:"EPSG:4326",projection:g.Projection.LonLat,transformation:new g.Transformation(1/180,1,-1/180,0.5)});g.Map=g.Evented.extend({options:{crs:g.CRS.EPSG3857,center:b,zoom:b,minZoom:b,maxZoom:b,layers:[],maxBounds:b,renderer:b,fadeAnimation:true,markerZoomAnimation:true,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:true},initialize:function(k,j){j=g.setOptions(this,j);this._initContainer(k);this._initLayout();this._onResize=g.bind(this._onResize,this);this._initEvents();if(j.maxBounds){this.setMaxBounds(j.maxBounds)}if(j.zoom!==b){this._zoom=this._limitZoom(j.zoom)}if(j.center&&j.zoom!==b){this.setView(g.latLng(j.center),j.zoom,{reset:true})}this._handlers=[];this._layers={};this._zoomBoundLayers={};this._sizeChanged=true;this.callInitHooks();this._addLayers(this.options.layers)},setView:function(j,k){k=k===b?this.getZoom():k;this._resetView(g.latLng(j),k);return this},setZoom:function(k,j){if(!this._loaded){this._zoom=k;return this}return this.setView(this.getCenter(),k,{zoom:j})},zoomIn:function(k,j){k=k||(g.Browser.any3d?this.options.zoomDelta:1);return this.setZoom(this._zoom+k,j)},zoomOut:function(k,j){k=k||(g.Browser.any3d?this.options.zoomDelta:1);return this.setZoom(this._zoom-k,j)},setZoomAround:function(q,o,n){var p=this.getZoomScale(o),m=this.getSize().divideBy(2),l=q instanceof g.Point?q:this.latLngToContainerPoint(q),j=l.subtract(m).multiplyBy(1-1/p),k=this.containerPointToLatLng(m.add(j));return this.setView(k,o,{zoom:n})},_getBoundsCenterZoom:function(k,r){r=r||{};k=k.getBounds?k.getBounds():g.latLngBounds(k);var m=g.point(r.paddingTopLeft||r.padding||[0,0]),l=g.point(r.paddingBottomRight||r.padding||[0,0]),q=this.getBoundsZoom(k,false,m.add(l));q=(typeof r.maxZoom==="number")?Math.min(r.maxZoom,q):q;var o=l.subtract(m).divideBy(2),p=this.project(k.getSouthWest(),q),n=this.project(k.getNorthEast(),q),j=this.unproject(p.add(n).divideBy(2).add(o),q);return{center:j,zoom:q}},fitBounds:function(k,j){k=g.latLngBounds(k);if(!k.isValid()){throw new Error("Bounds are not valid.")}var l=this._getBoundsCenterZoom(k,j);return this.setView(l.center,l.zoom,j)},fitWorld:function(j){return this.fitBounds([[-90,-180],[90,180]],j)},panTo:function(j,k){return this.setView(j,this._zoom,{pan:k})},panBy:function(j){this.fire("movestart");this._rawPanBy(g.point(j));this.fire("move");return this.fire("moveend")},setMaxBounds:function(j){j=g.latLngBounds(j);if(!j.isValid()){this.options.maxBounds=null;return this.off("moveend",this._panInsideMaxBounds)}else{if(this.options.maxBounds){this.off("moveend",this._panInsideMaxBounds)}}this.options.maxBounds=j;if(this._loaded){this._panInsideMaxBounds()}return this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(j){this.options.minZoom=j;if(this._loaded&&this.getZoom()<this.options.minZoom){return this.setZoom(j)}return this},setMaxZoom:function(j){this.options.maxZoom=j;if(this._loaded&&(this.getZoom()>this.options.maxZoom)){return this.setZoom(j)}return this},panInsideBounds:function(m,l){this._enforcingBounds=true;var j=this.getCenter(),k=this._limitCenter(j,this._zoom,g.latLngBounds(m));if(!j.equals(k)){this.panTo(k,l)}this._enforcingBounds=false;return this},invalidateSize:function(l){if(!this._loaded){return this}l=g.extend({animate:false,pan:true},l===true?{animate:true}:l);var m=this.getSize();this._sizeChanged=true;this._lastCenter=null;var k=this.getSize(),o=m.divideBy(2).round(),j=k.divideBy(2).round(),n=o.subtract(j);if(!n.x&&!n.y){return this}if(l.animate&&l.pan){this.panBy(n)}else{if(l.pan){this._rawPanBy(n)}this.fire("move");if(l.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(g.bind(this.fire,this,"moveend"),200)}else{this.fire("moveend")}}return this.fire("resize",{oldSize:m,newSize:k})},stop:function(){this.setZoom(this._limitZoom(this._zoom));if(!this.options.zoomSnap){this.fire("viewreset")}return this._stop()},addHandler:function(j,l){if(!l){return this}var k=this[j]=new l(this);this._handlers.push(k);if(this.options[j]){k.enable()}return this},remove:function(){this._initEvents(true);if(this._containerId!==this._container._leaflet_id){throw new Error("Map container is being reused by another instance")}try{delete this._container._leaflet_id;delete this._containerId}catch(k){this._container._leaflet_id=b;this._containerId=b}g.DomUtil.remove(this._mapPane);if(this._clearControlPos){this._clearControlPos()}this._clearHandlers();if(this._loaded){this.fire("unload")}for(var j in this._layers){this._layers[j].remove()}return this},createPane:function(k,j){var l="leaflet-pane"+(k?" leaflet-"+k.replace("Pane","")+"-pane":""),m=g.DomUtil.create("div",l,j||this._mapPane);
    if(k){this._panes[k]=m}return m},getCenter:function(){this._checkIfLoaded();if(this._lastCenter&&!this._moved()){return this._lastCenter}return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var k=this.getPixelBounds(),j=this.unproject(k.getBottomLeft()),l=this.unproject(k.getTopRight());return new g.LatLngBounds(j,l)},getMinZoom:function(){return this.options.minZoom===b?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===b?(this._layersMaxZoom===b?Infinity:this._layersMaxZoom):this.options.maxZoom},getBoundsZoom:function(j,m,r){j=g.latLngBounds(j);r=g.point(r||[0,0]);var s=this.getZoom()||0,n=this.getMinZoom(),q=this.getMaxZoom(),o=j.getNorthWest(),p=j.getSouthEast(),u=this.getSize().subtract(r),t=this.project(p,s).subtract(this.project(o,s)),l=g.Browser.any3d?this.options.zoomSnap:1;var k=Math.min(u.x/t.x,u.y/t.y);s=this.getScaleZoom(k,s);if(l){s=Math.round(s/(l/100))*(l/100);s=m?Math.ceil(s/l)*l:Math.floor(s/l)*l}return Math.max(n,Math.min(q,s))},getSize:function(){if(!this._size||this._sizeChanged){this._size=new g.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=false}return this._size.clone()},getPixelBounds:function(j,l){var k=this._getTopLeftPoint(j,l);return new g.Bounds(k,k.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._pixelOrigin},getPixelWorldBounds:function(j){return this.options.crs.getProjectedBounds(j===b?this.getZoom():j)},getPane:function(j){return typeof j==="string"?this._panes[j]:j},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(k,l){var j=this.options.crs;l=l===b?this._zoom:l;return j.scale(k)/j.scale(l)},getScaleZoom:function(m,l){var j=this.options.crs;l=l===b?this._zoom:l;var k=j.zoom(m*j.scale(l));return isNaN(k)?Infinity:k},project:function(k,j){j=j===b?this._zoom:j;return this.options.crs.latLngToPoint(g.latLng(k),j)},unproject:function(j,k){k=k===b?this._zoom:k;return this.options.crs.pointToLatLng(g.point(j),k)},layerPointToLatLng:function(j){var k=g.point(j).add(this.getPixelOrigin());return this.unproject(k)},latLngToLayerPoint:function(k){var j=this.project(g.latLng(k))._round();return j._subtract(this.getPixelOrigin())},wrapLatLng:function(j){return this.options.crs.wrapLatLng(g.latLng(j))},distance:function(j,k){return this.options.crs.distance(g.latLng(j),g.latLng(k))},containerPointToLayerPoint:function(j){return g.point(j).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(j){return g.point(j).add(this._getMapPanePos())},containerPointToLatLng:function(j){var k=this.containerPointToLayerPoint(g.point(j));return this.layerPointToLatLng(k)},latLngToContainerPoint:function(j){return this.layerPointToContainerPoint(this.latLngToLayerPoint(g.latLng(j)))},mouseEventToContainerPoint:function(j){return g.DomEvent.getMousePosition(j,this._container)},mouseEventToLayerPoint:function(j){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(j))},mouseEventToLatLng:function(j){return this.layerPointToLatLng(this.mouseEventToLayerPoint(j))},_initContainer:function(k){var j=this._container=g.DomUtil.get(k);if(!j){throw new Error("Map container not found.")}else{if(j._leaflet_id){throw new Error("Map container is already initialized.")}}g.DomEvent.addListener(j,"scroll",this._onScroll,this);this._containerId=g.Util.stamp(j)},_initLayout:function(){var k=this._container;this._fadeAnimated=this.options.fadeAnimation&&g.Browser.any3d;g.DomUtil.addClass(k,"leaflet-container"+(g.Browser.touch?" leaflet-touch":"")+(g.Browser.retina?" leaflet-retina":"")+(g.Browser.ielt9?" leaflet-oldie":"")+(g.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var j=g.DomUtil.getStyle(k,"position");if(j!=="absolute"&&j!=="relative"&&j!=="fixed"){k.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var j=this._panes={};this._paneRenderers={};this._mapPane=this.createPane("mapPane",this._container);g.DomUtil.setPosition(this._mapPane,new g.Point(0,0));this.createPane("tilePane");this.createPane("shadowPane");this.createPane("overlayPane");this.createPane("markerPane");this.createPane("tooltipPane");this.createPane("popupPane");if(!this.options.markerZoomAnimation){g.DomUtil.addClass(j.markerPane,"leaflet-zoom-hide");g.DomUtil.addClass(j.shadowPane,"leaflet-zoom-hide")}},_resetView:function(k,l){g.DomUtil.setPosition(this._mapPane,new g.Point(0,0));var m=!this._loaded;this._loaded=true;l=this._limitZoom(l);this.fire("viewprereset");var j=this._zoom!==l;this._moveStart(j)._move(k,l)._moveEnd(j);this.fire("viewreset");if(m){this.fire("load")}},_moveStart:function(j){if(j){this.fire("zoomstart")}return this.fire("movestart")},_move:function(k,l,m){if(l===b){l=this._zoom}var j=this._zoom!==l;this._zoom=l;this._lastCenter=k;this._pixelOrigin=this._getNewPixelOrigin(k);
    if(j||(m&&m.pinch)){this.fire("zoom",m)}return this.fire("move",m)},_moveEnd:function(j){if(j){this.fire("zoomend")}return this.fire("moveend")},_stop:function(){g.Util.cancelAnimFrame(this._flyToFrame);if(this._panAnim){this._panAnim.stop()}return this},_rawPanBy:function(j){g.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(j))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){if(!this._enforcingBounds){this.panInsideBounds(this.options.maxBounds)}},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(k){if(!g.DomEvent){return}this._targets={};this._targets[g.stamp(this._container)]=this;var j=k?"off":"on";g.DomEvent[j](this._container,"click dblclick mousedown mouseup "+"mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this);if(this.options.trackResize){g.DomEvent[j](d,"resize",this._onResize,this)}if(g.Browser.any3d&&this.options.transform3DLimit){this[j]("moveend",this._onMoveEnd)}},_onResize:function(){g.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=g.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:true})},this)},_onScroll:function(){this._container.scrollTop=0;this._container.scrollLeft=0},_onMoveEnd:function(){var j=this._getMapPanePos();if(Math.max(Math.abs(j.x),Math.abs(j.y))>=this.options.transform3DLimit){this._resetView(this.getCenter(),this.getZoom())}},_findEventTargets:function(o,k){var j=[],n,m=k==="mouseout"||k==="mouseover",p=o.target||o.srcElement,l=false;while(p){n=this._targets[g.stamp(p)];if(n&&(k==="click"||k==="preclick")&&!o._simulated&&this._draggableMoved(n)){l=true;break}if(n&&n.listens(k,true)){if(m&&!g.DomEvent._isExternalTarget(p,o)){break}j.push(n);if(m){break}}if(p===this._container){break}p=p.parentNode}if(!j.length&&!l&&!m&&g.DomEvent._isExternalTarget(p,o)){j=[this]}return j},_handleDOMEvent:function(k){if(!this._loaded||g.DomEvent._skipped(k)){return}var j=k.type==="keypress"&&k.keyCode===13?"click":k.type;if(j==="mousedown"){g.DomUtil.preventOutline(k.target||k.srcElement)}this._fireDOMEvent(k,j)},_fireDOMEvent:function(p,m,j){if(p.type==="click"){var k=g.Util.extend({},p);k.type="preclick";this._fireDOMEvent(k,k.type,j)}if(p._stopped){return}j=(j||[]).concat(this._findEventTargets(p,m));if(!j.length){return}var o=j[0];if(m==="contextmenu"&&o.listens(m,true)){g.DomEvent.preventDefault(p)}var n={originalEvent:p};if(p.type!=="keypress"){var q=o instanceof g.Marker;n.containerPoint=q?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(p);n.layerPoint=this.containerPointToLayerPoint(n.containerPoint);n.latlng=q?o.getLatLng():this.layerPointToLatLng(n.layerPoint)}for(var l=0;l<j.length;l++){j[l].fire(m,n,true);if(n.originalEvent._stopped||(j[l].options.nonBubblingEvents&&g.Util.indexOf(j[l].options.nonBubblingEvents,m)!==-1)){return}}},_draggableMoved:function(j){j=j.dragging&&j.dragging.enabled()?j:this;return(j.dragging&&j.dragging.moved())||(this.boxZoom&&this.boxZoom.moved())},_clearHandlers:function(){for(var k=0,j=this._handlers.length;k<j;k++){this._handlers[k].disable()}},whenReady:function(k,j){if(this._loaded){k.call(j||this,{target:this})}else{this.on("load",k,j)}return this},_getMapPanePos:function(){return g.DomUtil.getPosition(this._mapPane)||new g.Point(0,0)},_moved:function(){var j=this._getMapPanePos();return j&&!j.equals([0,0])},_getTopLeftPoint:function(j,l){var k=j&&l!==b?this._getNewPixelOrigin(j,l):this.getPixelOrigin();return k.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(j,l){var k=this.getSize()._divideBy(2);return this.project(j,l)._subtract(k)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(m,l,j){var k=this._getNewPixelOrigin(j,l);return this.project(m,l)._subtract(k)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(j){return this.latLngToLayerPoint(j).subtract(this._getCenterLayerPoint())},_limitCenter:function(j,m,l){if(!l){return j}var p=this.project(j,m),k=this.getSize().divideBy(2),n=new g.Bounds(p.subtract(k),p.add(k)),o=this._getBoundsOffset(n,l,m);if(o.round().equals([0,0])){return j}return this.unproject(p.add(o),m)},_limitOffset:function(m,j){if(!j){return m}var l=this.getPixelBounds(),k=new g.Bounds(l.min.add(m),l.max.add(m));return m.add(this._getBoundsOffset(k,j))},_getBoundsOffset:function(o,l,p){var k=g.bounds(this.project(l.getNorthEast(),p),this.project(l.getSouthWest(),p)),q=k.min.subtract(o.min),n=k.max.subtract(o.max),m=this._rebound(q.x,-n.x),j=this._rebound(q.y,-n.y);return new g.Point(m,j)},_rebound:function(k,j){return k+j>0?Math.round(k-j)/2:Math.max(0,Math.ceil(k))-Math.max(0,Math.floor(j))},_limitZoom:function(m){var l=this.getMinZoom(),k=this.getMaxZoom(),j=g.Browser.any3d?this.options.zoomSnap:1;if(j){m=Math.round(m/j)*j}return Math.max(l,Math.min(k,m))}});g.map=function(k,j){return new g.Map(k,j)
};g.Layer=g.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[]},addTo:function(j){j.addLayer(this);return this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(j){if(j){j.removeLayer(this)}return this},getPane:function(j){return this._map.getPane(j?(this.options[j]||j):this.options.pane)},addInteractiveTarget:function(j){this._map._targets[g.stamp(j)]=this;return this},removeInteractiveTarget:function(j){delete this._map._targets[g.stamp(j)];return this},_layerAdd:function(l){var k=l.target;if(!k.hasLayer(this)){return}this._map=k;this._zoomAnimated=k._zoomAnimated;if(this.getEvents){var j=this.getEvents();k.on(j,this);this.once("remove",function(){k.off(j,this)},this)}this.onAdd(k);if(this.getAttribution&&this._map.attributionControl){this._map.attributionControl.addAttribution(this.getAttribution())}this.fire("add");k.fire("layeradd",{layer:this})}});g.Map.include({addLayer:function(j){var k=g.stamp(j);if(this._layers[k]){return this}this._layers[k]=j;j._mapToAdd=this;if(j.beforeAdd){j.beforeAdd(this)}this.whenReady(j._layerAdd,j);return this},removeLayer:function(j){var k=g.stamp(j);if(!this._layers[k]){return this}if(this._loaded){j.onRemove(this)}if(j.getAttribution&&this.attributionControl){this.attributionControl.removeAttribution(j.getAttribution())}delete this._layers[k];if(this._loaded){this.fire("layerremove",{layer:j});j.fire("remove")}j._map=j._mapToAdd=null;return this},hasLayer:function(j){return !!j&&(g.stamp(j) in this._layers)},eachLayer:function(l,k){for(var j in this._layers){l.call(k,this._layers[j])}return this},_addLayers:function(l){l=l?(g.Util.isArray(l)?l:[l]):[];for(var k=0,j=l.length;k<j;k++){this.addLayer(l[k])}},_addZoomLimit:function(j){if(isNaN(j.options.maxZoom)||!isNaN(j.options.minZoom)){this._zoomBoundLayers[g.stamp(j)]=j;this._updateZoomLevels()}},_removeZoomLimit:function(j){var k=g.stamp(j);if(this._zoomBoundLayers[k]){delete this._zoomBoundLayers[k];this._updateZoomLevels()}},_updateZoomLevels:function(){var n=Infinity,j=-Infinity,m=this._getZoomSpan();for(var l in this._zoomBoundLayers){var k=this._zoomBoundLayers[l].options;n=k.minZoom===b?n:Math.min(n,k.minZoom);j=k.maxZoom===b?j:Math.max(j,k.maxZoom)}this._layersMaxZoom=j===-Infinity?b:j;this._layersMinZoom=n===Infinity?b:n;if(m!==this._getZoomSpan()){this.fire("zoomlevelschange")}}});g.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:g.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(q){var o=Math.PI/180,m=this.R,p=q.lat*o,k=this.R_MINOR/m,n=Math.sqrt(1-k*k),j=n*Math.sin(p);var l=Math.tan(Math.PI/4-p/2)/Math.pow((1-j)/(1+j),n/2);p=-m*Math.log(Math.max(l,1e-10));return new g.Point(q.lng*o*m,p)},unproject:function(t){var q=180/Math.PI,j=this.R,l=this.R_MINOR/j,o=Math.sqrt(1-l*l),s=Math.exp(-t.y/j),p=Math.PI/2-2*Math.atan(s);for(var m=0,n=0.1,k;m<15&&Math.abs(n)>1e-7;m++){k=o*Math.sin(p);k=Math.pow((1-k)/(1+k),o/2);n=Math.PI/2-2*Math.atan(s*k)-p;p+=n}return new g.LatLng(p*q,t.x*q/j)}};g.CRS.EPSG3395=g.extend({},g.CRS.Earth,{code:"EPSG:3395",projection:g.Projection.Mercator,transformation:(function(){var j=0.5/(Math.PI*g.Projection.Mercator.R);return new g.Transformation(j,0.5,-j,0.5)}())});g.GridLayer=g.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:g.Browser.mobile,updateWhenZooming:true,updateInterval:200,attribution:null,zIndex:1,bounds:null,minZoom:0,maxZoom:b,noWrap:false,pane:"tilePane",className:"",keepBuffer:2},initialize:function(j){g.setOptions(this,j)},onAdd:function(){this._initContainer();this._levels={};this._tiles={};this._resetView();this._update()},beforeAdd:function(j){j._addZoomLimit(this)},onRemove:function(j){this._removeAllTiles();g.DomUtil.remove(this._container);j._removeZoomLimit(this);this._container=null;this._tileZoom=null},bringToFront:function(){if(this._map){g.DomUtil.toFront(this._container);this._setAutoZIndex(Math.max)}return this},bringToBack:function(){if(this._map){g.DomUtil.toBack(this._container);this._setAutoZIndex(Math.min)}return this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(j){this.options.opacity=j;this._updateOpacity();return this},setZIndex:function(j){this.options.zIndex=j;this._updateZIndex();return this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();this._update()}return this},getEvents:function(){var j={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};if(!this.options.updateWhenIdle){if(!this._onMove){this._onMove=g.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)}j.move=this._onMove}if(this._zoomAnimated){j.zoomanim=this._animateZoom}return j},createTile:function(){return f.createElement("div")},getTileSize:function(){var j=this.options.tileSize;return j instanceof g.Point?j:new g.Point(j,j)},_updateZIndex:function(){if(this._container&&this.options.zIndex!==b&&this.options.zIndex!==null){this._container.style.zIndex=this.options.zIndex
}},_setAutoZIndex:function(m){var n=this.getPane().children,l=-m(-Infinity,Infinity);for(var k=0,j=n.length,o;k<j;k++){o=n[k].style.zIndex;if(n[k]!==this._container&&o){l=m(l,+o)}}if(isFinite(l)){this.options.zIndex=l+m(-1,1);this._updateZIndex()}},_updateOpacity:function(){if(!this._map){return}if(g.Browser.ielt9){return}g.DomUtil.setOpacity(this._container,this.options.opacity);var j=+new Date(),m=false,o=false;for(var k in this._tiles){var l=this._tiles[k];if(!l.current||!l.loaded){continue}var n=Math.min(1,(j-l.loaded)/200);g.DomUtil.setOpacity(l.el,n);if(n<1){m=true}else{if(l.active){o=true}l.active=true}}if(o&&!this._noPrune){this._pruneTiles()}if(m){g.Util.cancelAnimFrame(this._fadeFrame);this._fadeFrame=g.Util.requestAnimFrame(this._updateOpacity,this)}},_initContainer:function(){if(this._container){return}this._container=g.DomUtil.create("div","leaflet-layer "+(this.options.className||""));this._updateZIndex();if(this.options.opacity<1){this._updateOpacity()}this.getPane().appendChild(this._container)},_updateLevels:function(){var k=this._tileZoom,j=this.options.maxZoom;if(k===b){return b}for(var m in this._levels){if(this._levels[m].el.children.length||m===k){this._levels[m].el.style.zIndex=j-Math.abs(k-m)}else{g.DomUtil.remove(this._levels[m].el);this._removeTilesAtZoom(m);delete this._levels[m]}}var n=this._levels[k],l=this._map;if(!n){n=this._levels[k]={};n.el=g.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container);n.el.style.zIndex=j;n.origin=l.project(l.unproject(l.getPixelOrigin()),k).round();n.zoom=k;this._setZoomTransform(n,l.getCenter(),l.getZoom());g.Util.falseFn(n.el.offsetWidth)}this._level=n;return n},_pruneTiles:function(){if(!this._map){return}var j,l;var k=this._map.getZoom();if(k>this.options.maxZoom||k<this.options.minZoom){this._removeAllTiles();return}for(j in this._tiles){l=this._tiles[j];l.retain=l.current}for(j in this._tiles){l=this._tiles[j];if(l.current&&!l.active){var m=l.coords;if(!this._retainParent(m.x,m.y,m.z,m.z-5)){this._retainChildren(m.x,m.y,m.z,m.z+2)}}}for(j in this._tiles){if(!this._tiles[j].retain){this._removeTile(j)}}},_removeTilesAtZoom:function(k){for(var j in this._tiles){if(this._tiles[j].coords.z!==k){continue}this._removeTile(j)}},_removeAllTiles:function(){for(var j in this._tiles){this._removeTile(j)}},_invalidateAll:function(){for(var j in this._levels){g.DomUtil.remove(this._levels[j].el);delete this._levels[j]}this._removeAllTiles();this._tileZoom=null},_retainParent:function(q,o,n,j){var k=Math.floor(q/2),p=Math.floor(o/2),l=n-1,s=new g.Point(+k,+p);s.z=+l;var r=this._tileCoordsToKey(s),m=this._tiles[r];if(m&&m.active){m.retain=true;return true}else{if(m&&m.loaded){m.retain=true}}if(l>j){return this._retainParent(k,p,l,j)}return false},_retainChildren:function(r,o,n,q){for(var l=2*r;l<2*r+2;l++){for(var k=2*o;k<2*o+2;k++){var p=new g.Point(l,k);p.z=n+1;var s=this._tileCoordsToKey(p),m=this._tiles[s];if(m&&m.active){m.retain=true;continue}else{if(m&&m.loaded){m.retain=true}}if(n+1<q){this._retainChildren(l,k,n+1,q)}}}},_resetView:function(k){var j=k&&(k.pinch||k.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),j,j)},_animateZoom:function(j){this._setView(j.center,j.zoom,true,j.noUpdate)},_setView:function(k,m,j,l){var o=Math.round(m);if((this.options.maxZoom!==b&&o>this.options.maxZoom)||(this.options.minZoom!==b&&o<this.options.minZoom)){o=b}var n=this.options.updateWhenZooming&&(o!==this._tileZoom);if(!l||n){this._tileZoom=o;if(this._abortLoading){this._abortLoading()}this._updateLevels();this._resetGrid();if(o!==b){this._update(k)}if(!j){this._pruneTiles()}this._noPrune=!!j}this._setZoomTransforms(k,m)},_setZoomTransforms:function(j,l){for(var k in this._levels){this._setZoomTransform(this._levels[k],j,l)}},_setZoomTransform:function(n,j,k){var m=this._map.getZoomScale(k,n.zoom),l=n.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(j,k)).round();if(g.Browser.any3d){g.DomUtil.setTransform(n.el,l,m)}else{g.DomUtil.setPosition(n.el,l)}},_resetGrid:function(){var m=this._map,j=m.options.crs,l=this._tileSize=this.getTileSize(),n=this._tileZoom;var k=this._map.getPixelWorldBounds(this._tileZoom);if(k){this._globalTileRange=this._pxBoundsToTileRange(k)}this._wrapX=j.wrapLng&&!this.options.noWrap&&[Math.floor(m.project([0,j.wrapLng[0]],n).x/l.x),Math.ceil(m.project([0,j.wrapLng[1]],n).x/l.y)];this._wrapY=j.wrapLat&&!this.options.noWrap&&[Math.floor(m.project([j.wrapLat[0],0],n).y/l.x),Math.ceil(m.project([j.wrapLat[1],0],n).y/l.y)]},_onMoveEnd:function(){if(!this._map||this._map._animatingZoom){return}this._update()},_getTiledPixelBounds:function(j){var n=this._map,m=n._animatingZoom?Math.max(n._animateToZoom,n.getZoom()):n.getZoom(),o=n.getZoomScale(m,this._tileZoom),l=n.project(j,this._tileZoom).floor(),k=n.getSize().divideBy(o*2);return new g.Bounds(l.subtract(k),l.add(k))},_update:function(k){var l=this._map;if(!l){return}var z=l.getZoom();if(k===b){k=l.getCenter()}if(this._tileZoom===b){return}var q=this._getTiledPixelBounds(k),m=this._pxBoundsToTileRange(q),w=m.getCenter(),s=[],n=this.options.keepBuffer,r=new g.Bounds(m.getBottomLeft().subtract([n,-n]),m.getTopRight().add([n,-n]));
    for(var y in this._tiles){var v=this._tiles[y].coords;if(v.z!==this._tileZoom||!r.contains(g.point(v.x,v.y))){this._tiles[y].current=false}}if(Math.abs(z-this._tileZoom)>1){this._setView(k,z);return}for(var o=m.min.y;o<=m.max.y;o++){for(var p=m.min.x;p<=m.max.x;p++){var x=new g.Point(p,o);x.z=this._tileZoom;if(!this._isValidTile(x)){continue}var u=this._tiles[this._tileCoordsToKey(x)];if(u){u.current=true}else{s.push(x)}}}s.sort(function(A,j){return A.distanceTo(w)-j.distanceTo(w)});if(s.length!==0){if(!this._loading){this._loading=true;this.fire("loading")}var t=f.createDocumentFragment();for(p=0;p<s.length;p++){this._addTile(s[p],t)}this._level.el.appendChild(t)}},_isValidTile:function(l){var j=this._map.options.crs;if(!j.infinite){var k=this._globalTileRange;if((!j.wrapLng&&(l.x<k.min.x||l.x>k.max.x))||(!j.wrapLat&&(l.y<k.min.y||l.y>k.max.y))){return false}}if(!this.options.bounds){return true}var m=this._tileCoordsToBounds(l);return g.latLngBounds(this.options.bounds).overlaps(m)},_keyToBounds:function(j){return this._tileCoordsToBounds(this._keyToTileCoords(j))},_tileCoordsToBounds:function(o){var p=this._map,n=this.getTileSize(),l=o.scaleBy(n),j=l.add(n),k=p.unproject(l,o.z),m=p.unproject(j,o.z);if(!this.options.noWrap){k=p.wrapLatLng(k);m=p.wrapLatLng(m)}return new g.LatLngBounds(k,m)},_tileCoordsToKey:function(j){return j.x+":"+j.y+":"+j.z},_keyToTileCoords:function(l){var j=l.split(":"),m=new g.Point(+j[0],+j[1]);m.z=+j[2];return m},_removeTile:function(j){var k=this._tiles[j];if(!k){return}g.DomUtil.remove(k.el);delete this._tiles[j];this.fire("tileunload",{tile:k.el,coords:this._keyToTileCoords(j)})},_initTile:function(j){g.DomUtil.addClass(j,"leaflet-tile");var k=this.getTileSize();j.style.width=k.x+"px";j.style.height=k.y+"px";j.onselectstart=g.Util.falseFn;j.onmousemove=g.Util.falseFn;if(g.Browser.ielt9&&this.options.opacity<1){g.DomUtil.setOpacity(j,this.options.opacity)}if(g.Browser.android&&!g.Browser.android23){j.style.WebkitBackfaceVisibility="hidden"}},_addTile:function(n,j){var l=this._getTilePos(n),k=this._tileCoordsToKey(n);var m=this.createTile(this._wrapCoords(n),g.bind(this._tileReady,this,n));this._initTile(m);if(this.createTile.length<2){g.Util.requestAnimFrame(g.bind(this._tileReady,this,n,null,m))}g.DomUtil.setPosition(m,l);this._tiles[k]={el:m,coords:n,current:true};j.appendChild(m);this.fire("tileloadstart",{tile:m,coords:n})},_tileReady:function(m,l,k){if(!this._map){return}if(l){this.fire("tileerror",{error:l,tile:k,coords:m})}var j=this._tileCoordsToKey(m);k=this._tiles[j];if(!k){return}k.loaded=+new Date();if(this._map._fadeAnimated){g.DomUtil.setOpacity(k.el,0);g.Util.cancelAnimFrame(this._fadeFrame);this._fadeFrame=g.Util.requestAnimFrame(this._updateOpacity,this)}else{k.active=true;this._pruneTiles()}if(!l){g.DomUtil.addClass(k.el,"leaflet-tile-loaded");this.fire("tileload",{tile:k.el,coords:m})}if(this._noTilesToLoad()){this._loading=false;this.fire("load");if(g.Browser.ielt9||!this._map._fadeAnimated){g.Util.requestAnimFrame(this._pruneTiles,this)}else{setTimeout(g.bind(this._pruneTiles,this),250)}}},_getTilePos:function(j){return j.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(j){var k=new g.Point(this._wrapX?g.Util.wrapNum(j.x,this._wrapX):j.x,this._wrapY?g.Util.wrapNum(j.y,this._wrapY):j.y);k.z=j.z;return k},_pxBoundsToTileRange:function(j){var k=this.getTileSize();return new g.Bounds(j.min.unscaleBy(k).floor(),j.max.unscaleBy(k).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var j in this._tiles){if(!this._tiles[j].loaded){return false}}return true}});g.gridLayer=function(j){return new g.GridLayer(j)};g.TileLayer=g.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:false,zoomReverse:false,detectRetina:false,crossOrigin:false},initialize:function(k,j){this._url=k;j=g.setOptions(this,j);if(j.detectRetina&&g.Browser.retina&&j.maxZoom>0){j.tileSize=Math.floor(j.tileSize/2);if(!j.zoomReverse){j.zoomOffset++;j.maxZoom--}else{j.zoomOffset--;j.minZoom++}j.minZoom=Math.max(0,j.minZoom)}if(typeof j.subdomains==="string"){j.subdomains=j.subdomains.split("")}if(!g.Browser.android){this.on("tileunload",this._onTileRemove)}},setUrl:function(j,k){this._url=j;if(!k){this.redraw()}return this},createTile:function(l,j){var k=f.createElement("img");g.DomEvent.on(k,"load",g.bind(this._tileOnLoad,this,j,k));g.DomEvent.on(k,"error",g.bind(this._tileOnError,this,j,k));if(this.options.crossOrigin){k.crossOrigin=""}k.alt="";k.src=this.getTileUrl(l);return k},getTileUrl:function(k){var j={r:g.Browser.retina?"@2x":"",s:this._getSubdomain(k),x:k.x,y:k.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-k.y;if(this.options.tms){j["y"]=l}j["-y"]=l}return g.Util.template(this._url,g.extend(j,this.options))},_tileOnLoad:function(j,k){if(g.Browser.ielt9){setTimeout(g.bind(j,this,null,k),0)}else{j(null,k)}},_tileOnError:function(k,l,m){var j=this.options.errorTileUrl;
    if(j){l.src=j}k(m,l)},getTileSize:function(){var m=this._map,l=g.GridLayer.prototype.getTileSize.call(this),k=this._tileZoom+this.options.zoomOffset,j=this.options.maxNativeZoom;return j!==null&&k>j?l.divideBy(m.getZoomScale(j,k)).round():l},_onTileRemove:function(j){j.tile.onload=null},_getZoomForUrl:function(){var j=this.options,k=this._tileZoom;if(j.zoomReverse){k=j.maxZoom-k}k+=j.zoomOffset;return j.maxNativeZoom!==null?Math.min(k,j.maxNativeZoom):k},_getSubdomain:function(k){var j=Math.abs(k.x+k.y)%this.options.subdomains.length;return this.options.subdomains[j]},_abortLoading:function(){var j,k;for(j in this._tiles){if(this._tiles[j].coords.z!==this._tileZoom){k=this._tiles[j].el;k.onload=g.Util.falseFn;k.onerror=g.Util.falseFn;if(!k.complete){k.src=g.Util.emptyImageUrl;g.DomUtil.remove(k)}}}}});g.tileLayer=function(k,j){return new g.TileLayer(k,j)};g.TileLayer.WMS=g.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:false,version:"1.1.1"},options:{crs:null,uppercase:false},initialize:function(l,k){this._url=l;var j=g.extend({},this.defaultWmsParams);for(var m in k){if(!(m in this.options)){j[m]=k[m]}}k=g.setOptions(this,k);j.width=j.height=k.tileSize*(k.detectRetina&&g.Browser.retina?2:1);this.wmsParams=j},onAdd:function(j){this._crs=this.options.crs||j.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var k=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[k]=this._crs.code;g.TileLayer.prototype.onAdd.call(this,j)},getTileUrl:function(m){var n=this._tileCoordsToBounds(m),j=this._crs.project(n.getNorthWest()),l=this._crs.project(n.getSouthEast()),o=(this._wmsVersion>=1.3&&this._crs===g.CRS.EPSG4326?[l.y,j.x,j.y,l.x]:[j.x,l.y,l.x,j.y]).join(","),k=g.TileLayer.prototype.getTileUrl.call(this,m);return k+g.Util.getParamString(this.wmsParams,k,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(k,j){g.extend(this.wmsParams,k);if(!j){this.redraw()}return this}});g.tileLayer.wms=function(k,j){return new g.TileLayer.WMS(k,j)};g.ImageOverlay=g.Layer.extend({options:{opacity:1,alt:"",interactive:false,attribution:null,crossOrigin:false},initialize:function(k,l,j){this._url=k;this._bounds=g.latLngBounds(l);g.setOptions(this,j)},onAdd:function(){if(!this._image){this._initImage();if(this.options.opacity<1){this._updateOpacity()}}if(this.options.interactive){g.DomUtil.addClass(this._image,"leaflet-interactive");this.addInteractiveTarget(this._image)}this.getPane().appendChild(this._image);this._reset()},onRemove:function(){g.DomUtil.remove(this._image);if(this.options.interactive){this.removeInteractiveTarget(this._image)}},setOpacity:function(j){this.options.opacity=j;if(this._image){this._updateOpacity()}return this},setStyle:function(j){if(j.opacity){this.setOpacity(j.opacity)}return this},bringToFront:function(){if(this._map){g.DomUtil.toFront(this._image)}return this},bringToBack:function(){if(this._map){g.DomUtil.toBack(this._image)}return this},setUrl:function(j){this._url=j;if(this._image){this._image.src=j}return this},setBounds:function(j){this._bounds=j;if(this._map){this._reset()}return this},getAttribution:function(){return this.options.attribution},getEvents:function(){var j={zoom:this._reset,viewreset:this._reset};if(this._zoomAnimated){j.zoomanim=this._animateZoom}return j},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var j=this._image=g.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));j.onselectstart=g.Util.falseFn;j.onmousemove=g.Util.falseFn;j.onload=g.bind(this.fire,this,"load");if(this.options.crossOrigin){j.crossOrigin=""}j.src=this._url;j.alt=this.options.alt},_animateZoom:function(j){var l=this._map.getZoomScale(j.zoom),k=this._map._latLngToNewLayerPoint(this._bounds.getNorthWest(),j.zoom,j.center);g.DomUtil.setTransform(this._image,k,l)},_reset:function(){var l=this._image,k=new g.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),j=k.getSize();g.DomUtil.setPosition(l,k.min);l.style.width=j.x+"px";l.style.height=j.y+"px"},_updateOpacity:function(){g.DomUtil.setOpacity(this._image,this.options.opacity)}});g.imageOverlay=function(k,l,j){return new g.ImageOverlay(k,l,j)};g.Icon=g.Class.extend({initialize:function(j){g.setOptions(this,j)},createIcon:function(j){return this._createIcon("icon",j)},createShadow:function(j){return this._createIcon("shadow",j)},_createIcon:function(k,l){var m=this._getIconUrl(k);if(!m){if(k==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var j=this._createImg(m,l&&l.tagName==="IMG"?l:null);this._setIconStyles(j,k);return j},_setIconStyles:function(k,n){var m=this.options;var j=m[n+"Size"];if(typeof j==="number"){j=[j,j]}var o=g.point(j),l=g.point(n==="shadow"&&m.shadowAnchor||m.iconAnchor||o&&o.divideBy(2,true));k.className="leaflet-marker-"+n+" "+(m.className||"");
    if(l){k.style.marginLeft=(-l.x)+"px";k.style.marginTop=(-l.y)+"px"}if(o){k.style.width=o.x+"px";k.style.height=o.y+"px"}},_createImg:function(k,j){j=j||f.createElement("img");j.src=k;return j},_getIconUrl:function(j){return g.Browser.retina&&this.options[j+"RetinaUrl"]||this.options[j+"Url"]}});g.icon=function(j){return new g.Icon(j)};g.Icon.Default=g.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(j){if(!g.Icon.Default.imagePath){g.Icon.Default.imagePath=this._detectIconPath()}return(this.options.imagePath||g.Icon.Default.imagePath)+g.Icon.prototype._getIconUrl.call(this,j)},_detectIconPath:function(){var j=g.DomUtil.create("div","leaflet-default-icon-path",f.body);var k=g.DomUtil.getStyle(j,"background-image")||g.DomUtil.getStyle(j,"backgroundImage");f.body.removeChild(j);return k.indexOf("url")===0?k.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}});g.Marker=g.Layer.extend({options:{icon:new g.Icon.Default(),interactive:true,draggable:false,keyboard:true,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(k,j){g.setOptions(this,j);this._latlng=g.latLng(k)},onAdd:function(j){this._zoomAnimated=this._zoomAnimated&&j.options.markerZoomAnimation;if(this._zoomAnimated){j.on("zoomanim",this._animateZoom,this)}this._initIcon();this.update()},onRemove:function(j){if(this.dragging&&this.dragging.enabled()){this.options.draggable=true;this.dragging.removeHooks()}if(this._zoomAnimated){j.off("zoomanim",this._animateZoom,this)}this._removeIcon();this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(k){var j=this._latlng;this._latlng=g.latLng(k);this.update();return this.fire("move",{oldLatLng:j,latlng:this._latlng})},setZIndexOffset:function(j){this.options.zIndexOffset=j;return this.update()},setIcon:function(j){this.options.icon=j;if(this._map){this._initIcon();this.update()}if(this._popup){this.bindPopup(this._popup,this._popup.options)}return this},getElement:function(){return this._icon},update:function(){if(this._icon){var j=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(j)}return this},_initIcon:function(){var k=this.options,m="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");var l=k.icon.createIcon(this._icon),n=false;if(l!==this._icon){if(this._icon){this._removeIcon()}n=true;if(k.title){l.title=k.title}if(k.alt){l.alt=k.alt}}g.DomUtil.addClass(l,m);if(k.keyboard){l.tabIndex="0"}this._icon=l;if(k.riseOnHover){this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex})}var j=k.icon.createShadow(this._shadow),o=false;if(j!==this._shadow){this._removeShadow();o=true}if(j){g.DomUtil.addClass(j,m)}this._shadow=j;if(k.opacity<1){this._updateOpacity()}if(n){this.getPane().appendChild(this._icon)}this._initInteraction();if(j&&o){this.getPane("shadowPane").appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex})}g.DomUtil.remove(this._icon);this.removeInteractiveTarget(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){g.DomUtil.remove(this._shadow)}this._shadow=null},_setPos:function(j){g.DomUtil.setPosition(this._icon,j);if(this._shadow){g.DomUtil.setPosition(this._shadow,j)}this._zIndex=j.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(j){this._icon.style.zIndex=this._zIndex+j},_animateZoom:function(j){var k=this._map._latLngToNewLayerPoint(this._latlng,j.zoom,j.center).round();this._setPos(k)},_initInteraction:function(){if(!this.options.interactive){return}g.DomUtil.addClass(this._icon,"leaflet-interactive");this.addInteractiveTarget(this._icon);if(g.Handler.MarkerDrag){var j=this.options.draggable;if(this.dragging){j=this.dragging.enabled();this.dragging.disable()}this.dragging=new g.Handler.MarkerDrag(this);if(j){this.dragging.enable()}}},setOpacity:function(j){this.options.opacity=j;if(this._map){this._updateOpacity()}return this},_updateOpacity:function(){var j=this.options.opacity;g.DomUtil.setOpacity(this._icon,j);if(this._shadow){g.DomUtil.setOpacity(this._shadow,j)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});g.marker=function(k,j){return new g.Marker(k,j)};g.DivIcon=g.Icon.extend({options:{iconSize:[12,12],html:false,bgPos:null,className:"leaflet-div-icon"},createIcon:function(k){var m=(k&&k.tagName==="DIV")?k:f.createElement("div"),j=this.options;m.innerHTML=j.html!==false?j.html:"";if(j.bgPos){var l=g.point(j.bgPos);m.style.backgroundPosition=(-l.x)+"px "+(-l.y)+"px"}this._setIconStyles(m,"icon");return m},createShadow:function(){return null
}});g.divIcon=function(j){return new g.DivIcon(j)};g.DivOverlay=g.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(j,k){g.setOptions(this,j);this._source=k},onAdd:function(j){this._zoomAnimated=j._zoomAnimated;if(!this._container){this._initLayout()}if(j._fadeAnimated){g.DomUtil.setOpacity(this._container,0)}clearTimeout(this._removeTimeout);this.getPane().appendChild(this._container);this.update();if(j._fadeAnimated){g.DomUtil.setOpacity(this._container,1)}this.bringToFront()},onRemove:function(j){if(j._fadeAnimated){g.DomUtil.setOpacity(this._container,0);this._removeTimeout=setTimeout(g.bind(g.DomUtil.remove,g.DomUtil,this._container),200)}else{g.DomUtil.remove(this._container)}},getLatLng:function(){return this._latlng},setLatLng:function(j){this._latlng=g.latLng(j);if(this._map){this._updatePosition();this._adjustPan()}return this},getContent:function(){return this._content},setContent:function(j){this._content=j;this.update();return this},getElement:function(){return this._container},update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},getEvents:function(){var j={zoom:this._updatePosition,viewreset:this._updatePosition};if(this._zoomAnimated){j.zoomanim=this._animateZoom}return j},isOpen:function(){return !!this._map&&this._map.hasLayer(this)},bringToFront:function(){if(this._map){g.DomUtil.toFront(this._container)}return this},bringToBack:function(){if(this._map){g.DomUtil.toBack(this._container)}return this},_updateContent:function(){if(!this._content){return}var k=this._contentNode;var j=(typeof this._content==="function")?this._content(this._source||this):this._content;if(typeof j==="string"){k.innerHTML=j}else{while(k.hasChildNodes()){k.removeChild(k.firstChild)}k.appendChild(j)}this.fire("contentupdate")},_updatePosition:function(){if(!this._map){return}var n=this._map.latLngToLayerPoint(this._latlng),m=g.point(this.options.offset),k=this._getAnchor();if(this._zoomAnimated){g.DomUtil.setPosition(this._container,n.add(k))}else{m=m.add(n).add(k)}var j=this._containerBottom=-m.y,l=this._containerLeft=-Math.round(this._containerWidth/2)+m.x;this._container.style.bottom=j+"px";this._container.style.left=l+"px"},_getAnchor:function(){return[0,0]}});g.Popup=g.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:true,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:false,closeButton:true,autoClose:true,className:""},openOn:function(j){j.openPopup(this);return this},onAdd:function(j){g.DivOverlay.prototype.onAdd.call(this,j);j.fire("popupopen",{popup:this});if(this._source){this._source.fire("popupopen",{popup:this},true);if(!(this._source instanceof g.Path)){this._source.on("preclick",g.DomEvent.stopPropagation)}}},onRemove:function(j){g.DivOverlay.prototype.onRemove.call(this,j);j.fire("popupclose",{popup:this});if(this._source){this._source.fire("popupclose",{popup:this},true);if(!(this._source instanceof g.Path)){this._source.off("preclick",g.DomEvent.stopPropagation)}}},getEvents:function(){var j=g.DivOverlay.prototype.getEvents.call(this);if("closeOnClick" in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick){j.preclick=this._close}if(this.options.keepInView){j.moveend=this._adjustPan}return j},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var l="leaflet-popup",j=this._container=g.DomUtil.create("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var k=this._closeButton=g.DomUtil.create("a",l+"-close-button",j);k.href="#close";k.innerHTML="&#215;";g.DomEvent.on(k,"click",this._onCloseButtonClick,this)}var m=this._wrapper=g.DomUtil.create("div",l+"-content-wrapper",j);this._contentNode=g.DomUtil.create("div",l+"-content",m);g.DomEvent.disableClickPropagation(m).disableScrollPropagation(this._contentNode).on(m,"contextmenu",g.DomEvent.stopPropagation);this._tipContainer=g.DomUtil.create("div",l+"-tip-container",j);this._tip=g.DomUtil.create("div",l+"-tip",this._tipContainer)},_updateLayout:function(){var k=this._contentNode,m=k.style;m.width="";m.whiteSpace="nowrap";var l=k.offsetWidth;l=Math.min(l,this.options.maxWidth);l=Math.max(l,this.options.minWidth);m.width=(l+1)+"px";m.whiteSpace="";m.height="";var j=k.offsetHeight,n=this.options.maxHeight,o="leaflet-popup-scrolled";if(n&&j>n){m.height=n+"px";g.DomUtil.addClass(k,o)}else{g.DomUtil.removeClass(k,o)}this._containerWidth=this._container.offsetWidth},_animateZoom:function(k){var l=this._map._latLngToNewLayerPoint(this._latlng,k.zoom,k.center),j=this._getAnchor();g.DomUtil.setPosition(this._container,l.add(j))},_adjustPan:function(){if(!this.options.autoPan||(this._map._panAnim&&this._map._panAnim._inProgress)){return}var k=this._map,n=parseInt(g.DomUtil.getStyle(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+n,q=this._containerWidth,o=new g.Point(this._containerLeft,-u-this._containerBottom);
    o._add(g.DomUtil.getPosition(this._container));var m=k.layerPointToContainerPoint(o),p=g.point(this.options.autoPanPadding),l=g.point(this.options.autoPanPaddingTopLeft||p),j=g.point(this.options.autoPanPaddingBottomRight||p),t=k.getSize(),s=0,r=0;if(m.x+q+j.x>t.x){s=m.x+q-t.x+j.x}if(m.x-s-l.x<0){s=m.x-l.x}if(m.y+u+j.y>t.y){r=m.y+u-t.y+j.y}if(m.y-r-l.y<0){r=m.y-l.y}if(s||r){k.fire("autopanstart").panBy([s,r])}},_onCloseButtonClick:function(j){this._close();g.DomEvent.stop(j)},_getAnchor:function(){return g.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});g.popup=function(j,k){return new g.Popup(j,k)};g.Map.mergeOptions({closePopupOnClick:true});g.Map.include({openPopup:function(j,l,k){if(!(j instanceof g.Popup)){j=new g.Popup(k).setContent(j)}if(l){j.setLatLng(l)}if(this.hasLayer(j)){return this}if(this._popup&&this._popup.options.autoClose){this.closePopup()}this._popup=j;return this.addLayer(j)},closePopup:function(j){if(!j||j===this._popup){j=this._popup;this._popup=null}if(j){this.removeLayer(j)}return this}});g.Layer.include({bindPopup:function(k,j){if(k instanceof g.Popup){g.setOptions(k,j);this._popup=k;k._source=this}else{if(!this._popup||j){this._popup=new g.Popup(j,this)}this._popup.setContent(k)}if(!this._popupHandlersAdded){this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=true}return this},unbindPopup:function(){if(this._popup){this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup});this._popupHandlersAdded=false;this._popup=null}return this},openPopup:function(j,l){if(!(j instanceof g.Layer)){l=j;j=this}if(j instanceof g.FeatureGroup){for(var k in this._layers){j=this._layers[k];break}}if(!l){l=j.getCenter?j.getCenter():j.getLatLng()}if(this._popup&&this._map){this._popup._source=j;this._popup.update();this._map.openPopup(this._popup,l)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},togglePopup:function(j){if(this._popup){if(this._popup._map){this.closePopup()}else{this.openPopup(j)}}return this},isPopupOpen:function(){return this._popup.isOpen()},setPopupContent:function(j){if(this._popup){this._popup.setContent(j)}return this},getPopup:function(){return this._popup},_openPopup:function(k){var j=k.layer||k.target;if(!this._popup){return}if(!this._map){return}g.DomEvent.stop(k);if(j instanceof g.Path){this.openPopup(k.layer||k.target,k.latlng);return}if(this._map.hasLayer(this._popup)&&this._popup._source===j){this.closePopup()}else{this.openPopup(j,k.latlng)}},_movePopup:function(j){this._popup.setLatLng(j.latlng)}});g.Marker.include({_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]}});g.Tooltip=g.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:false,sticky:false,interactive:false,opacity:0.9},onAdd:function(j){g.DivOverlay.prototype.onAdd.call(this,j);this.setOpacity(this.options.opacity);j.fire("tooltipopen",{tooltip:this});if(this._source){this._source.fire("tooltipopen",{tooltip:this},true)}},onRemove:function(j){g.DivOverlay.prototype.onRemove.call(this,j);j.fire("tooltipclose",{tooltip:this});if(this._source){this._source.fire("tooltipclose",{tooltip:this},true)}},getEvents:function(){var j=g.DivOverlay.prototype.getEvents.call(this);if(g.Browser.touch&&!this.options.permanent){j.preclick=this._close}return j},_close:function(){if(this._map){this._map.closeTooltip(this)}},_initLayout:function(){var k="leaflet-tooltip",j=k+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=g.DomUtil.create("div",j)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(q){var j=this._map,k=this._container,p=j.latLngToContainerPoint(j.getCenter()),l=j.layerPointToContainerPoint(q),r=this.options.direction,o=k.offsetWidth,s=k.offsetHeight,m=g.point(this.options.offset),n=this._getAnchor();if(r==="top"){q=q.add(g.point(-o/2+m.x,-s+m.y+n.y))}else{if(r==="bottom"){q=q.subtract(g.point(o/2-m.x,-m.y))}else{if(r==="center"){q=q.subtract(g.point(o/2+m.x,s/2-n.y+m.y))}else{if(r==="right"||r==="auto"&&l.x<p.x){r="right";q=q.add([m.x+n.x,n.y-s/2+m.y])}else{r="left";q=q.subtract(g.point(o+n.x-m.x,s/2-n.y-m.y))}}}}g.DomUtil.removeClass(k,"leaflet-tooltip-right");g.DomUtil.removeClass(k,"leaflet-tooltip-left");g.DomUtil.removeClass(k,"leaflet-tooltip-top");g.DomUtil.removeClass(k,"leaflet-tooltip-bottom");g.DomUtil.addClass(k,"leaflet-tooltip-"+r);g.DomUtil.setPosition(k,q)},_updatePosition:function(){var j=this._map.latLngToLayerPoint(this._latlng);this._setPosition(j)},setOpacity:function(j){this.options.opacity=j;if(this._container){g.DomUtil.setOpacity(this._container,j)}},_animateZoom:function(j){var k=this._map._latLngToNewLayerPoint(this._latlng,j.zoom,j.center);this._setPosition(k)},_getAnchor:function(){return g.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])
}});g.tooltip=function(j,k){return new g.Tooltip(j,k)};g.Map.include({openTooltip:function(k,l,j){if(!(k instanceof g.Tooltip)){k=new g.Tooltip(j).setContent(k)}if(l){k.setLatLng(l)}if(this.hasLayer(k)){return this}return this.addLayer(k)},closeTooltip:function(j){if(j){this.removeLayer(j)}return this}});g.Layer.include({bindTooltip:function(k,j){if(k instanceof g.Tooltip){g.setOptions(k,j);this._tooltip=k;k._source=this}else{if(!this._tooltip||j){this._tooltip=g.tooltip(j,this)}this._tooltip.setContent(k)}this._initTooltipInteractions();if(this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)){this.openTooltip()}return this},unbindTooltip:function(){if(this._tooltip){this._initTooltipInteractions(true);this.closeTooltip();this._tooltip=null}return this},_initTooltipInteractions:function(k){if(!k&&this._tooltipHandlersAdded){return}var j=k?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};if(!this._tooltip.options.permanent){l.mouseover=this._openTooltip;l.mouseout=this.closeTooltip;if(this._tooltip.options.sticky){l.mousemove=this._moveTooltip}if(g.Browser.touch){l.click=this._openTooltip}}else{l.add=this._openTooltip}this[j](l);this._tooltipHandlersAdded=!k},openTooltip:function(j,l){if(!(j instanceof g.Layer)){l=j;j=this}if(j instanceof g.FeatureGroup){for(var k in this._layers){j=this._layers[k];break}}if(!l){l=j.getCenter?j.getCenter():j.getLatLng()}if(this._tooltip&&this._map){this._tooltip._source=j;this._tooltip.update();this._map.openTooltip(this._tooltip,l);if(this._tooltip.options.interactive&&this._tooltip._container){g.DomUtil.addClass(this._tooltip._container,"leaflet-clickable");this.addInteractiveTarget(this._tooltip._container)}}return this},closeTooltip:function(){if(this._tooltip){this._tooltip._close();if(this._tooltip.options.interactive&&this._tooltip._container){g.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable");this.removeInteractiveTarget(this._tooltip._container)}}return this},toggleTooltip:function(j){if(this._tooltip){if(this._tooltip._map){this.closeTooltip()}else{this.openTooltip(j)}}return this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(j){if(this._tooltip){this._tooltip.setContent(j)}return this},getTooltip:function(){return this._tooltip},_openTooltip:function(k){var j=k.layer||k.target;if(!this._tooltip||!this._map){return}this.openTooltip(j,this._tooltip.options.sticky?k.latlng:b)},_moveTooltip:function(l){var m=l.latlng,k,j;if(this._tooltip.options.sticky&&l.originalEvent){k=this._map.mouseEventToContainerPoint(l.originalEvent);j=this._map.containerPointToLayerPoint(k);m=this._map.layerPointToLatLng(j)}this._tooltip.setLatLng(m)}});g.Marker.include({_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}});g.LayerGroup=g.Layer.extend({initialize:function(l){this._layers={};var k,j;if(l){for(k=0,j=l.length;k<j;k++){this.addLayer(l[k])}}},addLayer:function(j){var k=this.getLayerId(j);this._layers[k]=j;if(this._map){this._map.addLayer(j)}return this},removeLayer:function(j){var k=j in this._layers?j:this.getLayerId(j);if(this._map&&this._layers[k]){this._map.removeLayer(this._layers[k])}delete this._layers[k];return this},hasLayer:function(j){return !!j&&(j in this._layers||this.getLayerId(j) in this._layers)},clearLayers:function(){for(var j in this._layers){this.removeLayer(this._layers[j])}return this},invoke:function(j){var k=Array.prototype.slice.call(arguments,1),m,l;for(m in this._layers){l=this._layers[m];if(l[j]){l[j].apply(l,k)}}return this},onAdd:function(k){for(var j in this._layers){k.addLayer(this._layers[j])}},onRemove:function(k){for(var j in this._layers){k.removeLayer(this._layers[j])}},eachLayer:function(l,k){for(var j in this._layers){l.call(k,this._layers[j])}return this},getLayer:function(j){return this._layers[j]},getLayers:function(){var k=[];for(var j in this._layers){k.push(this._layers[j])}return k},setZIndex:function(j){return this.invoke("setZIndex",j)},getLayerId:function(j){return g.stamp(j)}});g.layerGroup=function(j){return new g.LayerGroup(j)};g.FeatureGroup=g.LayerGroup.extend({addLayer:function(j){if(this.hasLayer(j)){return this}j.addEventParent(this);g.LayerGroup.prototype.addLayer.call(this,j);return this.fire("layeradd",{layer:j})},removeLayer:function(j){if(!this.hasLayer(j)){return this}if(j in this._layers){j=this._layers[j]}j.removeEventParent(this);g.LayerGroup.prototype.removeLayer.call(this,j);return this.fire("layerremove",{layer:j})},setStyle:function(j){return this.invoke("setStyle",j)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var k=new g.LatLngBounds();for(var l in this._layers){var j=this._layers[l];k.extend(j.getBounds?j.getBounds():j.getLatLng())}return k}});g.featureGroup=function(j){return new g.FeatureGroup(j)};g.Renderer=g.Layer.extend({options:{padding:0.1},initialize:function(j){g.setOptions(this,j);g.stamp(this)
},onAdd:function(){if(!this._container){this._initContainer();if(this._zoomAnimated){g.DomUtil.addClass(this._container,"leaflet-zoom-animated")}}this.getPane().appendChild(this._container);this._update()},onRemove:function(){g.DomUtil.remove(this._container)},getEvents:function(){var j={viewreset:this._reset,zoom:this._onZoom,moveend:this._update};if(this._zoomAnimated){j.zoomanim=this._onAnimZoom}return j},_onAnimZoom:function(j){this._updateTransform(j.center,j.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(j,r){var m=this._map.getZoomScale(r,this._zoom),o=g.DomUtil.getPosition(this._container),p=this._map.getSize().multiplyBy(0.5+this.options.padding),k=this._map.project(this._center,r),n=this._map.project(j,r),q=n.subtract(k),l=p.multiplyBy(-m).add(o).add(p).subtract(q);if(g.Browser.any3d){g.DomUtil.setTransform(this._container,l,m)}else{g.DomUtil.setPosition(this._container,l)}},_reset:function(){this._update();this._updateTransform(this._center,this._zoom)},_update:function(){var l=this.options.padding,k=this._map.getSize(),j=this._map.containerPointToLayerPoint(k.multiplyBy(-l)).round();this._bounds=new g.Bounds(j,j.add(k.multiplyBy(1+l*2)).round());this._center=this._map.getCenter();this._zoom=this._map.getZoom()}});g.Map.include({getRenderer:function(j){var k=j.options.renderer||this._getPaneRenderer(j.options.pane)||this.options.renderer||this._renderer;if(!k){k=this._renderer=(this.options.preferCanvas&&g.canvas())||g.svg()}if(!this.hasLayer(k)){this.addLayer(k)}return k},_getPaneRenderer:function(j){if(j==="overlayPane"||j===b){return false}var k=this._paneRenderers[j];if(k===b){k=(g.SVG&&g.svg({pane:j}))||(g.Canvas&&g.canvas({pane:j}));this._paneRenderers[j]=k}return k}});g.Path=g.Layer.extend({options:{stroke:true,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:false,fillColor:null,fillOpacity:0.2,fillRule:"evenodd",interactive:true},beforeAdd:function(j){this._renderer=j.getRenderer(this)},onAdd:function(){this._renderer._initPath(this);this._reset();this._renderer._addPath(this);this._renderer.on("update",this._update,this)},onRemove:function(){this._renderer._removePath(this);this._renderer.off("update",this._update,this)},getEvents:function(){return{zoomend:this._project,viewreset:this._reset}},redraw:function(){if(this._map){this._renderer._updatePath(this)}return this},setStyle:function(j){g.setOptions(this,j);if(this._renderer){this._renderer._updateStyle(this)}return this},bringToFront:function(){if(this._renderer){this._renderer._bringToFront(this)}return this},bringToBack:function(){if(this._renderer){this._renderer._bringToBack(this)}return this},getElement:function(){return this._path},_reset:function(){this._project();this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(g.Browser.touch?10:0)}});g.LineUtil={simplify:function(l,j){if(!j||!l.length){return l.slice()}var k=j*j;l=this._reducePoints(l,k);l=this._simplifyDP(l,k);return l},pointToSegmentDistance:function(k,l,j){return Math.sqrt(this._sqClosestPointOnSegment(k,l,j,true))},closestPointOnSegment:function(k,l,j){return this._sqClosestPointOnSegment(k,l,j)},_simplifyDP:function(n,k){var j=n.length,m=typeof Uint8Array!==b+""?Uint8Array:Array,p=new m(j);p[0]=p[j-1]=1;this._simplifyDPStep(n,p,k,0,j-1);var l,o=[];for(l=0;l<j;l++){if(p[l]){o.push(n[l])}}return o},_simplifyDPStep:function(r,k,j,o,q){var l=0,p,m,n;for(m=o+1;m<=q-1;m++){n=this._sqClosestPointOnSegment(r[m],r[o],r[q],true);if(n>l){p=m;l=n}}if(l>j){k[p]=1;this._simplifyDPStep(r,k,j,o,p);this._simplifyDPStep(r,k,j,p,q)}},_reducePoints:function(m,k){var o=[m[0]];for(var l=1,n=0,j=m.length;l<j;l++){if(this._sqDist(m[l],m[n])>k){o.push(m[l]);n=l}}if(n<j-1){o.push(m[j-1])}return o},clipSegment:function(r,q,j,s,t){var n=s?this._lastCode:this._getBitCode(r,j),l=this._getBitCode(q,j),m,k,o;this._lastCode=l;while(true){if(!(n|l)){return[r,q]}if(n&l){return false}m=n||l;k=this._getEdgeIntersection(r,q,m,j,t);o=this._getBitCode(k,j);if(m===n){r=k;n=o}else{q=k;l=o}}},_getEdgeIntersection:function(q,o,k,j,r){var t=o.x-q.x,s=o.y-q.y,l=j.min,n=j.max,p,m;if(k&8){p=q.x+t*(n.y-q.y)/s;m=n.y}else{if(k&4){p=q.x+t*(l.y-q.y)/s;m=l.y}else{if(k&2){p=n.x;m=q.y+s*(n.x-q.x)/t}else{if(k&1){p=l.x;m=q.y+s*(l.x-q.x)/t}}}}return new g.Point(p,m,r)},_getBitCode:function(l,k){var j=0;if(l.x<k.min.x){j|=1}else{if(l.x>k.max.x){j|=2}}if(l.y<k.min.y){j|=4}else{if(l.y>k.max.y){j|=8}}return j},_sqDist:function(m,l){var k=l.x-m.x,j=l.y-m.y;return k*k+j*j},_sqClosestPointOnSegment:function(k,q,o,l){var n=q.x,m=q.y,u=o.x-n,s=o.y-m,j=u*u+s*s,r;if(j>0){r=((k.x-n)*u+(k.y-m)*s)/j;if(r>1){n=o.x;m=o.y}else{if(r>0){n+=u*r;m+=s*r}}}u=k.x-n;s=k.y-m;return l?u*u+s*s:new g.Point(n,m)}};g.Polyline=g.Path.extend({options:{smoothFactor:1,noClip:false},initialize:function(j,k){g.setOptions(this,k);this._setLatLngs(j)},getLatLngs:function(){return this._latlngs},setLatLngs:function(j){this._setLatLngs(j);
    return this.redraw()},isEmpty:function(){return !this._latlngs.length},closestLayerPoint:function(k){var t=Infinity,r=null,l=g.LineUtil._sqClosestPointOnSegment,v,u;for(var m=0,w=this._parts.length;m<w;m++){var s=this._parts[m];for(var n=1,q=s.length;n<q;n++){v=s[n-1];u=s[n];var o=l(k,v,u,true);if(o<t){t=o;r=l(k,v,u)}}}if(r){r.distance=Math.sqrt(t)}return r},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var l,j,k,o,r,p,n,q=this._rings[0],m=q.length;if(!m){return null}for(l=0,j=0;l<m-1;l++){j+=q[l].distanceTo(q[l+1])/2}if(j===0){return this._map.layerPointToLatLng(q[0])}for(l=0,o=0;l<m-1;l++){r=q[l];p=q[l+1];k=r.distanceTo(p);o+=k;if(o>j){n=(o-j)/k;return this._map.layerPointToLatLng([p.x-n*(p.x-r.x),p.y-n*(p.y-r.y)])}}},getBounds:function(){return this._bounds},addLatLng:function(k,j){j=j||this._defaultShape();k=g.latLng(k);j.push(k);this._bounds.extend(k);return this.redraw()},_setLatLngs:function(j){this._bounds=new g.LatLngBounds();this._latlngs=this._convertLatLngs(j)},_defaultShape:function(){return g.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){var k=[],n=g.Polyline._flat(l);for(var m=0,j=l.length;m<j;m++){if(n){k[m]=g.latLng(l[m]);this._bounds.extend(k[m])}else{k[m]=this._convertLatLngs(l[m])}}return k},_project:function(){var k=new g.Bounds();this._rings=[];this._projectLatlngs(this._latlngs,this._rings,k);var j=this._clickTolerance(),l=new g.Point(j,j);if(this._bounds.isValid()&&k.isValid()){k.min._subtract(l);k.max._add(l);this._pxBounds=k}},_projectLatlngs:function(l,k,o){var p=l[0] instanceof g.LatLng,j=l.length,n,m;if(p){m=[];for(n=0;n<j;n++){m[n]=this._map.latLngToLayerPoint(l[n]);o.extend(m[n])}k.push(m)}else{for(n=0;n<j;n++){this._projectLatlngs(l[n],k,o)}}},_clipPoints:function(){var l=this._renderer._bounds;this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(l)){return}if(this.options.noClip){this._parts=this._rings;return}var o=this._parts,q,p,m,s,n,r,t;for(q=0,m=0,s=this._rings.length;q<s;q++){t=this._rings[q];for(p=0,n=t.length;p<n-1;p++){r=g.LineUtil.clipSegment(t[p],t[p+1],l,p,true);if(!r){continue}o[m]=o[m]||[];o[m].push(r[0]);if((r[1]!==t[p+1])||(p===n-2)){o[m].push(r[1]);m++}}}},_simplifyPoints:function(){var m=this._parts,k=this.options.smoothFactor;for(var l=0,j=m.length;l<j;l++){m[l]=g.LineUtil.simplify(m[l],k)}},_update:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();this._updatePath()},_updatePath:function(){this._renderer._updatePoly(this)}});g.polyline=function(j,k){return new g.Polyline(j,k)};g.Polyline._flat=function(j){return !g.Util.isArray(j[0])||(typeof j[0][0]!=="object"&&typeof j[0][0]!=="undefined")};g.PolyUtil={};g.PolyUtil.clipPolygon=function(y,l,z){var v,s=[1,4,2,8],t,r,q,x,w,u,n,m,o=g.LineUtil;for(t=0,u=y.length;t<u;t++){y[t]._code=o._getBitCode(y[t],l)}for(q=0;q<4;q++){n=s[q];v=[];for(t=0,u=y.length,r=u-1;t<u;r=t++){x=y[t];w=y[r];if(!(x._code&n)){if(w._code&n){m=o._getEdgeIntersection(w,x,n,l,z);m._code=o._getBitCode(m,l);v.push(m)}v.push(x)}else{if(!(w._code&n)){m=o._getEdgeIntersection(w,x,n,l,z);m._code=o._getBitCode(m,l);v.push(m)}}}y=v}return y};g.Polygon=g.Polyline.extend({options:{fill:true},isEmpty:function(){return !this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map){throw new Error("Must add layer to map before using getCenter()")}var n,m,u,t,p,l,r,q,k,s=this._rings[0],o=s.length;if(!o){return null}l=r=q=0;for(n=0,m=o-1;n<o;m=n++){u=s[n];t=s[m];p=u.y*t.x-t.y*u.x;r+=(u.x+t.x)*p;q+=(u.y+t.y)*p;l+=p*3}if(l===0){k=s[0]}else{k=[r/l,q/l]}return this._map.layerPointToLatLng(k)},_convertLatLngs:function(l){var k=g.Polyline.prototype._convertLatLngs.call(this,l),j=k.length;if(j>=2&&k[0] instanceof g.LatLng&&k[0].equals(k[j-1])){k.pop()}return k},_setLatLngs:function(j){g.Polyline.prototype._setLatLngs.call(this,j);if(g.Polyline._flat(this._latlngs)){this._latlngs=[this._latlngs]}},_defaultShape:function(){return g.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,l=this.options.weight,o=new g.Point(l,l);n=new g.Bounds(n.min.subtract(o),n.max.add(o));this._parts=[];if(!this._pxBounds||!this._pxBounds.intersects(n)){return}if(this.options.noClip){this._parts=this._rings;return}for(var m=0,k=this._rings.length,j;m<k;m++){j=g.PolyUtil.clipPolygon(this._rings[m],n,true);if(j.length){this._parts.push(j)}}},_updatePath:function(){this._renderer._updatePoly(this,true)}});g.polygon=function(j,k){return new g.Polygon(j,k)};g.Rectangle=g.Polygon.extend({initialize:function(k,j){g.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(k),j)},setBounds:function(j){return this.setLatLngs(this._boundsToLatLngs(j))},_boundsToLatLngs:function(j){j=g.latLngBounds(j);return[j.getSouthWest(),j.getNorthWest(),j.getNorthEast(),j.getSouthEast()]}});g.rectangle=function(k,j){return new g.Rectangle(k,j)};g.CircleMarker=g.Path.extend({options:{fill:true,radius:10},initialize:function(k,j){g.setOptions(this,j);
    this._latlng=g.latLng(k);this._radius=this.options.radius},setLatLng:function(j){this._latlng=g.latLng(j);this.redraw();return this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(j){this.options.radius=this._radius=j;return this.redraw()},getRadius:function(){return this._radius},setStyle:function(k){var j=k&&k.radius||this._radius;g.Path.prototype.setStyle.call(this,k);this.setRadius(j);return this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng);this._updateBounds()},_updateBounds:function(){var l=this._radius,k=this._radiusY||l,j=this._clickTolerance(),m=[l+j,k+j];this._pxBounds=new g.Bounds(this._point.subtract(m),this._point.add(m))},_update:function(){if(this._map){this._updatePath()}},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}});g.circleMarker=function(k,j){return new g.CircleMarker(k,j)};g.Circle=g.CircleMarker.extend({initialize:function(l,k,j){if(typeof k==="number"){k=g.extend({},j,{radius:k})}g.setOptions(this,k);this._latlng=g.latLng(l);if(isNaN(this.options.radius)){throw new Error("Circle radius cannot be NaN")}this._mRadius=this.options.radius},setRadius:function(j){this._mRadius=j;return this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var j=[this._radius,this._radiusY||this._radius];return new g.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(j)),this._map.layerPointToLatLng(this._point.add(j)))},setStyle:g.Path.prototype.setStyle,_project:function(){var s=this._latlng.lng,q=this._latlng.lat,k=this._map,u=k.options.crs;if(u.distance===g.CRS.Earth.distance){var o=Math.PI/180,v=(this._mRadius/g.CRS.Earth.R)/o,r=k.project([q+v,s]),j=k.project([q-v,s]),l=r.add(j).divideBy(2),n=k.unproject(l).lat,m=Math.acos((Math.cos(v*o)-Math.sin(q*o)*Math.sin(n*o))/(Math.cos(q*o)*Math.cos(n*o)))/o;if(isNaN(m)||m===0){m=v/Math.cos(Math.PI/180*q)}this._point=l.subtract(k.getPixelOrigin());this._radius=isNaN(m)?0:Math.max(Math.round(l.x-k.project([n,s-m]).x),1);this._radiusY=Math.max(Math.round(l.y-r.y),1)}else{var t=u.unproject(u.project(this._latlng).subtract([this._mRadius,0]));this._point=k.latLngToLayerPoint(this._latlng);this._radius=this._point.x-k.latLngToLayerPoint(t).x}this._updateBounds()}});g.circle=function(l,k,j){return new g.Circle(l,k,j)};g.SVG=g.Renderer.extend({getEvents:function(){var j=g.Renderer.prototype.getEvents.call(this);j.zoomstart=this._onZoomStart;return j},_initContainer:function(){this._container=g.SVG.create("svg");this._container.setAttribute("pointer-events","none");this._rootGroup=g.SVG.create("g");this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(this._map._animatingZoom&&this._bounds){return}g.Renderer.prototype._update.call(this);var j=this._bounds,l=j.getSize(),k=this._container;if(!this._svgSize||!this._svgSize.equals(l)){this._svgSize=l;k.setAttribute("width",l.x);k.setAttribute("height",l.y)}g.DomUtil.setPosition(k,j.min);k.setAttribute("viewBox",[j.min.x,j.min.y,l.x,l.y].join(" "));this.fire("update")},_initPath:function(j){var k=j._path=g.SVG.create("path");if(j.options.className){g.DomUtil.addClass(k,j.options.className)}if(j.options.interactive){g.DomUtil.addClass(k,"leaflet-interactive")}this._updateStyle(j)},_addPath:function(j){this._rootGroup.appendChild(j._path);j.addInteractiveTarget(j._path)},_removePath:function(j){g.DomUtil.remove(j._path);j.removeInteractiveTarget(j._path)},_updatePath:function(j){j._project();j._update()},_updateStyle:function(k){var l=k._path,j=k.options;if(!l){return}if(j.stroke){l.setAttribute("stroke",j.color);l.setAttribute("stroke-opacity",j.opacity);l.setAttribute("stroke-width",j.weight);l.setAttribute("stroke-linecap",j.lineCap);l.setAttribute("stroke-linejoin",j.lineJoin);if(j.dashArray){l.setAttribute("stroke-dasharray",j.dashArray)}else{l.removeAttribute("stroke-dasharray")}if(j.dashOffset){l.setAttribute("stroke-dashoffset",j.dashOffset)}else{l.removeAttribute("stroke-dashoffset")}}else{l.setAttribute("stroke","none")}if(j.fill){l.setAttribute("fill",j.fillColor||j.color);l.setAttribute("fill-opacity",j.fillOpacity);l.setAttribute("fill-rule",j.fillRule||"evenodd")}else{l.setAttribute("fill","none")}},_updatePoly:function(k,j){this._setPath(k,g.SVG.pointsToPath(k._parts,j))},_updateCircle:function(l){var n=l._point,m=l._radius,j=l._radiusY||m,k="a"+m+","+j+" 0 1,0 ";var o=l._empty()?"M0 0":"M"+(n.x-m)+","+n.y+k+(m*2)+",0 "+k+(-m*2)+",0 ";this._setPath(l,o)},_setPath:function(j,k){j._path.setAttribute("d",k)},_bringToFront:function(j){g.DomUtil.toFront(j._path)},_bringToBack:function(j){g.DomUtil.toBack(j._path)}});g.extend(g.SVG,{create:function(j){return f.createElementNS("http://www.w3.org/2000/svg",j)},pointsToPath:function(s,o){var r="",n,m,q,l,t,k;for(n=0,q=s.length;n<q;n++){t=s[n];for(m=0,l=t.length;m<l;m++){k=t[m];r+=(m?"L":"M")+k.x+" "+k.y
}r+=o?(g.Browser.svg?"z":"x"):""}return r||"M0 0"}});g.Browser.svg=!!(f.createElementNS&&g.SVG.create("svg").createSVGRect);g.svg=function(j){return g.Browser.svg||g.Browser.vml?new g.SVG(j):null};g.Browser.vml=!g.Browser.svg&&(function(){try{var l=f.createElement("div");l.innerHTML='<v:shape adj="1"/>';var j=l.firstChild;j.style.behavior="url(#default#VML)";return j&&(typeof j.adj==="object")}catch(k){return false}}());g.SVG.include(!g.Browser.vml?{}:{_initContainer:function(){this._container=g.DomUtil.create("div","leaflet-vml-container")},_update:function(){if(this._map._animatingZoom){return}g.Renderer.prototype._update.call(this);this.fire("update")},_initPath:function(k){var j=k._container=g.SVG.create("shape");g.DomUtil.addClass(j,"leaflet-vml-shape "+(this.options.className||""));j.coordsize="1 1";k._path=g.SVG.create("path");j.appendChild(k._path);this._updateStyle(k)},_addPath:function(k){var j=k._container;this._container.appendChild(j);if(k.options.interactive){k.addInteractiveTarget(j)}},_removePath:function(k){var j=k._container;g.DomUtil.remove(j);k.removeInteractiveTarget(j)},_updateStyle:function(l){var n=l._stroke,m=l._fill,k=l.options,j=l._container;j.stroked=!!k.stroke;j.filled=!!k.fill;if(k.stroke){if(!n){n=l._stroke=g.SVG.create("stroke")}j.appendChild(n);n.weight=k.weight+"px";n.color=k.color;n.opacity=k.opacity;if(k.dashArray){n.dashStyle=g.Util.isArray(k.dashArray)?k.dashArray.join(" "):k.dashArray.replace(/( *, *)/g," ")}else{n.dashStyle=""}n.endcap=k.lineCap.replace("butt","flat");n.joinstyle=k.lineJoin}else{if(n){j.removeChild(n);l._stroke=null}}if(k.fill){if(!m){m=l._fill=g.SVG.create("fill")}j.appendChild(m);m.color=k.fillColor||k.color;m.opacity=k.fillOpacity}else{if(m){j.removeChild(m);l._fill=null}}},_updateCircle:function(k){var m=k._point.round(),l=Math.round(k._radius),j=Math.round(k._radiusY||l);this._setPath(k,k._empty()?"M0 0":"AL "+m.x+","+m.y+" "+l+","+j+" 0,"+(65535*360))},_setPath:function(j,k){j._path.v=k},_bringToFront:function(j){g.DomUtil.toFront(j._container)},_bringToBack:function(j){g.DomUtil.toBack(j._container)}});if(g.Browser.vml){g.SVG.create=(function(){try{f.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(k){return f.createElement("<lvml:"+k+' class="lvml">')}}catch(j){return function(k){return f.createElement("<"+k+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}})()}g.Canvas=g.Renderer.extend({onAdd:function(){g.Renderer.prototype.onAdd.call(this);this._layers=this._layers||{};this._draw()},_initContainer:function(){var j=this._container=f.createElement("canvas");g.DomEvent.on(j,"mousemove",g.Util.throttle(this._onMouseMove,32,this),this).on(j,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(j,"mouseout",this._handleMouseOut,this);this._ctx=j.getContext("2d")},_update:function(){if(this._map._animatingZoom&&this._bounds){return}this._drawnLayers={};g.Renderer.prototype._update.call(this);var k=this._bounds,l=this._container,n=k.getSize(),j=g.Browser.retina?2:1;g.DomUtil.setPosition(l,k.min);l.width=j*n.x;l.height=j*n.y;l.style.width=n.x+"px";l.style.height=n.y+"px";if(g.Browser.retina){this._ctx.scale(2,2)}this._ctx.translate(-k.min.x,-k.min.y);this.fire("update")},_initPath:function(j){this._updateDashArray(j);this._layers[g.stamp(j)]=j},_addPath:g.Util.falseFn,_removePath:function(j){j._removed=true;this._requestRedraw(j)},_updatePath:function(j){this._redrawBounds=j._pxBounds;this._draw(true);j._project();j._update();this._draw();this._redrawBounds=null},_updateStyle:function(j){this._updateDashArray(j);this._requestRedraw(j)},_updateDashArray:function(l){if(l.options.dashArray){var m=l.options.dashArray.split(","),j=[],k;for(k=0;k<m.length;k++){j.push(Number(m[k]))}l.options._dashArray=j}},_requestRedraw:function(j){if(!this._map){return}var k=(j.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new g.Bounds();this._redrawBounds.extend(j._pxBounds.min.subtract([k,k]));this._redrawBounds.extend(j._pxBounds.max.add([k,k]));this._redrawRequest=this._redrawRequest||g.Util.requestAnimFrame(this._redraw,this)},_redraw:function(){this._redrawRequest=null;this._draw(true);this._draw();this._redrawBounds=null},_draw:function(j){this._clear=j;var k,l=this._redrawBounds;this._ctx.save();if(l){this._ctx.beginPath();this._ctx.rect(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y);this._ctx.clip()}for(var m in this._layers){k=this._layers[m];if(!l||(k._pxBounds&&k._pxBounds.intersects(l))){k._updatePath()}if(j&&k._removed){delete k._removed;delete this._layers[m]}}this._ctx.restore()},_updatePoly:function(q,r){var o,n,l,k,m=q._parts,s=m.length,t=this._ctx;if(!s){return}this._drawnLayers[q._leaflet_id]=q;t.beginPath();if(t.setLineDash){t.setLineDash(q.options&&q.options._dashArray||[])}for(o=0;o<s;o++){for(n=0,l=m[o].length;n<l;n++){k=m[o][n];t[n?"lineTo":"moveTo"](k.x,k.y)}if(r){t.closePath()}}this._fillStroke(t,q)},_updateCircle:function(k){if(k._empty()){return}var n=k._point,j=this._ctx,m=k._radius,l=(k._radiusY||m)/m;
    this._drawnLayers[k._leaflet_id]=k;if(l!==1){j.save();j.scale(1,l)}j.beginPath();j.arc(n.x,n.y/l,m,0,Math.PI*2,false);if(l!==1){j.restore()}this._fillStroke(j,k)},_fillStroke:function(k,m){var j=this._clear,l=m.options;k.globalCompositeOperation=j?"destination-out":"source-over";if(l.fill){k.globalAlpha=j?1:l.fillOpacity;k.fillStyle=l.fillColor||l.color;k.fill(l.fillRule||"evenodd")}if(l.stroke&&l.weight!==0){k.globalAlpha=j?1:l.opacity;m._prevWeight=k.lineWidth=j?m._prevWeight+1:l.weight;k.strokeStyle=l.color;k.lineCap=l.lineCap;k.lineJoin=l.lineJoin;k.stroke()}},_onClick:function(m){var j=this._map.mouseEventToLayerPoint(m),l=[],k;for(var n in this._layers){k=this._layers[n];if(k.options.interactive&&k._containsPoint(j)&&!this._map._draggableMoved(k)){g.DomEvent._fakeStop(m);l.push(k)}}if(l.length){this._fireEvent(l,m)}},_onMouseMove:function(k){if(!this._map||this._map.dragging.moving()||this._map._animatingZoom){return}var j=this._map.mouseEventToLayerPoint(k);this._handleMouseOut(k,j);this._handleMouseHover(k,j)},_handleMouseOut:function(l,j){var k=this._hoveredLayer;if(k&&(l.type==="mouseout"||!k._containsPoint(j))){g.DomUtil.removeClass(this._container,"leaflet-interactive");this._fireEvent([k],l,"mouseout");this._hoveredLayer=null}},_handleMouseHover:function(l,j){var m,k;for(m in this._drawnLayers){k=this._drawnLayers[m];if(k.options.interactive&&k._containsPoint(j)){g.DomUtil.addClass(this._container,"leaflet-interactive");this._fireEvent([k],l,"mouseover");this._hoveredLayer=k}}if(this._hoveredLayer){this._fireEvent([this._hoveredLayer],l)}},_fireEvent:function(l,k,j){this._map._fireDOMEvent(k,j||k.type,l)},_bringToFront:g.Util.falseFn,_bringToBack:g.Util.falseFn});g.Browser.canvas=(function(){return !!f.createElement("canvas").getContext}());g.canvas=function(j){return g.Browser.canvas?new g.Canvas(j):null};g.Polyline.prototype._containsPoint=function(l,s){var r,q,n,t,o,m,u=this._clickTolerance();if(!this._pxBounds.contains(l)){return false}for(r=0,t=this._parts.length;r<t;r++){m=this._parts[r];for(q=0,o=m.length,n=o-1;q<o;n=q++){if(!s&&(q===0)){continue}if(g.LineUtil.pointToSegmentDistance(l,m[n],m[q])<=u){return true}}}return false};g.Polygon.prototype._containsPoint=function(l){var n=false,m,v,u,s,r,q,t,o;if(!this._pxBounds.contains(l)){return false}for(s=0,t=this._parts.length;s<t;s++){m=this._parts[s];for(r=0,o=m.length,q=o-1;r<o;q=r++){v=m[r];u=m[q];if(((v.y>l.y)!==(u.y>l.y))&&(l.x<(u.x-v.x)*(l.y-v.y)/(u.y-v.y)+v.x)){n=!n}}}return n||g.Polyline.prototype._containsPoint.call(this,l,true)};g.CircleMarker.prototype._containsPoint=function(j){return j.distanceTo(this._point)<=this._radius+this._clickTolerance()};g.GeoJSON=g.FeatureGroup.extend({initialize:function(k,j){g.setOptions(this,j);this._layers={};if(k){this.addData(k)}},addData:function(l){var p=g.Util.isArray(l)?l:l.features,o,j,n;if(p){for(o=0,j=p.length;o<j;o++){n=p[o];if(n.geometries||n.geometry||n.features||n.coordinates){this.addData(n)}}return this}var k=this.options;if(k.filter&&!k.filter(l)){return this}var m=g.GeoJSON.geometryToLayer(l,k);if(!m){return this}m.feature=g.GeoJSON.asFeature(l);m.defaultOptions=m.options;this.resetStyle(m);if(k.onEachFeature){k.onEachFeature(l,m)}return this.addLayer(m)},resetStyle:function(j){j.options=g.Util.extend({},j.defaultOptions);this._setLayerStyle(j,this.options.style);return this},setStyle:function(j){return this.eachLayer(function(k){this._setLayerStyle(k,j)},this)},_setLayerStyle:function(j,k){if(typeof k==="function"){k=k(j.feature)}if(j.setStyle){j.setStyle(k)}}});g.extend(g.GeoJSON,{geometryToLayer:function(k,u){var s=k.type==="Feature"?k.geometry:k,t=s?s.coordinates:null,p=[],l=u&&u.pointToLayer,m=u&&u.coordsToLatLng||this.coordsToLatLng,n,j,o,r;if(!t&&!s){return null}switch(s.type){case"Point":n=m(t);return l?l(k,n):new g.Marker(n);case"MultiPoint":for(o=0,r=t.length;o<r;o++){n=m(t[o]);p.push(l?l(k,n):new g.Marker(n))}return new g.FeatureGroup(p);case"LineString":case"MultiLineString":j=this.coordsToLatLngs(t,s.type==="LineString"?0:1,m);return new g.Polyline(j,u);case"Polygon":case"MultiPolygon":j=this.coordsToLatLngs(t,s.type==="Polygon"?1:2,m);return new g.Polygon(j,u);case"GeometryCollection":for(o=0,r=s.geometries.length;o<r;o++){var q=this.geometryToLayer({geometry:s.geometries[o],type:"Feature",properties:k.properties},u);if(q){p.push(q)}}return new g.FeatureGroup(p);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(j){return new g.LatLng(j[1],j[0],j[2])},coordsToLatLngs:function(n,m,p){var k=[];for(var l=0,j=n.length,o;l<j;l++){o=m?this.coordsToLatLngs(n[l],m-1,p):(p||this.coordsToLatLng)(n[l]);k.push(o)}return k},latLngToCoords:function(j){return j.alt!==b?[j.lng,j.lat,j.alt]:[j.lng,j.lat]},latLngsToCoords:function(k,o,l){var n=[];for(var m=0,j=k.length;m<j;m++){n.push(o?g.GeoJSON.latLngsToCoords(k[m],o-1,l):g.GeoJSON.latLngToCoords(k[m]))}if(!o&&l){n.push(n[0])}return n},getFeature:function(k,j){return k.feature?g.extend({},k.feature,{geometry:j}):g.GeoJSON.asFeature(j)
},asFeature:function(j){if(j.type==="Feature"){return j}return{type:"Feature",properties:{},geometry:j}}});var e={toGeoJSON:function(){return g.GeoJSON.getFeature(this,{type:"Point",coordinates:g.GeoJSON.latLngToCoords(this.getLatLng())})}};g.Marker.include(e);g.Circle.include(e);g.CircleMarker.include(e);g.Polyline.prototype.toGeoJSON=function(){var k=!g.Polyline._flat(this._latlngs);var j=g.GeoJSON.latLngsToCoords(this._latlngs,k?1:0);return g.GeoJSON.getFeature(this,{type:(k?"Multi":"")+"LineString",coordinates:j})};g.Polygon.prototype.toGeoJSON=function(){var j=!g.Polyline._flat(this._latlngs),l=j&&!g.Polyline._flat(this._latlngs[0]);var k=g.GeoJSON.latLngsToCoords(this._latlngs,l?2:j?1:0,true);if(!j){k=[k]}return g.GeoJSON.getFeature(this,{type:(l?"Multi":"")+"Polygon",coordinates:k})};g.LayerGroup.include({toMultiPoint:function(){var j=[];this.eachLayer(function(k){j.push(k.toGeoJSON().geometry.coordinates)});return g.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:j})},toGeoJSON:function(){var k=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(k==="MultiPoint"){return this.toMultiPoint()}var j=k==="GeometryCollection",l=[];this.eachLayer(function(n){if(n.toGeoJSON){var m=n.toGeoJSON();l.push(j?m.geometry:g.GeoJSON.asFeature(m))}});if(j){return g.GeoJSON.getFeature(this,{geometries:l,type:"GeometryCollection"})}return{type:"FeatureCollection",features:l}}});g.geoJSON=function(k,j){return new g.GeoJSON(k,j)};g.geoJson=g.geoJSON;var i="_leaflet_events";g.DomEvent={on:function(p,m,o,l){if(typeof m==="object"){for(var n in m){this._on(p,n,m[n],o)}}else{m=g.Util.splitWords(m);for(var k=0,j=m.length;k<j;k++){this._on(p,m[k],o,l)}}return this},off:function(p,m,o,l){if(typeof m==="object"){for(var n in m){this._off(p,n,m[n],o)}}else{m=g.Util.splitWords(m);for(var k=0,j=m.length;k<j;k++){this._off(p,m[k],o,l)}}return this},_on:function(o,n,m,k){var p=n+g.stamp(m)+(k?"_"+g.stamp(k):"");if(o[i]&&o[i][p]){return this}var l=function(q){return m.call(k||o,q||d.event)};var j=l;if(g.Browser.pointer&&n.indexOf("touch")===0){this.addPointerListener(o,n,l,p)}else{if(g.Browser.touch&&(n==="dblclick")&&this.addDoubleTapListener){this.addDoubleTapListener(o,l,p)}else{if("addEventListener" in o){if(n==="mousewheel"){o.addEventListener("onwheel" in o?"wheel":"mousewheel",l,false)}else{if((n==="mouseenter")||(n==="mouseleave")){l=function(q){q=q||d.event;if(g.DomEvent._isExternalTarget(o,q)){j(q)}};o.addEventListener(n==="mouseenter"?"mouseover":"mouseout",l,false)}else{if(n==="click"&&g.Browser.android){l=function(q){return g.DomEvent._filterClick(q,j)}}o.addEventListener(n,l,false)}}}else{if("attachEvent" in o){o.attachEvent("on"+n,l)}}}}o[i]=o[i]||{};o[i][p]=l;return this},_off:function(n,m,l,j){var o=m+g.stamp(l)+(j?"_"+g.stamp(j):""),k=n[i]&&n[i][o];if(!k){return this}if(g.Browser.pointer&&m.indexOf("touch")===0){this.removePointerListener(n,m,o)}else{if(g.Browser.touch&&(m==="dblclick")&&this.removeDoubleTapListener){this.removeDoubleTapListener(n,o)}else{if("removeEventListener" in n){if(m==="mousewheel"){n.removeEventListener("onwheel" in n?"wheel":"mousewheel",k,false)}else{n.removeEventListener(m==="mouseenter"?"mouseover":m==="mouseleave"?"mouseout":m,k,false)}}else{if("detachEvent" in n){n.detachEvent("on"+m,k)}}}}n[i][o]=null;return this},stopPropagation:function(j){if(j.stopPropagation){j.stopPropagation()}else{if(j.originalEvent){j.originalEvent._stopped=true}else{j.cancelBubble=true}}g.DomEvent._skipped(j);return this},disableScrollPropagation:function(j){return g.DomEvent.on(j,"mousewheel",g.DomEvent.stopPropagation)},disableClickPropagation:function(k){var j=g.DomEvent.stopPropagation;g.DomEvent.on(k,g.Draggable.START.join(" "),j);return g.DomEvent.on(k,{click:g.DomEvent._fakeStop,dblclick:j})},preventDefault:function(j){if(j.preventDefault){j.preventDefault()}else{j.returnValue=false}return this},stop:function(j){return g.DomEvent.preventDefault(j).stopPropagation(j)},getMousePosition:function(l,j){if(!j){return new g.Point(l.clientX,l.clientY)}var k=j.getBoundingClientRect();return new g.Point(l.clientX-k.left-j.clientLeft,l.clientY-k.top-j.clientTop)},_wheelPxFactor:(g.Browser.win&&g.Browser.chrome)?2:g.Browser.gecko?d.devicePixelRatio:1,getWheelDelta:function(j){return(g.Browser.edge)?j.wheelDeltaY/2:(j.deltaY&&j.deltaMode===0)?-j.deltaY/g.DomEvent._wheelPxFactor:(j.deltaY&&j.deltaMode===1)?-j.deltaY*20:(j.deltaY&&j.deltaMode===2)?-j.deltaY*60:(j.deltaX||j.deltaZ)?0:j.wheelDelta?(j.wheelDeltaY||j.wheelDelta)/2:(j.detail&&Math.abs(j.detail)<32765)?-j.detail*20:j.detail?j.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(j){g.DomEvent._skipEvents[j.type]=true},_skipped:function(k){var j=this._skipEvents[k.type];this._skipEvents[k.type]=false;return j},_isExternalTarget:function(j,m){var l=m.relatedTarget;if(!l){return true}try{while(l&&(l!==j)){l=l.parentNode}}catch(k){return false}return(l!==j)},_filterClick:function(m,l){var k=(m.timeStamp||(m.originalEvent&&m.originalEvent.timeStamp)),j=g.DomEvent._lastClick&&(k-g.DomEvent._lastClick);
    if((j&&j>100&&j<500)||(m.target._simulatedClick&&!m._simulated)){g.DomEvent.stop(m);return}g.DomEvent._lastClick=k;l(m)}};g.DomEvent.addListener=g.DomEvent.on;g.DomEvent.removeListener=g.DomEvent.off;g.Draggable=g.Evented.extend({options:{clickTolerance:3},statics:{START:g.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(k,l,j){this._element=k;this._dragStartTarget=l||k;this._preventOutline=j},enable:function(){if(this._enabled){return}g.DomEvent.on(this._dragStartTarget,g.Draggable.START.join(" "),this._onDown,this);this._enabled=true},disable:function(){if(!this._enabled){return}g.DomEvent.off(this._dragStartTarget,g.Draggable.START.join(" "),this._onDown,this);this._enabled=false;this._moved=false},_onDown:function(j){if(j._simulated||!this._enabled){return}this._moved=false;if(g.DomUtil.hasClass(this._element,"leaflet-zoom-anim")){return}if(g.Draggable._dragging||j.shiftKey||((j.which!==1)&&(j.button!==1)&&!j.touches)||!this._enabled){return}g.Draggable._dragging=true;if(this._preventOutline){g.DomUtil.preventOutline(this._element)}g.DomUtil.disableImageDrag();g.DomUtil.disableTextSelection();if(this._moving){return}this.fire("down");var k=j.touches?j.touches[0]:j;this._startPoint=new g.Point(k.clientX,k.clientY);g.DomEvent.on(f,g.Draggable.MOVE[j.type],this._onMove,this).on(f,g.Draggable.END[j.type],this._onUp,this)},_onMove:function(k){if(k._simulated||!this._enabled){return}if(k.touches&&k.touches.length>1){this._moved=true;return}var m=(k.touches&&k.touches.length===1?k.touches[0]:k),j=new g.Point(m.clientX,m.clientY),l=j.subtract(this._startPoint);if(!l.x&&!l.y){return}if(Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance){return}g.DomEvent.preventDefault(k);if(!this._moved){this.fire("dragstart");this._moved=true;this._startPos=g.DomUtil.getPosition(this._element).subtract(l);g.DomUtil.addClass(f.body,"leaflet-dragging");this._lastTarget=k.target||k.srcElement;if((d.SVGElementInstance)&&(this._lastTarget instanceof SVGElementInstance)){this._lastTarget=this._lastTarget.correspondingUseElement}g.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")}this._newPos=this._startPos.add(l);this._moving=true;g.Util.cancelAnimFrame(this._animRequest);this._lastEvent=k;this._animRequest=g.Util.requestAnimFrame(this._updatePosition,this,true)},_updatePosition:function(){var j={originalEvent:this._lastEvent};this.fire("predrag",j);g.DomUtil.setPosition(this._element,this._newPos);this.fire("drag",j)},_onUp:function(k){if(k._simulated||!this._enabled){return}g.DomUtil.removeClass(f.body,"leaflet-dragging");if(this._lastTarget){g.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target");this._lastTarget=null}for(var j in g.Draggable.MOVE){g.DomEvent.off(f,g.Draggable.MOVE[j],this._onMove,this).off(f,g.Draggable.END[j],this._onUp,this)}g.DomUtil.enableImageDrag();g.DomUtil.enableTextSelection();if(this._moved&&this._moving){g.Util.cancelAnimFrame(this._animRequest);this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})}this._moving=false;g.Draggable._dragging=false}});g.Handler=g.Class.extend({initialize:function(j){this._map=j},enable:function(){if(this._enabled){return this}this._enabled=true;this.addHooks();return this},disable:function(){if(!this._enabled){return this}this._enabled=false;this.removeHooks();return this},enabled:function(){return !!this._enabled}});g.Map.mergeOptions({dragging:true,inertia:!g.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:0.2,worldCopyJump:false,maxBoundsViscosity:0});g.Map.Drag=g.Handler.extend({addHooks:function(){if(!this._draggable){var j=this._map;this._draggable=new g.Draggable(j._mapPane,j._container);this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);this._draggable.on("predrag",this._onPreDragLimit,this);if(j.options.worldCopyJump){this._draggable.on("predrag",this._onPreDragWrap,this);j.on("zoomend",this._onZoomEnd,this);j.whenReady(this._onZoomEnd,this)}}g.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag");this._draggable.enable();this._positions=[];this._times=[]},removeHooks:function(){g.DomUtil.removeClass(this._map._container,"leaflet-grab");g.DomUtil.removeClass(this._map._container,"leaflet-touch-drag");this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var k=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var j=g.latLngBounds(this._map.options.maxBounds);this._offsetLimit=g.bounds(this._map.latLngToContainerPoint(j.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(j.getSouthEast()).multiplyBy(-1).add(this._map.getSize()));
    this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else{this._offsetLimit=null}k.fire("movestart").fire("dragstart");if(k.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(k){if(this._map.options.inertia){var j=this._lastTime=+new Date(),l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l);this._times.push(j);if(j-this._times[0]>50){this._positions.shift();this._times.shift()}}this._map.fire("move",k).fire("drag",k)},_onZoomEnd:function(){var k=this._map.getSize().divideBy(2),j=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=j.subtract(k).x;this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(k,j){return k-(k-j)*this._viscosity},_onPreDragLimit:function(){if(!this._viscosity||!this._offsetLimit){return}var k=this._draggable._newPos.subtract(this._draggable._startPos);var j=this._offsetLimit;if(k.x<j.min.x){k.x=this._viscousLimit(k.x,j.min.x)}if(k.y<j.min.y){k.y=this._viscousLimit(k.y,j.min.y)}if(k.x>j.max.x){k.x=this._viscousLimit(k.x,j.max.x)}if(k.y>j.max.y){k.y=this._viscousLimit(k.y,j.max.y)}this._draggable._newPos=this._draggable._startPos.add(k)},_onPreDragWrap:function(){var p=this._worldWidth,o=Math.round(p/2),k=this._initialWorldOffset,j=this._draggable._newPos.x,m=(j-o+k)%p+o-k,l=(j+o+k)%p-o-k,n=Math.abs(m+k)<Math.abs(l+k)?m:l;this._draggable._absPos=this._draggable._newPos.clone();this._draggable._newPos.x=n},_onDragEnd:function(r){var k=this._map,v=k.options,j=!v.inertia||this._times.length<2;k.fire("dragend",r);if(j){k.fire("moveend")}else{var s=this._lastPos.subtract(this._positions[0]),p=(this._lastTime-this._times[0])/1000,o=v.easeLinearity,n=s.multiplyBy(o/p),m=n.distanceTo([0,0]),u=Math.min(v.inertiaMaxSpeed,m),t=n.multiplyBy(u/m),l=u/(v.inertiaDeceleration*o),q=t.multiplyBy(-l/2).round();if(!q.x&&!q.y){k.fire("moveend")}else{q=k._limitOffset(q,k.options.maxBounds);g.Util.requestAnimFrame(function(){k.panBy(q,{duration:l,easeLinearity:o,noMoveStart:true,animate:true})})}}}});g.Map.addInitHook("addHandler","dragging",g.Map.Drag);g.Map.mergeOptions({doubleClickZoom:true});g.Map.DoubleClickZoom=g.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(m){var l=this._map,k=l.getZoom(),n=l.options.zoomDelta,j=m.originalEvent.shiftKey?k-n:k+n;if(l.options.doubleClickZoom==="center"){l.setZoom(j)}else{l.setZoomAround(m.containerPoint,j)}}});g.Map.addInitHook("addHandler","doubleClickZoom",g.Map.DoubleClickZoom);g.Map.mergeOptions({scrollWheelZoom:true,wheelDebounceTime:40,wheelPxPerZoomLevel:60});g.Map.ScrollWheelZoom=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);this._delta=0},removeHooks:function(){g.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var m=g.DomEvent.getWheelDelta(l);var j=this._map.options.wheelDebounceTime;this._delta+=m;this._lastMousePos=this._map.mouseEventToContainerPoint(l);if(!this._startTime){this._startTime=+new Date()}var k=Math.max(j-(+new Date()-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(g.bind(this._performZoom,this),k);g.DomEvent.stop(l)},_performZoom:function(){var o=this._map,n=o.getZoom(),j=this._map.options.zoomSnap||0;o._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),l=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,k=j?Math.ceil(l/j)*j:l,p=o._limitZoom(n+(this._delta>0?k:-k))-n;this._delta=0;this._startTime=null;if(!p){return}if(o.options.scrollWheelZoom==="center"){o.setZoom(n+p)}else{o.setZoomAround(this._lastMousePos,n+p)}}});g.Map.addInitHook("addHandler","scrollWheelZoom",g.Map.ScrollWheelZoom);g.extend(g.DomEvent,{_touchstart:g.Browser.msPointer?"MSPointerDown":g.Browser.pointer?"pointerdown":"touchstart",_touchend:g.Browser.msPointer?"MSPointerUp":g.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(m,u,j){var t,l,q=false,o=250;function n(x){var w;if(g.Browser.pointer){w=g.DomEvent._pointersCount}else{w=x.touches.length}if(w>1){return}var v=Date.now(),y=v-(t||v);l=x.touches?x.touches[0]:x;q=(y>0&&y<=o);t=v}function r(){if(q&&!l.cancelBubble){if(g.Browser.pointer){var v={},x,w;for(w in l){x=l[w];v[w]=x&&x.bind?x.bind(l):x}l=v}l.type="dblclick";u(l);t=null}}var k="_leaflet_",p=this._touchstart,s=this._touchend;m[k+p+j]=n;m[k+s+j]=r;m[k+"dblclick"+j]=u;m.addEventListener(p,n,false);m.addEventListener(s,r,false);if(!g.Browser.edge){m.addEventListener("dblclick",u,false)}return this},removeDoubleTapListener:function(l,o){var k="_leaflet_",n=l[k+this._touchstart+o],m=l[k+this._touchend+o],j=l[k+"dblclick"+o];l.removeEventListener(this._touchstart,n,false);l.removeEventListener(this._touchend,m,false);if(!g.Browser.edge){l.removeEventListener("dblclick",j,false)}return this}});g.extend(g.DomEvent,{POINTER_DOWN:g.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:g.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:g.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:g.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(l,k,j,m){if(k==="touchstart"){this._addPointerStart(l,j,m)
}else{if(k==="touchmove"){this._addPointerMove(l,j,m)}else{if(k==="touchend"){this._addPointerEnd(l,j,m)}}}return this},removePointerListener:function(l,k,m){var j=l["_leaflet_"+k+m];if(k==="touchstart"){l.removeEventListener(this.POINTER_DOWN,j,false)}else{if(k==="touchmove"){l.removeEventListener(this.POINTER_MOVE,j,false)}else{if(k==="touchend"){l.removeEventListener(this.POINTER_UP,j,false);l.removeEventListener(this.POINTER_CANCEL,j,false)}}}return this},_addPointerStart:function(l,j,n){var k=g.bind(function(o){if(o.pointerType!=="mouse"&&o.pointerType!==o.MSPOINTER_TYPE_MOUSE){if(this.TAG_WHITE_LIST.indexOf(o.target.tagName)<0){g.DomEvent.preventDefault(o)}else{return}}this._handlePointer(o,j)},this);l["_leaflet_touchstart"+n]=k;l.addEventListener(this.POINTER_DOWN,k,false);if(!this._pointerDocListener){var m=g.bind(this._globalPointerUp,this);f.documentElement.addEventListener(this.POINTER_DOWN,g.bind(this._globalPointerDown,this),true);f.documentElement.addEventListener(this.POINTER_MOVE,g.bind(this._globalPointerMove,this),true);f.documentElement.addEventListener(this.POINTER_UP,m,true);f.documentElement.addEventListener(this.POINTER_CANCEL,m,true);this._pointerDocListener=true}},_globalPointerDown:function(j){this._pointers[j.pointerId]=j;this._pointersCount++},_globalPointerMove:function(j){if(this._pointers[j.pointerId]){this._pointers[j.pointerId]=j}},_globalPointerUp:function(j){delete this._pointers[j.pointerId];this._pointersCount--},_handlePointer:function(l,k){l.touches=[];for(var j in this._pointers){l.touches.push(this._pointers[j])}l.changedTouches=[l];k(l)},_addPointerMove:function(k,j,m){var l=g.bind(function(n){if((n.pointerType===n.MSPOINTER_TYPE_MOUSE||n.pointerType==="mouse")&&n.buttons===0){return}this._handlePointer(n,j)},this);k["_leaflet_touchmove"+m]=l;k.addEventListener(this.POINTER_MOVE,l,false)},_addPointerEnd:function(k,j,m){var l=g.bind(function(n){this._handlePointer(n,j)},this);k["_leaflet_touchend"+m]=l;k.addEventListener(this.POINTER_UP,l,false);k.addEventListener(this.POINTER_CANCEL,l,false)}});g.Map.mergeOptions({touchZoom:g.Browser.touch&&!g.Browser.android23,bounceAtZoomLimits:true});g.Map.TouchZoom=g.Handler.extend({addHooks:function(){g.DomUtil.addClass(this._map._container,"leaflet-touch-zoom");g.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){g.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom");g.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var k=this._map;if(!l.touches||l.touches.length!==2||k._animatingZoom||this._zooming){return}var m=k.mouseEventToContainerPoint(l.touches[0]),j=k.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=k.getSize()._divideBy(2);this._startLatLng=k.containerPointToLatLng(this._centerPoint);if(k.options.touchZoom!=="center"){this._pinchStartLatLng=k.containerPointToLatLng(m.add(j)._divideBy(2))}this._startDist=m.distanceTo(j);this._startZoom=k.getZoom();this._moved=false;this._zooming=true;k._stop();g.DomEvent.on(f,"touchmove",this._onTouchMove,this).on(f,"touchend",this._onTouchEnd,this);g.DomEvent.preventDefault(l)},_onTouchMove:function(m){if(!m.touches||m.touches.length!==2||!this._zooming){return}var l=this._map,o=l.mouseEventToContainerPoint(m.touches[0]),k=l.mouseEventToContainerPoint(m.touches[1]),n=o.distanceTo(k)/this._startDist;this._zoom=l.getScaleZoom(n,this._startZoom);if(!l.options.bounceAtZoomLimits&&((this._zoom<l.getMinZoom()&&n<1)||(this._zoom>l.getMaxZoom()&&n>1))){this._zoom=l._limitZoom(this._zoom)}if(l.options.touchZoom==="center"){this._center=this._startLatLng;if(n===1){return}}else{var p=o._add(k)._divideBy(2)._subtract(this._centerPoint);if(n===1&&p.x===0&&p.y===0){return}this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(p),this._zoom)}if(!this._moved){l._moveStart(true);this._moved=true}g.Util.cancelAnimFrame(this._animRequest);var j=g.bind(l._move,l,this._center,this._zoom,{pinch:true,round:false});this._animRequest=g.Util.requestAnimFrame(j,this,true);g.DomEvent.preventDefault(m)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return}this._zooming=false;g.Util.cancelAnimFrame(this._animRequest);g.DomEvent.off(f,"touchmove",this._onTouchMove).off(f,"touchend",this._onTouchEnd);if(this._map.options.zoomAnimation){this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),true,this._map.options.zoomSnap)}else{this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}});g.Map.addInitHook("addHandler","touchZoom",g.Map.TouchZoom);g.Map.mergeOptions({tap:true,tapTolerance:15});g.Map.Tap=g.Handler.extend({addHooks:function(){g.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){g.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(k){if(!k.touches){return}g.DomEvent.preventDefault(k);this._fireClick=true;if(k.touches.length>1){this._fireClick=false;
    clearTimeout(this._holdTimeout);return}var l=k.touches[0],j=l.target;this._startPos=this._newPos=new g.Point(l.clientX,l.clientY);if(j.tagName&&j.tagName.toLowerCase()==="a"){g.DomUtil.addClass(j,"leaflet-active")}this._holdTimeout=setTimeout(g.bind(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent("contextmenu",l)}},this),1000);this._simulateEvent("mousedown",l);g.DomEvent.on(f,{touchmove:this._onMove,touchend:this._onUp},this)},_onUp:function(k){clearTimeout(this._holdTimeout);g.DomEvent.off(f,{touchmove:this._onMove,touchend:this._onUp},this);if(this._fireClick&&k&&k.changedTouches){var l=k.changedTouches[0],j=l.target;if(j&&j.tagName&&j.tagName.toLowerCase()==="a"){g.DomUtil.removeClass(j,"leaflet-active")}this._simulateEvent("mouseup",l);if(this._isTapValid()){this._simulateEvent("click",l)}}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(j){var k=j.touches[0];this._newPos=new g.Point(k.clientX,k.clientY);this._simulateEvent("mousemove",k)},_simulateEvent:function(j,l){var k=f.createEvent("MouseEvents");k._simulated=true;l.target._simulatedClick=true;k.initMouseEvent(j,true,true,d,1,l.screenX,l.screenY,l.clientX,l.clientY,false,false,false,false,0,null);l.target.dispatchEvent(k)}});if(g.Browser.touch&&!g.Browser.pointer){g.Map.addInitHook("addHandler","tap",g.Map.Tap)}g.Map.mergeOptions({boxZoom:true});g.Map.BoxZoom=g.Handler.extend({initialize:function(j){this._map=j;this._container=j._container;this._pane=j._panes.overlayPane},addHooks:function(){g.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){g.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=false},_onMouseDown:function(j){if(!j.shiftKey||((j.which!==1)&&(j.button!==1))){return false}this._resetState();g.DomUtil.disableTextSelection();g.DomUtil.disableImageDrag();this._startPoint=this._map.mouseEventToContainerPoint(j);g.DomEvent.on(f,{contextmenu:g.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){if(!this._moved){this._moved=true;this._box=g.DomUtil.create("div","leaflet-zoom-box",this._container);g.DomUtil.addClass(this._container,"leaflet-crosshair");this._map.fire("boxzoomstart")}this._point=this._map.mouseEventToContainerPoint(l);var k=new g.Bounds(this._point,this._startPoint),j=k.getSize();g.DomUtil.setPosition(this._box,k.min);this._box.style.width=j.x+"px";this._box.style.height=j.y+"px"},_finish:function(){if(this._moved){g.DomUtil.remove(this._box);g.DomUtil.removeClass(this._container,"leaflet-crosshair")}g.DomUtil.enableTextSelection();g.DomUtil.enableImageDrag();g.DomEvent.off(f,{contextmenu:g.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(k){if((k.which!==1)&&(k.button!==1)){return}this._finish();if(!this._moved){return}setTimeout(g.bind(this._resetState,this),0);var j=new g.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(j).fire("boxzoomend",{boxZoomBounds:j})},_onKeyDown:function(j){if(j.keyCode===27){this._finish()}}});g.Map.addInitHook("addHandler","boxZoom",g.Map.BoxZoom);g.Map.mergeOptions({keyboard:true,keyboardPanDelta:80});g.Map.Keyboard=g.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(j){this._map=j;this._setPanDelta(j.options.keyboardPanDelta);this._setZoomDelta(j.options.zoomDelta)},addHooks:function(){var j=this._map._container;if(j.tabIndex<=0){j.tabIndex="0"}g.DomEvent.on(j,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks();g.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this);this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(this._focused){return}var j=f.body,m=f.documentElement,l=j.scrollTop||m.scrollTop,k=j.scrollLeft||m.scrollLeft;this._map._container.focus();d.scrollTo(k,l)},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanDelta:function(n){var m=this._panKeys={},k=this.keyCodes,l,j;for(l=0,j=k.left.length;l<j;l++){m[k.left[l]]=[-1*n,0]}for(l=0,j=k.right.length;l<j;l++){m[k.right[l]]=[n,0]}for(l=0,j=k.down.length;l<j;l++){m[k.down[l]]=[0,n]}for(l=0,j=k.up.length;l<j;l++){m[k.up[l]]=[0,-1*n]}},_setZoomDelta:function(n){var m=this._zoomKeys={},k=this.keyCodes,l,j;for(l=0,j=k.zoomIn.length;l<j;l++){m[k.zoomIn[l]]=n}for(l=0,j=k.zoomOut.length;l<j;l++){m[k.zoomOut[l]]=-n}},_addHooks:function(){g.DomEvent.on(f,"keydown",this._onKeyDown,this)},_removeHooks:function(){g.DomEvent.off(f,"keydown",this._onKeyDown,this)
},_onKeyDown:function(l){if(l.altKey||l.ctrlKey||l.metaKey){return}var j=l.keyCode,k=this._map,m;if(j in this._panKeys){if(k._panAnim&&k._panAnim._inProgress){return}m=this._panKeys[j];if(l.shiftKey){m=g.point(m).multiplyBy(3)}k.panBy(m);if(k.options.maxBounds){k.panInsideBounds(k.options.maxBounds)}}else{if(j in this._zoomKeys){k.setZoom(k.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[j])}else{if(j===27){k.closePopup()}else{return}}}g.DomEvent.stop(l)}});g.Map.addInitHook("addHandler","keyboard",g.Map.Keyboard);g.Handler.MarkerDrag=g.Handler.extend({initialize:function(j){this._marker=j},addHooks:function(){var j=this._marker._icon;if(!this._draggable){this._draggable=new g.Draggable(j,j,true)}this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable();g.DomUtil.addClass(j,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable();if(this._marker._icon){g.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")}},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng();this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(l){var j=this._marker,n=j._shadow,k=g.DomUtil.getPosition(j._icon),m=j._map.layerPointToLatLng(k);if(n){g.DomUtil.setPosition(n,k)}j._latlng=m;l.latlng=m;l.oldLatLng=this._oldLatLng;j.fire("move",l).fire("drag",l)},_onDragEnd:function(j){delete this._oldLatLng;this._marker.fire("moveend").fire("dragend",j)}});g.Control=g.Class.extend({options:{position:"topright"},initialize:function(j){g.setOptions(this,j)},getPosition:function(){return this.options.position},setPosition:function(j){var k=this._map;if(k){k.removeControl(this)}this.options.position=j;if(k){k.addControl(this)}return this},getContainer:function(){return this._container},addTo:function(l){this.remove();this._map=l;var j=this._container=this.onAdd(l),m=this.getPosition(),k=l._controlCorners[m];g.DomUtil.addClass(j,"leaflet-control");if(m.indexOf("bottom")!==-1){k.insertBefore(j,k.firstChild)}else{k.appendChild(j)}return this},remove:function(){if(!this._map){return this}g.DomUtil.remove(this._container);if(this.onRemove){this.onRemove(this._map)}this._map=null;return this},_refocusOnMap:function(j){if(this._map&&j&&j.screenX>0&&j.screenY>0){this._map.getContainer().focus()}}});g.control=function(j){return new g.Control(j)};g.Map.include({addControl:function(j){j.addTo(this);return this},removeControl:function(j){j.remove();return this},_initControlPos:function(){var m=this._controlCorners={},k="leaflet-",j=this._controlContainer=g.DomUtil.create("div",k+"control-container",this._container);function n(o,p){var l=k+o+" "+k+p;m[o+p]=g.DomUtil.create("div",l,j)}n("top","left");n("top","right");n("bottom","left");n("bottom","right")},_clearControlPos:function(){g.DomUtil.remove(this._controlContainer)}});g.Control.Zoom=g.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"",zoomOutText:"-",zoomOutTitle:""},onAdd:function(l){var m="leaflet-control-zoom",j=g.DomUtil.create("div",m+" leaflet-bar"),k=this.options;this._zoomInButton=this._createButton(k.zoomInText,k.zoomInTitle,m+"-in",j,this._zoomIn);this._zoomOutButton=this._createButton(k.zoomOutText,k.zoomOutTitle,m+"-out",j,this._zoomOut);this._updateDisabled();l.on("zoomend zoomlevelschange",this._updateDisabled,this);return j},onRemove:function(j){j.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){this._disabled=true;this._updateDisabled();return this},enable:function(){this._disabled=false;this._updateDisabled();return this},_zoomIn:function(j){if(!this._disabled&&this._map._zoom<this._map.getMaxZoom()){this._map.zoomIn(this._map.options.zoomDelta*(j.shiftKey?3:1))}},_zoomOut:function(j){if(!this._disabled&&this._map._zoom>this._map.getMinZoom()){this._map.zoomOut(this._map.options.zoomDelta*(j.shiftKey?3:1))}},_createButton:function(k,o,m,j,l){var n=g.DomUtil.create("a",m,j);n.innerHTML=k;n.href="#";n.title=o;g.DomEvent.on(n,"mousedown dblclick",g.DomEvent.stopPropagation).on(n,"click",g.DomEvent.stop).on(n,"click",l,this).on(n,"click",this._refocusOnMap,this);return n},_updateDisabled:function(){var k=this._map,j="leaflet-disabled";g.DomUtil.removeClass(this._zoomInButton,j);g.DomUtil.removeClass(this._zoomOutButton,j);if(this._disabled||k._zoom===k.getMinZoom()){g.DomUtil.addClass(this._zoomOutButton,j)}if(this._disabled||k._zoom===k.getMaxZoom()){g.DomUtil.addClass(this._zoomInButton,j)}}});g.Map.mergeOptions({zoomControl:true});g.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new g.Control.Zoom();this.addControl(this.zoomControl)}});g.control.zoom=function(j){return new g.Control.Zoom(j)};g.Control.Attribution=g.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(j){g.setOptions(this,j);
    this._attributions={}},onAdd:function(k){k.attributionControl=this;this._container=g.DomUtil.create("div","leaflet-control-attribution");if(g.DomEvent){g.DomEvent.disableClickPropagation(this._container)}for(var j in k._layers){if(k._layers[j].getAttribution){this.addAttribution(k._layers[j].getAttribution())}}this._update();return this._container},setPrefix:function(j){this.options.prefix=j;this._update();return this},addAttribution:function(j){if(!j){return this}if(!this._attributions[j]){this._attributions[j]=0}this._attributions[j]++;this._update();return this},removeAttribution:function(j){if(!j){return this}if(this._attributions[j]){this._attributions[j]--;this._update()}return this},_update:function(){if(!this._map){return}var l=[];for(var j in this._attributions){if(this._attributions[j]){l.push(j)}}var k=[];if(this.options.prefix){k.push(this.options.prefix)}if(l.length){k.push(l.join(", "))}this._container.innerHTML=k.join(" | ")}});g.Map.mergeOptions({attributionControl:true});g.Map.addInitHook(function(){if(this.options.attributionControl){new g.Control.Attribution().addTo(this)}});g.control.attribution=function(j){return new g.Control.Attribution(j)};g.Control.Scale=g.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true},onAdd:function(m){var l="leaflet-control-scale",j=g.DomUtil.create("div",l),k=this.options;this._addScales(k,l+"-line",j);m.on(k.updateWhenIdle?"moveend":"move",this._update,this);m.whenReady(this._update,this);return j},onRemove:function(j){j.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(k,l,j){if(k.metric){this._mScale=g.DomUtil.create("div",l,j)}if(k.imperial){this._iScale=g.DomUtil.create("div",l,j)}},_update:function(){var k=this._map,l=k.getSize().y/2;var j=k.distance(k.containerPointToLatLng([0,l]),k.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(j)},_updateScales:function(j){if(this.options.metric&&j){this._updateMetric(j)}if(this.options.imperial&&j){this._updateImperial(j)}},_updateMetric:function(l){var j=this._getRoundNum(l),k=j<1000?j+" m":(j/1000)+" km";this._updateScale(this._mScale,k,j/l)},_updateImperial:function(n){var m=n*3.2808399,l,k,j;if(m>5280){l=m/5280;k=this._getRoundNum(l);this._updateScale(this._iScale,k+" mi",k/l)}else{j=this._getRoundNum(m);this._updateScale(this._iScale,j+" ft",j/m)}},_updateScale:function(l,k,j){l.style.width=Math.round(this.options.maxWidth*j)+"px";l.innerHTML=k},_getRoundNum:function(k){var j=Math.pow(10,(Math.floor(k)+"").length-1),l=k/j;l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1;return j*l}});g.control.scale=function(j){return new g.Control.Scale(j)};g.Control.Layers=g.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true,hideSingleBase:false},initialize:function(m,l,j){g.setOptions(this,j);this._layers=[];this._lastZIndex=0;this._handlingClick=false;for(var k in m){this._addLayer(m[k],k)}for(k in l){this._addLayer(l[k],k,true)}},onAdd:function(j){this._initLayout();this._update();this._map=j;j.on("zoomend",this._checkDisabledLayers,this);return this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var j=0;j<this._layers.length;j++){this._layers[j].layer.off("add remove",this._onLayerChange,this)}},addBaseLayer:function(k,j){this._addLayer(k,j);return(this._map)?this._update():this},addOverlay:function(k,j){this._addLayer(k,j,true);return(this._map)?this._update():this},removeLayer:function(j){j.off("add remove",this._onLayerChange,this);var k=this._getLayer(g.stamp(j));if(k){this._layers.splice(this._layers.indexOf(k),1)}return(this._map)?this._update():this},expand:function(){g.DomUtil.addClass(this._container,"leaflet-control-layers-expanded");this._form.style.height=null;var j=this._map.getSize().y-(this._container.offsetTop+50);if(j<this._form.clientHeight){g.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar");this._form.style.height=j+"px"}else{g.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar")}this._checkDisabledLayers();return this},collapse:function(){g.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded");return this},_initLayout:function(){var k="leaflet-control-layers",j=this._container=g.DomUtil.create("div",k);j.setAttribute("aria-haspopup",true);g.DomEvent.disableClickPropagation(j);if(!g.Browser.touch){g.DomEvent.disableScrollPropagation(j)}var m=this._form=g.DomUtil.create("form",k+"-list");if(this.options.collapsed){if(!g.Browser.android){g.DomEvent.on(j,{mouseenter:this.expand,mouseleave:this.collapse},this)}var l=this._layersLink=g.DomUtil.create("a",k+"-toggle",j);l.href="#";l.title="Layers";if(g.Browser.touch){g.DomEvent.on(l,"click",g.DomEvent.stop).on(l,"click",this.expand,this)}else{g.DomEvent.on(l,"focus",this.expand,this)}g.DomEvent.on(m,"click",function(){setTimeout(g.bind(this._onInputClick,this),0)},this);this._map.on("click",this.collapse,this)}else{this.expand()}this._baseLayersList=g.DomUtil.create("div",k+"-base",m);
    this._separator=g.DomUtil.create("div",k+"-separator",m);this._overlaysList=g.DomUtil.create("div",k+"-overlays",m);j.appendChild(m)},_getLayer:function(k){for(var j=0;j<this._layers.length;j++){if(this._layers[j]&&g.stamp(this._layers[j].layer)===k){return this._layers[j]}}},_addLayer:function(l,k,j){l.on("add remove",this._onLayerChange,this);this._layers.push({layer:l,name:k,overlay:j});if(this.options.autoZIndex&&l.setZIndex){this._lastZIndex++;l.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return this}g.DomUtil.empty(this._baseLayersList);g.DomUtil.empty(this._overlaysList);var j,m,l,n,k=0;for(l=0;l<this._layers.length;l++){n=this._layers[l];this._addItem(n);m=m||n.overlay;j=j||!n.overlay;k+=!n.overlay?1:0}if(this.options.hideSingleBase){j=j&&k>1;this._baseLayersList.style.display=j?"":"none"}this._separator.style.display=m&&j?"":"none";return this},_onLayerChange:function(l){if(!this._handlingClick){this._update()}var k=this._getLayer(g.stamp(l.target));var j=k.overlay?(l.type==="add"?"overlayadd":"overlayremove"):(l.type==="add"?"baselayerchange":null);if(j){this._map.fire(j,k)}},_createRadioElement:function(j,m){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+j+'"'+(m?' checked="checked"':"")+"/>";var k=f.createElement("div");k.innerHTML=l;return k.firstChild},_addItem:function(p){var m=f.createElement("label"),o=this._map.hasLayer(p.layer),k;if(p.overlay){k=f.createElement("input");k.type="checkbox";k.className="leaflet-control-layers-selector";k.defaultChecked=o}else{k=this._createRadioElement("leaflet-base-layers",o)}k.layerId=g.stamp(p.layer);g.DomEvent.on(k,"click",this._onInputClick,this);var l=f.createElement("span");l.innerHTML=" "+p.name;var n=f.createElement("div");m.appendChild(n);n.appendChild(k);n.appendChild(l);var j=p.overlay?this._overlaysList:this._baseLayersList;j.appendChild(m);this._checkDisabledLayers();return m},_onInputClick:function(){var k=this._form.getElementsByTagName("input"),l,p,j;var n=[],m=[];this._handlingClick=true;for(var o=k.length-1;o>=0;o--){l=k[o];p=this._getLayer(l.layerId).layer;j=this._map.hasLayer(p);if(l.checked&&!j){n.push(p)}else{if(!l.checked&&j){m.push(p)}}}for(o=0;o<m.length;o++){this._map.removeLayer(m[o])}for(o=0;o<n.length;o++){this._map.addLayer(n[o])}this._handlingClick=false;this._refocusOnMap()},_checkDisabledLayers:function(){var j=this._form.getElementsByTagName("input"),k,m,n=this._map.getZoom();for(var l=j.length-1;l>=0;l--){k=j[l];m=this._getLayer(k.layerId).layer;k.disabled=(m.options.minZoom!==b&&n<m.options.minZoom)||(m.options.maxZoom!==b&&n>m.options.maxZoom)}},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}});g.control.layers=function(l,k,j){return new g.Control.Layers(l,k,j)};g.PosAnimation=g.Evented.extend({run:function(k,j,l,m){this.stop();this._el=k;this._inProgress=true;this._duration=l||0.25;this._easeOutPower=1/Math.max(m||0.5,0.2);this._startPos=g.DomUtil.getPosition(k);this._offset=j.subtract(this._startPos);this._startTime=+new Date();this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step(true);this._complete()},_animate:function(){this._animId=g.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(k){var j=(+new Date())-this._startTime,l=this._duration*1000;if(j<l){this._runFrame(this._easeOut(j/l),k)}else{this._runFrame(1);this._complete()}},_runFrame:function(k,j){var l=this._startPos.add(this._offset.multiplyBy(k));if(j){l._round()}g.DomUtil.setPosition(this._el,l);this.fire("step")},_complete:function(){g.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire("end")},_easeOut:function(j){return 1-Math.pow(1-j,this._easeOutPower)}});g.Map.include({setView:function(j,m,k){m=m===b?this._zoom:this._limitZoom(m);j=this._limitCenter(g.latLng(j),m,this.options.maxBounds);k=k||{};this._stop();if(this._loaded&&!k.reset&&k!==true){if(k.animate!==b){k.zoom=g.extend({animate:k.animate},k.zoom);k.pan=g.extend({animate:k.animate,duration:k.duration},k.pan)}var l=(this._zoom!==m)?this._tryAnimatedZoom&&this._tryAnimatedZoom(j,m,k.zoom):this._tryAnimatedPan(j,k.pan);if(l){clearTimeout(this._sizeTimer);return this}}this._resetView(j,m);return this},panBy:function(l,j){l=g.point(l).round();j=j||{};if(!l.x&&!l.y){return this.fire("moveend")}if(j.animate!==true&&!this.getSize().contains(l)){this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom());return this}if(!this._panAnim){this._panAnim=new g.PosAnimation();this._panAnim.on({"step":this._onPanTransitionStep,"end":this._onPanTransitionEnd},this)}if(!j.noMoveStart){this.fire("movestart")}if(j.animate!==false){g.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var k=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,k,j.duration||0.25,j.easeLinearity)}else{this._rawPanBy(l);this.fire("move").fire("moveend")}return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){g.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");
    this.fire("moveend")},_tryAnimatedPan:function(j,k){var l=this._getCenterOffset(j)._floor();if((k&&k.animate)!==true&&!this.getSize().contains(l)){return false}this.panBy(l,k);return true}});g.Map.mergeOptions({zoomAnimation:true,zoomAnimationThreshold:4});var h=g.DomUtil.TRANSITION&&g.Browser.any3d&&!g.Browser.mobileOpera;if(h){g.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation;if(this._zoomAnimated){this._createAnimProxy();g.DomEvent.on(this._proxy,g.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}})}g.Map.include(!h?{}:{_createAnimProxy:function(){var j=this._proxy=g.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(j);this.on("zoomanim",function(l){var m=g.DomUtil.TRANSFORM,k=j.style[m];g.DomUtil.setTransform(j,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1));if(k===j.style[m]&&this._animatingZoom){this._onZoomTransitionEnd()}},this);this.on("load moveend",function(){var l=this.getCenter(),k=this.getZoom();g.DomUtil.setTransform(j,this.project(l,k),this.getZoomScale(k,1))},this)},_catchTransitionEnd:function(j){if(this._animatingZoom&&j.propertyName.indexOf("transform")>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return !this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(j,l,k){if(this._animatingZoom){return true}k=k||{};if(!this._zoomAnimated||k.animate===false||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold){return false}var n=this.getZoomScale(l),m=this._getCenterOffset(j)._divideBy(1-1/n);if(k.animate!==true&&!this.getSize().contains(m)){return false}g.Util.requestAnimFrame(function(){this._moveStart(true)._animateZoom(j,l,true)},this);return true},_animateZoom:function(j,m,k,l){if(k){this._animatingZoom=true;this._animateToCenter=j;this._animateToZoom=m;g.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")}this.fire("zoomanim",{center:j,zoom:m,noUpdate:l});setTimeout(g.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){if(!this._animatingZoom){return}g.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._animatingZoom=false;this._move(this._animateToCenter,this._animateToZoom);g.Util.requestAnimFrame(function(){this._moveEnd(true)},this)}});g.Map.include({flyTo:function(G,D,o){o=o||{};if(o.animate===false||!g.Browser.any3d){return this.setView(G,D,o)}this._stop();var H=this.project(this.getCenter()),m=this.project(G),F=this.getSize(),t=this._zoom;G=g.latLng(G);D=D===b?t:D;var A=Math.max(F.x,F.y),z=A*this.getZoomScale(t,D),J=(m.distanceTo(H))||1,l=1.42,s=l*l;function E(M){var K=M?-1:1,w=M?z:A,P=z*z-A*A+K*s*s*J*J,u=2*w*s*J,r=P/u,O=Math.sqrt(r*r+1)-r;var N=O<1e-9?-18:Math.log(O);return N}function x(r){return(Math.exp(r)-Math.exp(-r))/2}function k(r){return(Math.exp(r)+Math.exp(-r))/2}function n(r){return x(r)/k(r)}var I=E(0);function y(r){return A*(k(I)/k(I+l*r))}function B(r){return A*(k(I)*n(I+l*r)-x(I))/s}function v(r){return 1-Math.pow(1-r,1.5)}var q=Date.now(),p=(E(1)-I)/l,j=o.duration?1000*o.duration:1000*p*0.8;function C(){var r=(Date.now()-q)/j,u=v(r)*p;if(r<=1){this._flyToFrame=g.Util.requestAnimFrame(C,this);this._move(this.unproject(H.add(m.subtract(H).multiplyBy(B(u)/J)),t),this.getScaleZoom(A/y(u),t),{flyTo:true})}else{this._move(G,D)._moveEnd(true)}}this._moveStart(true);C.call(this);return this},flyToBounds:function(k,j){var l=this._getBoundsCenterZoom(k,j);return this.flyTo(l.center,l.zoom,j)}});g.Map.include({_defaultLocateOptions:{timeout:10000,watch:false},locate:function(j){j=this._locateOptions=g.extend({},this._defaultLocateOptions,j);if(!("geolocation" in navigator)){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var l=g.bind(this._handleGeolocationResponse,this),k=g.bind(this._handleGeolocationError,this);if(j.watch){this._locationWatchId=navigator.geolocation.watchPosition(l,k,j)}else{navigator.geolocation.getCurrentPosition(l,k,j)}return this},stopLocate:function(){if(navigator.geolocation&&navigator.geolocation.clearWatch){navigator.geolocation.clearWatch(this._locationWatchId)}if(this._locateOptions){this._locateOptions.setView=false}return this},_handleGeolocationError:function(j){var l=j.code,k=j.message||(l===1?"permission denied":(l===2?"position unavailable":"timeout"));if(this._locateOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:l,message:"Geolocation error: "+k+"."})},_handleGeolocationResponse:function(o){var n=o.coords.latitude,p=o.coords.longitude,k=new g.LatLng(n,p),j=k.toBounds(o.coords.accuracy),r=this._locateOptions;if(r.setView){var q=this.getBoundsZoom(j);this.setView(k,r.maxZoom?Math.min(q,r.maxZoom):q)}var m={latlng:k,bounds:j,timestamp:o.timestamp};for(var l in o.coords){if(typeof o.coords[l]==="number"){m[l]=o.coords[l]}}this.fire("locationfound",m)}})}(window,document));L.drawVersion="0.4.2";L.Draw={};L.drawLocal={draw:{toolbar:{actions:{title:"",text:""},finish:{title:"",text:""},undo:{title:"",text:""},buttons:{polyline:"",polygon:"",rectangle:"",circle:"",marker:""}},handlers:{circle:{tooltip:{start:""},radius:"Radius"},marker:{tooltip:{start:""}},polygon:{tooltip:{start:"",cont:"",end:""}},polyline:{error:"<strong>:</strong> !",tooltip:{start:"",cont:"",end:""}},rectangle:{tooltip:{start:""}},simpleshape:{tooltip:{end:""}}}},edit:{toolbar:{actions:{save:{title:"",text:""},cancel:{title:"",text:""},clearAll:{title:"",text:""}},buttons:{edit:"",editDisabled:"",remove:"",removeDisabled:""}},handlers:{edit:{tooltip:{text:"",subtext:""}},remove:{tooltip:{text:""}}}}};
L.Draw.Event={};L.Draw.Event.CREATED="draw:created";L.Draw.Event.EDITED="draw:edited";L.Draw.Event.DELETED="draw:deleted";L.Draw.Event.DRAWSTART="draw:drawstart";L.Draw.Event.DRAWSTOP="draw:drawstop";L.Draw.Event.DRAWVERTEX="draw:drawvertex";L.Draw.Event.EDITSTART="draw:editstart";L.Draw.Event.EDITMOVE="draw:editmove";L.Draw.Event.EDITRESIZE="draw:editresize";L.Draw.Event.EDITVERTEX="draw:editvertex";L.Draw.Event.EDITSTOP="draw:editstop";L.Draw.Event.DELETESTART="draw:deletestart";L.Draw.Event.DELETESTOP="draw:deletestop";L.Toolbar=L.Class.extend({includes:[L.Mixin.Events],initialize:function(a){L.setOptions(this,a);this._modes={};this._actionButtons=[];this._activeMode=null},enabled:function(){return this._activeMode!==null},disable:function(){if(!this.enabled()){return}this._activeMode.handler.disable()},addToolbar:function(f){var a=L.DomUtil.create("div","leaflet-draw-section"),e=0,b=this._toolbarClass||"",d=this.getModeHandlers(f),c;this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar");this._map=f;for(c=0;c<d.length;c++){if(d[c].enabled){this._initModeHandler(d[c].handler,this._toolbarContainer,e++,b,d[c].title)}}if(!e){return}this._lastButtonIndex=--e;this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions");a.appendChild(this._toolbarContainer);a.appendChild(this._actionsContainer);return a},removeToolbar:function(){for(var c in this._modes){if(this._modes.hasOwnProperty(c)){this._disposeButton(this._modes[c].button,this._modes[c].handler.enable,this._modes[c].handler);this._modes[c].handler.disable();this._modes[c].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this)}}this._modes={};for(var b=0,a=this._actionButtons.length;b<a;b++){this._disposeButton(this._actionButtons[b].button,this._actionButtons[b].callback,this)}this._actionButtons=[];this._actionsContainer=null},_initModeHandler:function(e,a,f,d,b){var c=e.type;this._modes[c]={};this._modes[c].handler=e;this._modes[c].button=this._createButton({type:c,title:b,className:d+"-"+c,container:a,callback:this._modes[c].handler.enable,context:this._modes[c].handler});this._modes[c].buttonIndex=f;this._modes[c].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_createButton:function(a){var c=L.DomUtil.create("a",a.className||"",a.container);var b=L.DomUtil.create("span","sr-only",a.container);c.href="#";c.appendChild(b);if(a.title){c.title=a.title;b.innerHTML=a.title}if(a.text){c.innerHTML=a.text;b.innerHTML=a.text}L.DomEvent.on(c,"click",L.DomEvent.stopPropagation).on(c,"mousedown",L.DomEvent.stopPropagation).on(c,"dblclick",L.DomEvent.stopPropagation).on(c,"touchstart",L.DomEvent.stopPropagation).on(c,"click",L.DomEvent.preventDefault).on(c,"click",a.callback,a.context);return c},_disposeButton:function(a,b){L.DomEvent.off(a,"click",L.DomEvent.stopPropagation).off(a,"mousedown",L.DomEvent.stopPropagation).off(a,"dblclick",L.DomEvent.stopPropagation).off(a,"touchstart",L.DomEvent.stopPropagation).off(a,"click",L.DomEvent.preventDefault).off(a,"click",b)},_handlerActivated:function(a){this.disable();this._activeMode=this._modes[a.handler];L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._showActionsToolbar();this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar();L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._activeMode=null;this.fire("disable")},_createActions:function(j){var a=this._actionsContainer,g=this.getActions(j),b=g.length,h,f,e,d;for(f=0,e=this._actionButtons.length;f<e;f++){this._disposeButton(this._actionButtons[f].button,this._actionButtons[f].callback)}this._actionButtons=[];while(a.firstChild){a.removeChild(a.firstChild)}for(var c=0;c<b;c++){if("enabled" in g[c]&&!g[c].enabled){continue}h=L.DomUtil.create("li","",a);d=this._createButton({title:g[c].title,text:g[c].text,container:h,callback:g[c].callback,context:g[c].context});this._actionButtons.push({button:d,callback:g[c].callback})}},_showActionsToolbar:function(){var c=this._activeMode.buttonIndex,a=this._lastButtonIndex,b=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler);this._actionsContainer.style.top=b+"px";if(c===0){L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")}if(c===a){L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom");L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")}this._actionsContainer.style.display="block"},_hideActionsToolbar:function(){this._actionsContainer.style.display="none";L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom")
}});L.Draw=L.Draw||{};L.Draw.Tooltip=L.Class.extend({initialize:function(a){this._map=a;this._popupPane=a._panes.popupPane;this._container=a.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null;this._singleLineLabel=false;this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this);if(this._container){this._popupPane.removeChild(this._container);this._container=null}},updateContent:function(a){if(!this._container){return this}a.subtext=a.subtext||"";if(a.subtext.length===0&&!this._singleLineLabel){L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single");this._singleLineLabel=true}else{if(a.subtext.length>0&&this._singleLineLabel){L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single");this._singleLineLabel=false}}this._container.innerHTML=(a.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+a.subtext+"</span>"+"<br />":"")+"<span>"+a.text+"</span>";return this},updatePosition:function(c){var b=this._map.latLngToLayerPoint(c),a=this._container;if(this._container){a.style.visibility="inherit";L.DomUtil.setPosition(a,b)}return this},showAsError:function(){if(this._container){L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip")}return this},removeError:function(){if(this._container){L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip")}return this},_onMouseOut:function(){if(this._container){this._container.style.visibility="hidden"}}});L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(f){var c=f.length,d=0,a=Math.PI/180,g,e;if(c>2){for(var b=0;b<c;b++){g=f[b];e=f[(b+1)%c];d+=((e.lng-g.lng)*a)*(2+Math.sin(g.lat*a)+Math.sin(e.lat*a))}d=d*6378137*6378137/2}return Math.abs(d)},formattedNumber:function(h,b){var e=h.toFixed(b);var f=L.drawLocal.format&&L.drawLocal.format.numeric,g=f&&f.delimiters,c=g&&g.thousands,a=g&&g.decimal;if(c||a){var d=e.split(".");e=c?d[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+c):d[0];a=a||".";if(d.length>1){e=e+a+d[1]}}return e},readableArea:function(b,a){var c;if(a){if(b>=10000){c=L.GeometryUtil.formattedNumber(b*0.0001,2)+" ha"}else{c=L.GeometryUtil.formattedNumber(b,2)+" m&sup2;"}}else{b/=0.836127;if(b>=3097600){c=L.GeometryUtil.formattedNumber(b/3097600,2)+" mi&sup2;"}else{if(b>=4840){c=L.GeometryUtil.formattedNumber(b/4840,2)+" acres"}else{c=L.GeometryUtil.formattedNumber(Math.ceil(b))+" yd&sup2;"}}}return c},readableDistance:function(f,a,d,c){var e,b;if(typeof a=="string"){b=a}else{if(d){b="feet"}else{if(c){b="nauticalMile"}else{if(a){b="metric"}else{b="yards"}}}}switch(b){case"metric":if(f>1000){e=L.GeometryUtil.formattedNumber(f/1000,2)+" km"}else{e=L.GeometryUtil.formattedNumber(Math.ceil(f))+" m"}break;case"feet":f*=1.09361*3;e=L.GeometryUtil.formattedNumber(Math.ceil(f))+" ft";break;case"nauticalMile":f*=0.53996;e=L.GeometryUtil.formattedNumber(f/1000,2)+" nm";break;case"yards":default:f*=1.09361;if(f>1760){e=L.GeometryUtil.formattedNumber(f/1760,2)+" miles"}else{e=L.GeometryUtil.formattedNumber(Math.ceil(f))+" yd"}break}return e}});L.LatLngUtil={cloneLatLngs:function(a){var d=[];for(var c=0,b=a.length;c<b;c++){if(Array.isArray(a[c])){d.push(L.LatLngUtil.cloneLatLngs(a[c]))}else{d.push(this.cloneLatLng(a[c]))}}return d},cloneLatLng:function(a){return L.latLng(a.lat,a.lng)}};L.Util.extend(L.LineUtil,{segmentsIntersect:function(c,d,b,a){return this._checkCounterclockwise(c,b,a)!==this._checkCounterclockwise(d,b,a)&&this._checkCounterclockwise(c,d,b)!==this._checkCounterclockwise(c,d,a)},_checkCounterclockwise:function(b,c,a){return(a.y-b.y)*(c.x-b.x)>(c.y-b.y)*(a.x-b.x)}});L.Polygon.include({intersects:function(){var e,c=this._getProjectedPoints(),a,f,d,b;if(this._tooFewPointsForIntersection()){return false}e=L.Polyline.prototype.intersects.call(this);if(e){return true}a=c.length;f=c[0];d=c[a-1];b=a-2;return this._lineSegmentsIntersectsRange(d,f,b,1)}});L.Polyline.include({intersects:function(){var c=this._getProjectedPoints(),a=c?c.length:0,b,d,e;if(this._tooFewPointsForIntersection()){return false}for(b=a-1;b>=3;b--){d=c[b-1];e=c[b];if(this._lineSegmentsIntersectsRange(d,e,b-2)){return true}}return false},newLatLngIntersects:function(b,a){if(!this._map){return false}return this.newPointIntersects(this._map.latLngToLayerPoint(b),a)},newPointIntersects:function(b,e){var d=this._getProjectedPoints(),a=d?d.length:0,f=d?d[a-1]:null,c=a-2;if(this._tooFewPointsForIntersection(1)){return false}return this._lineSegmentsIntersectsRange(f,b,c,e?1:0)},_tooFewPointsForIntersection:function(c){var b=this._getProjectedPoints(),a=b?b.length:0;a+=c||0;return !b||a<=3},_lineSegmentsIntersectsRange:function(g,h,c,b){var d=this._getProjectedPoints(),f,e;b=b||0;for(var a=c;a>b;a--){f=d[a-1];e=d[a];if(L.LineUtil.segmentsIntersect(g,h,f,e)){return true}}return false},_getProjectedPoints:function(){if(!this._defaultShape){return this._originalPoints}var b=[],c=this._defaultShape();for(var a=0;a<c.length;a++){b.push(this._map.latLngToLayerPoint(c[a]))
}return b}});L.Map.mergeOptions({touchExtend:true});L.Map.TouchExtend=L.Handler.extend({initialize:function(a){this._map=a;this._container=a._container;this._pane=a._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this);L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this);L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this);if(this._detectIE()){L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this);L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this);L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this);L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)}else{L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this);L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this)}},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart);L.DomEvent.off(this._container,"touchend",this._onTouchEnd);L.DomEvent.off(this._container,"touchmove",this._onTouchMove);if(this._detectIE()){L.DomEvent.off(this._container,"MSPointerDowm",this._onTouchStart);L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd);L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove);L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel)}else{L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel);L.DomEvent.off(this._container,"touchleave",this._onTouchLeave)}},_touchEvent:function(f,d){var a={};if(typeof f.touches!=="undefined"){if(!f.touches.length){return}a=f.touches[0]}else{if(f.pointerType==="touch"){a=f;if(!this._filterClick(f)){return}}else{return}}var c=this._map.mouseEventToContainerPoint(a),b=this._map.mouseEventToLayerPoint(a),g=this._map.layerPointToLatLng(b);this._map.fire(d,{latlng:g,layerPoint:b,containerPoint:c,pageX:a.pageX,pageY:a.pageY,originalEvent:f})},_filterClick:function(c){var b=(c.timeStamp||c.originalEvent.timeStamp),a=L.DomEvent._lastClick&&(b-L.DomEvent._lastClick);if((a&&a>100&&a<500)||(c.target._simulatedClick&&!c._simulated)){L.DomEvent.stop(c);return false}L.DomEvent._lastClick=b;return true},_onTouchStart:function(b){if(!this._map._loaded){return}var a="touchstart";this._touchEvent(b,a)},_onTouchEnd:function(b){if(!this._map._loaded){return}var a="touchend";this._touchEvent(b,a)},_onTouchCancel:function(b){if(!this._map._loaded){return}var a="touchcancel";if(this._detectIE()){a="pointercancel"}this._touchEvent(b,a)},_onTouchLeave:function(b){if(!this._map._loaded){return}var a="touchleave";this._touchEvent(b,a)},_onTouchMove:function(b){if(!this._map._loaded){return}var a="touchmove";this._touchEvent(b,a)},_detectIE:function(){var c=window.navigator.userAgent;var b=c.indexOf("MSIE ");if(b>0){return parseInt(c.substring(b+5,c.indexOf(".",b)),10)}var a=c.indexOf("Trident/");if(a>0){var e=c.indexOf("rv:");return parseInt(c.substring(e+3,c.indexOf(".",e)),10)}var d=c.indexOf("Edge/");if(d>0){return parseInt(c.substring(d+5,c.indexOf(".",d)),10)}return false}});L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend);L.Marker.Touch=L.Marker.extend({_initInteraction:function(){if(!this.addInteractiveTarget){return this._initInteractionLegacy()}return L.Marker.prototype._initInteraction.apply(this)},_initInteractionLegacy:function(){if(!this.options.clickable){return}var c=this._icon,b=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];if(this._detectIE){b.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"])}else{b.concat(["touchcancel"])}L.DomUtil.addClass(c,"leaflet-clickable");L.DomEvent.on(c,"click",this._onMouseClick,this);L.DomEvent.on(c,"keypress",this._onKeyPress,this);for(var a=0;a<b.length;a++){L.DomEvent.on(c,b[a],this._fireMouseEvent,this)}if(L.Handler.MarkerDrag){this.dragging=new L.Handler.MarkerDrag(this);if(this.options.draggable){this.dragging.enable()}}},_detectIE:function(){var c=window.navigator.userAgent;var b=c.indexOf("MSIE ");if(b>0){return parseInt(c.substring(b+5,c.indexOf(".",b)),10)}var a=c.indexOf("Trident/");if(a>0){var e=c.indexOf("rv:");return parseInt(c.substring(e+3,c.indexOf(".",e)),10)}var d=c.indexOf("Edge/");if(d>0){return parseInt(c.substring(d+5,c.indexOf(".",d)),10)}return false}});L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{}},initialize:function(a){for(var b in this.options){if(this.options.hasOwnProperty(b)){if(a[b]){a[b]=L.extend({},this.options[b],a[b])}}}this._toolbarClass="leaflet-draw-draw";L.Toolbar.prototype.initialize.call(this,a)},getModeHandlers:function(a){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(a,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(a,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(a,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(a,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(a,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker}]
},getActions:function(a){return[{enabled:a.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:a.completeShape,context:a},{enabled:a.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:a.deleteLastVertex,context:a},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(a){L.setOptions(this,a);for(var b in this._modes){if(this._modes.hasOwnProperty(b)&&a.hasOwnProperty(b)){this._modes[b].handler.setOptions(a[b])}}}});L.Draw=L.Draw||{};L.Draw.Feature=L.Handler.extend({includes:L.Mixin.Events,initialize:function(b,a){this._map=b;this._container=b._container;this._overlayPane=b._panes.overlayPane;this._popupPane=b._panes.popupPane;if(a&&a.shapeOptions){a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)}L.setOptions(this,a)},enable:function(){if(this._enabled){return}L.Handler.prototype.enable.call(this);this.fire("enabled",{handler:this.type});this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type})},disable:function(){if(!this._enabled){return}L.Handler.prototype.disable.call(this);this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type});this.fire("disabled",{handler:this.type})},addHooks:function(){var a=this._map;if(a){L.DomUtil.disableTextSelection();a.getContainer().focus();this._tooltip=new L.Draw.Tooltip(this._map);L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this)}},removeHooks:function(){if(this._map){L.DomUtil.enableTextSelection();this._tooltip.dispose();this._tooltip=null;L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this)}},setOptions:function(a){L.setOptions(this,a)},_fireCreatedEvent:function(a){this._map.fire(L.Draw.Event.CREATED,{layer:a,layerType:this.type})},_cancelDrawing:function(a){this._map.fire("draw:canceled",{layerType:this.type});if(a.keyCode===27){this.disable()}}});L.SimpleShape={};L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:false},initialize:function(b,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end;L.Draw.Feature.prototype.initialize.call(this,b,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);if(this._map){this._mapDraggable=this._map.dragging.enabled();if(this._mapDraggable){this._map.dragging.disable()}this._container.style.cursor="crosshair";this._tooltip.updateContent({text:this._initialLabelText});this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);if(this._map){if(this._mapDraggable){this._map.dragging.enable()}this._container.style.cursor="";this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this);L.DomEvent.off(document,"mouseup",this._onMouseUp,this);L.DomEvent.off(document,"touchend",this._onMouseUp,this);if(this._shape){this._map.removeLayer(this._shape);delete this._shape}}this._isDrawing=false},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(a){this._isDrawing=true;this._startLatLng=a.latlng;L.DomEvent.on(document,"mouseup",this._onMouseUp,this).on(document,"touchend",this._onMouseUp,this).preventDefault(a.originalEvent)},_onMouseMove:function(a){var b=a.latlng;this._tooltip.updatePosition(b);if(this._isDrawing){this._tooltip.updateContent(this._getTooltipText());this._drawShape(b)}},_onMouseUp:function(){if(this._shape){this._fireCreatedEvent()}this.disable();if(this.options.repeatMode){this.enable()}}});L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:true,repeatMode:false,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4000,shapeOptions:{stroke:true,color:"#3388ff",weight:4,opacity:0.5,fill:false,clickable:true},metric:true,feet:true,nautic:false,showLength:true,zIndexOffset:2000},initialize:function(b,a){if(L.Browser.touch){this.options.icon=this.options.touchIcon}this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error;if(a&&a.drawError){a.drawError=L.Util.extend({},this.options.drawError,a.drawError)}this.type=L.Draw.Polyline.TYPE;L.Draw.Feature.prototype.initialize.call(this,b,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);if(this._map){this._markers=[];this._markerGroup=new L.LayerGroup();this._map.addLayer(this._markerGroup);this._poly=new L.Polyline([],this.options.shapeOptions);this._tooltip.updateContent(this._getTooltipText());if(!this._mouseMarker){this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})
}this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map);this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(this._markers.length<=1){return}var c=this._markers.pop(),b=this._poly,a=b.getLatLngs(),d=a.splice(-1,1)[0];this._poly.setLatLngs(a);this._markerGroup.removeLayer(c);if(b.getLatLngs().length<2){this._map.removeLayer(b)}this._vertexChanged(d,false)},addVertex:function(b){var a=this._markers.length;if(a>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(b)){this._showErrorTooltip();return}else{if(this._errorShown){this._hideErrorTooltip()}}this._markers.push(this._createMarker(b));this._poly.addLatLng(b);if(this._poly.getLatLngs().length===2){this._map.addLayer(this._poly)}this._vertexChanged(b,true)},completeShape:function(){if(this._markers.length<=1){return}this._fireCreatedEvent();this.disable();if(this.options.repeatMode){this.enable()}},_finishShape:function(){var a=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs();var b=this._poly.newLatLngIntersects(a[a.length-1]);if((!this.options.allowIntersection&&b)||!this._shapeIsValid()){this._showErrorTooltip();return}this._fireCreatedEvent();this.disable();if(this.options.repeatMode){this.enable()}},_shapeIsValid:function(){return true},_onZoomEnd:function(){if(this._markers!==null){this._updateGuide()}},_onMouseMove:function(b){var a=this._map.mouseEventToLayerPoint(b.originalEvent);var c=this._map.layerPointToLatLng(a);this._currentLatLng=c;this._updateTooltip(c);this._updateGuide(a);this._mouseMarker.setLatLng(c);L.DomEvent.preventDefault(b.originalEvent)},_vertexChanged:function(b,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup});this._updateFinishHandler();this._updateRunningMeasure(b,a);this._clearGuides();this._updateTooltip()},_onMouseDown:function(d){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(d);this._clickHandled=true;this._disableNewMarkers();var a=d.originalEvent;var c=a.clientX;var b=a.clientY;this._startPoint.call(this,c,b)}},_startPoint:function(b,a){this._mouseDownOrigin=L.point(b,a)},_onMouseUp:function(d){var a=d.originalEvent;var c=a.clientX;var b=a.clientY;this._endPoint.call(this,c,b,d);this._clickHandled=null},_endPoint:function(c,a,d){if(this._mouseDownOrigin){var f=L.point(c,a).distanceTo(this._mouseDownOrigin);var b=this._calculateFinishDistance(d.latlng);if(b<10&&L.Browser.touch){this._finishShape()}else{if(Math.abs(f)<9*(window.devicePixelRatio||1)){this.addVertex(d.latlng)}}this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(d){var a=d.originalEvent;var c;var b;if(a.touches&&a.touches[0]&&!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){c=a.touches[0].clientX;b=a.touches[0].clientY;this._disableNewMarkers();this._touchHandled=true;this._startPoint.call(this,c,b);this._endPoint.call(this,c,b,d);this._touchHandled=null}this._clickHandled=null},_onMouseOut:function(){if(this._tooltip){this._tooltip._onMouseOut.call(this._tooltip)}},_calculateFinishDistance:function(f){var e;if(this._markers.length>0){var c;if(this.type===L.Draw.Polyline.TYPE){c=this._markers[this._markers.length-1]}else{if(this.type===L.Draw.Polygon.TYPE){c=this._markers[0]}else{return Infinity}}var d=this._map.latLngToContainerPoint(c.getLatLng()),b=new L.Marker(f,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset*2});var a=this._map.latLngToContainerPoint(b.getLatLng());e=d.distanceTo(a)}else{e=Infinity}return e},_updateFinishHandler:function(){var a=this._markers.length;if(a>1){this._markers[a-1].on("click",this._finishShape,this)}if(a>2){this._markers[a-2].off("click",this._finishShape,this)}},_createMarker:function(b){var a=new L.Marker(b,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset*2});this._markerGroup.addLayer(a);return a},_updateGuide:function(b){var a=this._markers?this._markers.length:0;if(a>0){b=b||this._map.latLngToLayerPoint(this._currentLatLng);
    this._clearGuides();this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),b)}},_updateTooltip:function(a){var b=this._getTooltipText();if(a){this._tooltip.updatePosition(a)}if(!this._errorShown){this._tooltip.updateContent(b)}},_drawGuide:function(a,j){var b=Math.floor(Math.sqrt(Math.pow((j.x-a.x),2)+Math.pow((j.y-a.y),2))),e=this.options.guidelineDistance,g=this.options.maxGuideLineLength,c=b>g?b-g:e,h,f,d;if(!this._guidesContainer){this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane)}for(;c<b;c+=this.options.guidelineDistance){h=c/b;f={x:Math.floor((a.x*(1-h))+(h*j.x)),y:Math.floor((a.y*(1-h))+(h*j.y))};d=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer);d.style.backgroundColor=!this._errorShown?this.options.shapeOptions.color:this.options.drawError.color;L.DomUtil.setPosition(d,f)}},_updateGuideColor:function(b){if(this._guidesContainer){for(var c=0,a=this._guidesContainer.childNodes.length;c<a;c++){this._guidesContainer.childNodes[c].style.backgroundColor=b}}},_clearGuides:function(){if(this._guidesContainer){while(this._guidesContainer.firstChild){this._guidesContainer.removeChild(this._guidesContainer.firstChild)}}},_getTooltipText:function(){var a=this.options.showLength,b,c;if(L.Browser.touch){a=false}if(this._markers.length===0){b={text:L.drawLocal.draw.handlers.polyline.tooltip.start}}else{c=a?this._getMeasurementString():"";if(this._markers.length===1){b={text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:c}}else{b={text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:c}}}return b},_updateRunningMeasure:function(e,c){var a=this._markers.length,b,d;if(this._markers.length===1){this._measurementRunningTotal=0}else{b=a-(c?2:1);d=e.distanceTo(this._markers[b].getLatLng());this._measurementRunningTotal+=d*(c?1:-1)}},_getMeasurementString:function(){var b=this._currentLatLng,a=this._markers[this._markers.length-1].getLatLng(),c;c=this._measurementRunningTotal+b.distanceTo(a);return L.GeometryUtil.readableDistance(c,this.options.metric,this.options.feet,this.options.nautic)},_showErrorTooltip:function(){this._errorShown=true;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=false;this._clearHideErrorTimeout();this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){if(this._hideErrorTimeout){clearTimeout(this._hideErrorTimeout);this._hideErrorTimeout=null}},_disableNewMarkers:function(){this._disableMarkers=true},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=false}.bind(this),50)},_cleanUpShape:function(){if(this._markers.length>1){this._markers[this._markers.length-1].off("click",this._finishShape,this)}},_fireCreatedEvent:function(){var a=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}});L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:true,color:"#3388ff",weight:4,opacity:0.5,fill:true,fillColor:null,fillOpacity:0.2,clickable:true},showRadius:true,metric:true,feet:true,nautic:false},initialize:function(b,a){this.type=L.Draw.Circle.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,b,a)},_drawShape:function(a){if(!this._shape){this._shape=new L.Circle(this._startLatLng,this._startLatLng.distanceTo(a),this.options.shapeOptions);this._map.addLayer(this._shape)}else{this._shape.setRadius(this._startLatLng.distanceTo(a))}},_fireCreatedEvent:function(){var a=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_onMouseMove:function(d){var g=d.latlng,c=this.options.showRadius,f=this.options.metric,a;this._tooltip.updatePosition(g);if(this._isDrawing){this._drawShape(g);a=this._shape.getRadius().toFixed(1);var b="";if(c){b=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,f,this.options.feet,this.options.nautic)}this._tooltip.updateContent({text:this._endLabelText,subtext:b})}}});L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default(),repeatMode:false,zIndexOffset:2000},initialize:function(b,a){this.type=L.Draw.Marker.TYPE;L.Draw.Feature.prototype.initialize.call(this,b,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);if(this._map){this._tooltip.updateContent({text:L.drawLocal.draw.handlers.marker.tooltip.start});if(!this._mouseMarker){this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})
}this._mouseMarker.on("click",this._onClick,this).addTo(this._map);this._map.on("mousemove",this._onMouseMove,this);this._map.on("click",this._onTouch,this)}},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);if(this._map){if(this._marker){this._marker.off("click",this._onClick,this);this._map.off("click",this._onClick,this).off("click",this._onTouch,this).removeLayer(this._marker);delete this._marker}this._mouseMarker.off("click",this._onClick,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._map.off("mousemove",this._onMouseMove,this)}},_onMouseMove:function(a){var b=a.latlng;this._tooltip.updatePosition(b);this._mouseMarker.setLatLng(b);if(!this._marker){this._marker=new L.Marker(b,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset});this._marker.on("click",this._onClick,this);this._map.on("click",this._onClick,this).addLayer(this._marker)}else{b=this._mouseMarker.getLatLng();this._marker.setLatLng(b)}},_onClick:function(){this._fireCreatedEvent();this.disable();if(this.options.repeatMode){this.enable()}},_onTouch:function(a){this._onMouseMove(a);this._onClick()},_fireCreatedEvent:function(){var a=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,a)}});L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:false,shapeOptions:{stroke:true,color:"#3388ff",weight:4,opacity:0.5,fill:true,fillColor:null,fillOpacity:0.2,clickable:true},metric:true},initialize:function(b,a){L.Draw.Polyline.prototype.initialize.call(this,b,a);this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var a=this._markers.length;if(a===1){this._markers[0].on("click",this._finishShape,this)}if(a>2){this._markers[a-1].on("dblclick",this._finishShape,this);if(a>3){this._markers[a-2].off("dblclick",this._finishShape,this)}}},_getTooltipText:function(){var b,a;if(this._markers.length===0){b=L.drawLocal.draw.handlers.polygon.tooltip.start}else{if(this._markers.length<3){b=L.drawLocal.draw.handlers.polygon.tooltip.cont}else{b=L.drawLocal.draw.handlers.polygon.tooltip.end;a=this._getMeasurementString()}}return{text:b,subtext:a}},_getMeasurementString:function(){var a=this._area;if(!a){return null}return L.GeometryUtil.readableArea(a,this.options.metric)},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(c,a){var b;if(!this.options.allowIntersection&&this.options.showArea){b=this._poly.getLatLngs();this._area=L.GeometryUtil.geodesicArea(b)}L.Draw.Polyline.prototype._vertexChanged.call(this,c,a)},_cleanUpShape:function(){var a=this._markers.length;if(a>0){this._markers[0].off("click",this._finishShape,this);if(a>2){this._markers[a-1].off("dblclick",this._finishShape,this)}}}});L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:true,color:"#3388ff",weight:4,opacity:0.5,fill:true,fillColor:null,fillOpacity:0.2,showArea:true,clickable:true},metric:true},initialize:function(b,a){this.type=L.Draw.Rectangle.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,b,a)},_drawShape:function(a){if(!this._shape){this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,a),this.options.shapeOptions);this._map.addLayer(this._shape)}else{this._shape.setBounds(new L.LatLngBounds(this._startLatLng,a))}},_fireCreatedEvent:function(){var a=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,a)},_getTooltipText:function(){var f=L.Draw.SimpleShape.prototype._getTooltipText.call(this),b=this._shape,a=this.options.showArea,e,d,c;if(b){e=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs();d=L.GeometryUtil.geodesicArea(e);c=a?L.GeometryUtil.readableArea(d,this.options.metric):""}return{text:f.text,subtext:c}}});L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:true,fillColor:"#fe57a1",fillOpacity:0.1,maintainColor:false}},remove:{},poly:null,featureGroup:null},initialize:function(a){if(a.edit){if(typeof a.edit.selectedPathOptions==="undefined"){a.edit.selectedPathOptions=this.options.edit.selectedPathOptions}a.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,a.edit.selectedPathOptions)}if(a.remove){a.remove=L.extend({},this.options.remove,a.remove)}if(a.poly){a.poly=L.extend({},this.options.poly,a.poly)}this._toolbarClass="leaflet-draw-edit";L.Toolbar.prototype.initialize.call(this,a);this._selectedFeatureCount=0},getModeHandlers:function(b){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(b,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(b,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]
},getActions:function(){return[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this},{title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}]},addToolbar:function(b){var a=L.Toolbar.prototype.addToolbar.call(this,b);this._checkDisabled();this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this);return a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this);L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){if(!this.enabled()){return}this._activeMode.handler.revertLayers();L.Toolbar.prototype.disable.call(this)},_save:function(){this._activeMode.handler.save();if(this._activeMode){this._activeMode.handler.disable()}},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers();if(this._activeMode){this._activeMode.handler.disable()}},_checkDisabled:function(){var b=this.options.featureGroup,a=b.getLayers().length!==0,c;if(this.options.edit){c=this._modes[L.EditToolbar.Edit.TYPE].button;if(a){L.DomUtil.removeClass(c,"leaflet-disabled")}else{L.DomUtil.addClass(c,"leaflet-disabled")}c.setAttribute("title",a?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)}if(this.options.remove){c=this._modes[L.EditToolbar.Delete.TYPE].button;if(a){L.DomUtil.removeClass(c,"leaflet-disabled")}else{L.DomUtil.addClass(c,"leaflet-disabled")}c.setAttribute("title",a?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled)}}});L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},includes:L.Mixin.Events,initialize:function(b,a){L.Handler.prototype.initialize.call(this,b);L.setOptions(this,a);this._featureGroup=a.featureGroup;if(!(this._featureGroup instanceof L.FeatureGroup)){throw new Error("options.featureGroup must be a L.FeatureGroup")}this._uneditedLayerProps={};this.type=L.EditToolbar.Edit.TYPE},enable:function(){if(this._enabled||!this._hasAvailableLayers()){return}this.fire("enabled",{handler:this.type});this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type});L.Handler.prototype.enable.call(this);this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this)},disable:function(){if(!this._enabled){return}this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this);L.Handler.prototype.disable.call(this);this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type});this.fire("disabled",{handler:this.type})},addHooks:function(){var a=this._map;if(a){a.getContainer().focus();this._featureGroup.eachLayer(this._enableLayerEdit,this);this._deletedLayers=new L.LayerGroup();this._tooltip=new L.Draw.Tooltip(this._map);this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext});a._editTooltip=this._tooltip;this._updateTooltip();this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this)}},removeHooks:function(){if(this._map){this._featureGroup.eachLayer(this._disableLayerEdit,this);this._uneditedLayerProps={};this._deletedLayers=null;this._tooltip.dispose();this._tooltip=null;this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this)}},revertLayers:function(){this._featureGroup.eachLayer(function(a){this._revertLayer(a)},this)},save:function(){var a=new L.LayerGroup();this._featureGroup.eachLayer(function(b){if(b.edited){a.addLayer(b);b.edited=false}});if(this._deletedLayers.getLayers().length){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})}else{if(a.getLayers().length){this._map.fire(L.Draw.Event.EDITED,{layers:a})}}},removeAllLayers:function(){this._featureGroup.eachLayer(function(a){this._removeLayer({layer:a})},this);this.save()},_backupLayer:function(a){var b=L.Util.stamp(a);if(!this._uneditedLayerProps[b]){if(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle){this._uneditedLayerProps[b]={latlngs:L.LatLngUtil.cloneLatLngs(a.getLatLngs())}}else{if(a instanceof L.Circle){this._uneditedLayerProps[b]={latlng:L.LatLngUtil.cloneLatLng(a.getLatLng()),radius:a.getRadius()}}else{if(a instanceof L.Marker){this._uneditedLayerProps[b]={latlng:L.LatLngUtil.cloneLatLng(a.getLatLng())}}}}}},_removeLayer:function(b){var a=b.layer||b.target||b;this._featureGroup.removeLayer(a);this._deletedLayers.addLayer(a);a.fire("deleted")},_getTooltipText:function(){return({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})
},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(a){var b=L.Util.stamp(a);a.edited=false;if(this._uneditedLayerProps.hasOwnProperty(b)){if(a instanceof L.Polyline||a instanceof L.Polygon||a instanceof L.Rectangle){a.setLatLngs(this._uneditedLayerProps[b].latlngs)}else{if(a instanceof L.Circle){a.setLatLng(this._uneditedLayerProps[b].latlng);a.setRadius(this._uneditedLayerProps[b].radius)}else{if(a instanceof L.Marker){a.setLatLng(this._uneditedLayerProps[b].latlng)}}}a.fire("revert-edited",{layer:a})}},_enableLayerEdit:function(d){var b=d.layer||d.target||d,a,c;this._backupLayer(b);if(this.options.poly){c=L.Util.extend({},this.options.poly);b.options.poly=c}if(this.options.selectedPathOptions){a=L.Util.extend({},this.options.selectedPathOptions);if(a.maintainColor){a.color=b.options.color;a.fillColor=b.options.fillColor}b.options.original=L.extend({},b.options);b.options.editing=a}if(b instanceof L.Marker){if(b.editing){b.editing.enable()}b.dragging.enable();b.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)}else{b.editing.enable()}},_disableLayerEdit:function(b){var a=b.layer||b.target||b;a.edited=false;if(a.editing){a.editing.disable()}delete a.options.editing;delete a.options.original;if(this._selectedPathOptions){if(a instanceof L.Marker){this._toggleMarkerHighlight(a)}else{a.setStyle(a.options.previousOptions);delete a.options.previousOptions}}if(a instanceof L.Marker){a.dragging.disable();a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)}else{a.editing.disable()}},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_onMarkerDragEnd:function(b){var a=b.target;a.edited=true;this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(c){var a=c.originalEvent.changedTouches[0],b=this._map.mouseEventToLayerPoint(a),d=this._map.layerPointToLatLng(b);c.target.setLatLng(d)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}});L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},includes:L.Mixin.Events,initialize:function(b,a){L.Handler.prototype.initialize.call(this,b);L.Util.setOptions(this,a);this._deletableLayers=this.options.featureGroup;if(!(this._deletableLayers instanceof L.FeatureGroup)){throw new Error("options.featureGroup must be a L.FeatureGroup")}this.type=L.EditToolbar.Delete.TYPE},enable:function(){if(this._enabled||!this._hasAvailableLayers()){return}this.fire("enabled",{handler:this.type});this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type});L.Handler.prototype.enable.call(this);this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this)},disable:function(){if(!this._enabled){return}this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this);L.Handler.prototype.disable.call(this);this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type});this.fire("disabled",{handler:this.type})},addHooks:function(){var a=this._map;if(a){a.getContainer().focus();this._deletableLayers.eachLayer(this._enableLayerDelete,this);this._deletedLayers=new L.LayerGroup();this._tooltip=new L.Draw.Tooltip(this._map);this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text});this._map.on("mousemove",this._onMouseMove,this)}},removeHooks:function(){if(this._map){this._deletableLayers.eachLayer(this._disableLayerDelete,this);this._deletedLayers=null;this._tooltip.dispose();this._tooltip=null;this._map.off("mousemove",this._onMouseMove,this)}},revertLayers:function(){this._deletedLayers.eachLayer(function(a){this._deletableLayers.addLayer(a);a.fire("revert-deleted",{layer:a})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(a){this._removeLayer({layer:a})},this);this.save()},_enableLayerDelete:function(b){var a=b.layer||b.target||b;a.on("click",this._removeLayer,this)},_disableLayerDelete:function(b){var a=b.layer||b.target||b;a.off("click",this._removeLayer,this);this._deletedLayers.removeLayer(a)},_removeLayer:function(b){var a=b.layer||b.target||b;this._deletableLayers.removeLayer(a);this._deletedLayers.addLayer(a);a.fire("deleted")},_onMouseMove:function(a){this._tooltip.updatePosition(a.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}});L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:false},initialize:function(a){if(L.version<"0.7"){throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/")}L.Control.prototype.initialize.call(this,a);
    var b;this._toolbars={};if(L.DrawToolbar&&this.options.draw){b=new L.DrawToolbar(this.options.draw);this._toolbars[L.DrawToolbar.TYPE]=b;this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)}if(L.EditToolbar&&this.options.edit){b=new L.EditToolbar(this.options.edit);this._toolbars[L.EditToolbar.TYPE]=b;this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)}L.toolbar=this},onAdd:function(e){var b=L.DomUtil.create("div","leaflet-draw"),c=false,f="leaflet-draw-toolbar-top",a;for(var d in this._toolbars){if(this._toolbars.hasOwnProperty(d)){a=this._toolbars[d].addToolbar(e);if(a){if(!c){if(!L.DomUtil.hasClass(a,f)){L.DomUtil.addClass(a.childNodes[0],f)}c=true}b.appendChild(a)}}}return b},onRemove:function(){for(var a in this._toolbars){if(this._toolbars.hasOwnProperty(a)){this._toolbars[a].removeToolbar()}}},setDrawingOptions:function(a){for(var b in this._toolbars){if(this._toolbars[b] instanceof L.DrawToolbar){this._toolbars[b].setOptions(a)}}},_toolbarEnabled:function(c){var b=c.target;for(var a in this._toolbars){if(this._toolbars[a]!==b){this._toolbars[a].disable()}}}});L.Map.mergeOptions({drawControlTooltips:true,drawControl:false});L.Map.addInitHook(function(){if(this.options.drawControl){this.drawControl=new L.Control.Draw();this.addControl(this.drawControl)}});L.Edit=L.Edit||{};L.Edit.Poly=L.Handler.extend({options:{},initialize:function(b,a){this.latlngs=[b._latlngs];if(b._holes){this.latlngs=this.latlngs.concat(b._holes)}this._poly=b;L.setOptions(this,a);this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){if(!L.Polyline._flat){return this._poly._latlngs}return L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]},_eachVertexHandler:function(b){for(var a=0;a<this._verticesHandlers.length;a++){b(this._verticesHandlers[a])}},addHooks:function(){this._initHandlers();this._eachVertexHandler(function(a){a.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(a){a.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(a){a.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var a=0;a<this.latlngs.length;a++){this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[a],this.options))}},_updateLatLngs:function(a){this.latlngs=[a.layer._latlngs];if(a.layer._holes){this.latlngs=this.latlngs.concat(a.layer._holes)}}});L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1000}},initialize:function(c,a,b){if(L.Browser.touch){this.options.icon=this.options.touchIcon}this._poly=c;if(b&&b.drawError){b.drawError=L.Util.extend({},this.options.drawError,b.drawError)}this._latlngs=a;L.setOptions(this,b)},_defaultShape:function(){if(!L.Polyline._flat){return this._latlngs}return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},addHooks:function(){var a=this._poly;if(!(a instanceof L.Polygon)){a.options.fill=false;if(a.options.editing){a.options.editing.fill=false}}a.setStyle(a.options.editing);if(this._poly._map){this._map=this._poly._map;if(!this._markerGroup){this._initMarkers()}this._poly._map.addLayer(this._markerGroup)}},removeHooks:function(){var a=this._poly;a.setStyle(a.options.original);if(a._map){a._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers}},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){if(!this._markerGroup){this._markerGroup=new L.LayerGroup()}this._markers=[];var b=this._defaultShape(),g,f,a,c;for(g=0,a=b.length;g<a;g++){c=this._createMarker(b[g],g);c.on("click",this._onMarkerClick,this);this._markers.push(c)}var e,d;for(g=0,f=a-1;g<a;f=g++){if(g===0&&!(L.Polygon&&(this._poly instanceof L.Polygon))){continue}e=this._markers[f];d=this._markers[g];this._createMiddleMarker(e,d);this._updatePrevNext(e,d)}},_createMarker:function(c,b){var a=new L.Marker.Touch(c,{draggable:true,icon:this.options.icon,});a._origLatLng=c;a._index=b;a.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this);this._markerGroup.addLayer(a);return a},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var a=this._defaultShape();var b=[].splice.apply(a,arguments);this._poly._convertLatLngs(a,true);this._poly.redraw();return b},_removeMarker:function(a){var b=a._index;this._markerGroup.removeLayer(a);this._markers.splice(b,1);this._spliceLatLngs(b,1);this._updateIndexes(b,-1);a.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)
},_fireEdit:function(){this._poly.edited=true;this._poly.fire("edit");this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(f){var a=f.target;var d=this._poly;L.extend(a._origLatLng,a._latlng);if(a._middleLeft){a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a))}if(a._middleRight){a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next))}if(d.options.poly){var c=d._map._editTooltip;if(!d.options.poly.allowIntersection&&d.intersects()){var b=d.options.color;d.setStyle({color:this.options.drawError.color});if(L.version.indexOf("0.7")!==0){a.dragging._draggable._onUp(f)}this._onMarkerClick(f);if(c){c.updateContent({text:L.drawLocal.draw.handlers.polyline.error})}setTimeout(function(){d.setStyle({color:b});if(c){c.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})}},1000)}}this._poly.redraw();this._poly.fire("editdrag")},_onMarkerClick:function(c){var b=L.Polygon&&(this._poly instanceof L.Polygon)?4:3,a=c.target;if(this._defaultShape().length<b){return}this._removeMarker(a);this._updatePrevNext(a._prev,a._next);if(a._middleLeft){this._markerGroup.removeLayer(a._middleLeft)}if(a._middleRight){this._markerGroup.removeLayer(a._middleRight)}if(a._prev&&a._next){this._createMiddleMarker(a._prev,a._next)}else{if(!a._prev){a._next._middleLeft=null}else{if(!a._next){a._prev._middleRight=null}}}this._fireEdit()},_onTouchMove:function(c){var b=this._map.mouseEventToLayerPoint(c.originalEvent.touches[0]),d=this._map.layerPointToLatLng(b),a=c.target;L.extend(a._origLatLng,d);if(a._middleLeft){a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a))}if(a._middleRight){a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next))}this._poly.redraw();this.updateMarkers()},_updateIndexes:function(a,b){this._markerGroup.eachLayer(function(c){if(c._index>a){c._index+=b}})},_createMiddleMarker:function(f,d){var g=this._getMiddleLatLng(f,d),a=this._createMarker(g),e,c,b;a.setOpacity(0.6);f._middleRight=d._middleLeft=a;c=function(){a.off("touchmove",c,this);var h=d._index;a._index=h;a.off("click",e,this).on("click",this._onMarkerClick,this);g.lat=a.getLatLng().lat;g.lng=a.getLatLng().lng;this._spliceLatLngs(h,0,g);this._markers.splice(h,0,a);a.setOpacity(1);this._updateIndexes(h,1);d._index++;this._updatePrevNext(f,a);this._updatePrevNext(a,d);this._poly.fire("editstart")};b=function(){a.off("dragstart",c,this);a.off("dragend",b,this);a.off("touchmove",c,this);this._createMiddleMarker(f,a);this._createMiddleMarker(a,d)};e=function(){c.call(this);b.call(this);this._fireEdit()};a.on("click",e,this).on("dragstart",c,this).on("dragend",b,this).on("touchmove",c,this);this._markerGroup.addLayer(a)},_updatePrevNext:function(b,a){if(b){b._next=a}if(a){a._prev=b}},_getMiddleLatLng:function(e,c){var b=this._poly._map,d=b.project(e.getLatLng()),a=b.project(c.getLatLng());return b.unproject(d._add(a)._divideBy(2))}});L.Polyline.addInitHook(function(){if(this.editing){return}if(L.Edit.Poly){this.editing=new L.Edit.Poly(this,this.options.poly);if(this.options.editable){this.editing.enable()}}this.on("add",function(){if(this.editing&&this.editing.enabled()){this.editing.addHooks()}});this.on("remove",function(){if(this.editing&&this.editing.enabled()){this.editing.removeHooks()}})});L.Edit=L.Edit||{};L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"}),},initialize:function(a,b){if(L.Browser.touch){this.options.moveIcon=this.options.touchMoveIcon;this.options.resizeIcon=this.options.touchResizeIcon}this._shape=a;L.Util.setOptions(this,b)},addHooks:function(){var a=this._shape;if(this._shape._map){this._map=this._shape._map;a.setStyle(a.options.editing);if(a._map){this._map=a._map;if(!this._markerGroup){this._initMarkers()}this._map.addLayer(this._markerGroup)}}},removeHooks:function(){var b=this._shape;b.setStyle(b.options.original);if(b._map){this._unbindMarker(this._moveMarker);for(var c=0,a=this._resizeMarkers.length;c<a;c++){this._unbindMarker(this._resizeMarkers[c])}this._resizeMarkers=null;this._map.removeLayer(this._markerGroup);delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){if(!this._markerGroup){this._markerGroup=new L.LayerGroup()}this._createMoveMarker();this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(c,b){var a=new L.Marker.Touch(c,{draggable:true,icon:b,zIndexOffset:10});
    this._bindMarker(a);this._markerGroup.addLayer(a);return a},_bindMarker:function(a){a.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(a){a.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(b){var a=b.target;a.setOpacity(0);this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=true;this._shape.fire("edit")},_onMarkerDrag:function(b){var a=b.target,c=a.getLatLng();if(a===this._moveMarker){this._move(c)}else{this._resize(c)}this._shape.redraw();this._shape.fire("editdrag")},_onMarkerDragEnd:function(b){var a=b.target;a.setOpacity(1);this._fireEdit()},_onTouchStart:function(d){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,d);if(typeof(this._getCorners)==="function"){var b=this._getCorners(),a=d.target,c=a._cornerIndex;a.setOpacity(0);this._oppositeCorner=b[(c+2)%4];this._toggleCornerMarkers(0,c)}this._shape.fire("editstart")},_onTouchMove:function(c){var b=this._map.mouseEventToLayerPoint(c.originalEvent.touches[0]),d=this._map.layerPointToLatLng(b),a=c.target;if(a===this._moveMarker){this._move(d)}else{this._resize(d)}this._shape.redraw();return false},_onTouchEnd:function(b){var a=b.target;a.setOpacity(1);this.updateMarkers();this._fireEdit()},_move:function(){},_resize:function(){}});L.Edit=L.Edit||{};L.Edit.Circle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var a=this._shape.getLatLng();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var a=this._shape.getLatLng(),b=this._getResizeMarkerPoint(a);this._resizeMarkers=[];this._resizeMarkers.push(this._createMarker(b,this.options.resizeIcon))},_getResizeMarkerPoint:function(c){var b=this._shape._radius*Math.cos(Math.PI/4),a=this._map.project(c);return this._map.unproject([a.x+b,a.y-b])},_move:function(b){var a=this._getResizeMarkerPoint(b);this._resizeMarkers[0].setLatLng(a);this._shape.setLatLng(b);this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(c){var b=this._moveMarker.getLatLng(),a=b.distanceTo(c);this._shape.setRadius(a);this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}});L.Circle.addInitHook(function(){if(L.Edit.Circle){this.editing=new L.Edit.Circle(this);if(this.options.editable){this.editing.enable()}}this.on("add",function(){if(this.editing&&this.editing.enabled()){this.editing.addHooks()}});this.on("remove",function(){if(this.editing&&this.editing.enabled()){this.editing.removeHooks()}})});L.Edit=L.Edit||{};L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var b=this._shape.getBounds(),a=b.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var b=this._getCorners();this._resizeMarkers=[];for(var c=0,a=b.length;c<a;c++){this._resizeMarkers.push(this._createMarker(b[c],this.options.resizeIcon));this._resizeMarkers[c]._cornerIndex=c}},_onMarkerDragStart:function(d){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,d);var b=this._getCorners(),a=d.target,c=a._cornerIndex;this._oppositeCorner=b[(c+2)%4];this._toggleCornerMarkers(0,c)},_onMarkerDragEnd:function(d){var b=d.target,c,a;if(b===this._moveMarker){c=this._shape.getBounds();a=c.getCenter();b.setLatLng(a)}this._toggleCornerMarkers(1);this._repositionCornerMarkers();L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,d)},_move:function(d){var b=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),g=this._shape.getBounds(),a=g.getCenter(),h,f=[];for(var e=0,c=b.length;e<c;e++){h=[b[e].lat-a.lat,b[e].lng-a.lng];f.push([d.lat+h[0],d.lng+h[1]])}this._shape.setLatLngs(f);this._repositionCornerMarkers();this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(b){var a;this._shape.setBounds(L.latLngBounds(b,this._oppositeCorner));a=this._shape.getBounds();this._moveMarker.setLatLng(a.getCenter());this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var c=this._shape.getBounds(),b=c.getNorthWest(),e=c.getNorthEast(),d=c.getSouthEast(),a=c.getSouthWest();return[b,e,d,a]},_toggleCornerMarkers:function(b){for(var c=0,a=this._resizeMarkers.length;c<a;c++){this._resizeMarkers[c].setOpacity(b)}},_repositionCornerMarkers:function(){var b=this._getCorners();for(var c=0,a=this._resizeMarkers.length;c<a;c++){this._resizeMarkers[c].setLatLng(b[c])}}});L.Rectangle.addInitHook(function(){if(L.Edit.Rectangle){this.editing=new L.Edit.Rectangle(this);
    if(this.options.editable){this.editing.enable()}}});L.Edit=L.Edit||{};L.Edit.Marker=L.Handler.extend({initialize:function(a,b){this._marker=a;L.setOptions(this,b)},addHooks:function(){var a=this._marker;a.dragging.enable();a.on("dragend",this._onDragEnd,a);this._toggleMarkerHighlight()},removeHooks:function(){var a=this._marker;a.dragging.disable();a.off("dragend",this._onDragEnd,a);this._toggleMarkerHighlight()},_onDragEnd:function(b){var a=b.target;a.edited=true;this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var a=this._marker._icon;if(!a){return}a.style.display="none";if(L.DomUtil.hasClass(a,"leaflet-edit-marker-selected")){L.DomUtil.removeClass(a,"leaflet-edit-marker-selected");this._offsetMarker(a,-4)}else{L.DomUtil.addClass(a,"leaflet-edit-marker-selected");this._offsetMarker(a,4)}a.style.display=""},_offsetMarker:function(b,d){var c=parseInt(b.style.marginTop,10)-d,a=parseInt(b.style.marginLeft,10)-d;b.style.marginTop=c+"px";b.style.marginLeft=a+"px"}});L.Marker.addInitHook(function(){if(L.Edit.Marker){this.editing=new L.Edit.Marker(this);if(this.options.editable){this.editing.enable()}}});L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{"false":"","true":""}},onAdd:function(b){var a=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",a);this.link.href="#";this._map=b;this._map.on("fullscreenchange",this._toggleTitle,this);this._toggleTitle();L.DomEvent.on(this.link,"click",this._click,this);return a},_click:function(a){L.DomEvent.stopPropagation(a);L.DomEvent.preventDefault(a);this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}});L.Map.include({isFullscreen:function(){return this._isFullscreen||false},toggleFullscreen:function(b){var a=this.getContainer();if(this.isFullscreen()){if(b&&b.pseudoFullscreen){this._disablePseudoFullscreen(a)}else{if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}else{this._disablePseudoFullscreen(a)}}}}}}else{if(b&&b.pseudoFullscreen){this._enablePseudoFullscreen(a)}else{if(a.requestFullscreen){a.requestFullscreen()}else{if(a.mozRequestFullScreen){a.mozRequestFullScreen()}else{if(a.webkitRequestFullscreen){a.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{if(a.msRequestFullscreen){a.msRequestFullscreen()}else{this._enablePseudoFullscreen(a)}}}}}}},_enablePseudoFullscreen:function(a){L.DomUtil.addClass(a,"leaflet-pseudo-fullscreen");this._setFullscreen(true);this.invalidateSize();this.fire("fullscreenchange")},_disablePseudoFullscreen:function(a){L.DomUtil.removeClass(a,"leaflet-pseudo-fullscreen");this._setFullscreen(false);this.invalidateSize();this.fire("fullscreenchange")},_setFullscreen:function(b){this._isFullscreen=b;var a=this.getContainer();if(b){L.DomUtil.addClass(a,"leaflet-fullscreen-on")}else{L.DomUtil.removeClass(a,"leaflet-fullscreen-on")}},_onFullscreenChange:function(b){var a=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;if(a===this.getContainer()&&!this._isFullscreen){this._setFullscreen(true);this.fire("fullscreenchange")}else{if(a!==this.getContainer()&&this._isFullscreen){this._setFullscreen(false);this.fire("fullscreenchange")}}}});L.Map.mergeOptions({fullscreenControl:false});L.Map.addInitHook(function(){if(this.options.fullscreenControl){this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl);this.addControl(this.fullscreenControl)}var b;if("onfullscreenchange" in document){b="fullscreenchange"}else{if("onmozfullscreenchange" in document){b="mozfullscreenchange"}else{if("onwebkitfullscreenchange" in document){b="webkitfullscreenchange"}else{if("onmsfullscreenchange" in document){b="MSFullscreenChange"}}}}if(b){var a=L.bind(this._onFullscreenChange,this);this.whenReady(function(){L.DomEvent.on(document,b,a)});this.on("unload",function(){L.DomEvent.off(document,b,a)})}});L.control.fullscreen=function(a){return new L.Control.Fullscreen(a)};